
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{Chicago}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{Chicago: "we makin' cars"}\label{chicago-we-makin-cars}

Implement the Formula SAE contectualized design problem from Zurita et
al

    \subsection{TO DO: CHECK UNITS}\label{to-do-check-units}

everywhere, esp when importing tables

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
        \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
        \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{chi}
        \PY{c+c1}{\PYZsh{} from opteval import benchmark\PYZus{}func as bf}
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}
        
        \PY{c+c1}{\PYZsh{}for server:}
        \PY{c+c1}{\PYZsh{} matplotlib.use(\PYZsq{}Agg\PYZsq{})}
        
        \PY{c+c1}{\PYZsh{}for retina display:}
        \PY{o}{\PYZpc{}}\PY{k}{config} InlineBackend.figure\PYZus{}format = \PYZsq{}retina\PYZsq{}
        
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
        \PY{k+kn}{import} \PY{n+nn}{copy}
        \PY{k+kn}{import} \PY{n+nn}{time} \PY{k}{as} \PY{n+nn}{timer}
        \PY{k+kn}{import} \PY{n+nn}{threading}
        
        \PY{k+kn}{from} \PY{n+nn}{multiprocessing} \PY{k}{import} \PY{n}{Pool}
        \PY{k+kn}{from} \PY{n+nn}{playsound} \PY{k}{import} \PY{n}{playsound}
        \PY{c+c1}{\PYZsh{} from sklearn import linear\PYZus{}model}
\end{Verbatim}


    \subsection{Helper Functions}\label{helper-functions}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} \PY{k}{def} \PY{n+nf}{cp}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}make a copy instead of reference}
            \PY{k}{return} \PY{n}{copy}\PY{o}{.}\PY{n}{deepcopy}\PY{p}{(}\PY{n}{x}\PY{p}{)}
        
        \PY{k}{def} \PY{n+nf}{isNumber}\PY{p}{(}\PY{n}{s}\PY{p}{)}\PY{p}{:}
            \PY{k}{try}\PY{p}{:}
                \PY{n+nb}{float}\PY{p}{(}\PY{n}{s}\PY{p}{)}
                \PY{k}{return} \PY{k+kc}{True}
            \PY{k}{except} \PY{n+ne}{ValueError}\PY{p}{:}
                \PY{k}{return} \PY{k+kc}{False}
        
        \PY{k}{def} \PY{n+nf}{isNaN}\PY{p}{(}\PY{n}{num}\PY{p}{)}\PY{p}{:}
            \PY{k}{return} \PY{n}{num} \PY{o}{!=} \PY{n}{num}
        
        \PY{k}{def} \PY{n+nf}{mean}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{:}
            \PY{k}{return} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{x}\PY{p}{)}
        
        \PY{k}{def} \PY{n+nf}{norm}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{:}
            \PY{k}{return} \PY{n+nb}{float}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{linalg}\PY{o}{.}\PY{n}{norm}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}
        
        \PY{k}{def} \PY{n+nf}{dist}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{)}\PY{p}{:}
            \PY{k}{return} \PY{n}{np}\PY{o}{.}\PY{n}{linalg}\PY{o}{.}\PY{n}{norm}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{y}\PY{p}{)}\PY{p}{)}
        
        \PY{k}{def} \PY{n+nf}{bounds}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{low}\PY{p}{,}\PY{n}{high}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n}{x} \PY{o}{\PYZgt{}} \PY{n}{high}\PY{p}{:}
                \PY{k}{return} \PY{n}{high}
            \PY{k}{if} \PY{n}{x} \PY{o}{\PYZlt{}} \PY{n}{low}\PY{p}{:}
                \PY{k}{return} \PY{n}{low}
            \PY{k}{return} \PY{n}{x}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{k}{def} \PY{n+nf}{makeAiScore}\PY{p}{(}\PY{p}{)}\PY{p}{:}
            \PY{n}{ai} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{normal}\PY{p}{(}\PY{l+m+mi}{97}\PY{p}{,}\PY{l+m+mi}{17}\PY{p}{)}
            \PY{n}{ai} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{n}{ai}\PY{p}{,} \PY{l+m+mi}{40}\PY{p}{,}\PY{l+m+mi}{150}\PY{p}{)}
            \PY{k}{return} \PY{n}{ai}
        
        \PY{k}{def} \PY{n+nf}{makeIqScore}\PY{p}{(}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}this IQ ranges from 0 to 1, bc it is basically efficiency}
            \PY{n}{iq} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{normal}\PY{p}{(}\PY{l+m+mf}{0.5}\PY{p}{,}\PY{l+m+mf}{0.2}\PY{p}{)}
            \PY{n}{iq} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{n}{iq}\PY{p}{,} \PY{l+m+mf}{0.1}\PY{p}{,}\PY{l+m+mf}{1.0}\PY{p}{)}
            \PY{k}{return} \PY{n}{iq}
        
        \PY{k}{def} \PY{n+nf}{pickWorseScore}\PY{p}{(}\PY{n}{betterScore}\PY{p}{,}\PY{n}{worseScore}\PY{p}{,}\PY{n}{temperature}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n}{temperature} \PY{o}{\PYZlt{}}\PY{o}{=}\PY{l+m+mf}{1E\PYZhy{}6}\PY{p}{:} \PY{c+c1}{\PYZsh{}never pick worse answers, and avoid devide by 0}
                \PY{k}{return} \PY{k+kc}{False}
            \PY{k}{if} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)} \PY{o}{\PYZlt{}} \PY{n}{np}\PY{o}{.}\PY{n}{exp}\PY{p}{(}\PY{p}{(}\PY{n}{betterScore}\PY{o}{\PYZhy{}}\PY{n}{worseScore}\PY{p}{)}\PY{o}{/}\PY{n}{temperature}\PY{p}{)}\PY{p}{:}  \PY{c+c1}{\PYZsh{}}
                \PY{k}{return} \PY{k+kc}{True} 
            \PY{k}{return} \PY{k+kc}{False}
        
        \PY{k}{def} \PY{n+nf}{calculateDecay}\PY{p}{(}\PY{n}{steps}\PY{p}{,}\PY{n}{T0}\PY{o}{=}\PY{l+m+mf}{1.0}\PY{p}{,}\PY{n}{Tf}\PY{o}{=}\PY{l+m+mf}{0.01}\PY{p}{)}\PY{p}{:}
            \PY{k}{if} \PY{n}{T0}\PY{o}{\PYZlt{}}\PY{o}{=}\PY{n}{Tf} \PY{o+ow}{or} \PY{n}{T0}\PY{o}{\PYZlt{}}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{:} 
                \PY{k}{return} \PY{l+m+mi}{0}
            \PY{k}{return} \PY{p}{(}\PY{n}{Tf} \PY{o}{/} \PY{n+nb}{float}\PY{p}{(}\PY{n}{T0}\PY{p}{)} \PY{p}{)} \PY{o}{*}\PY{o}{*} \PY{p}{(}\PY{l+m+mi}{1}\PY{o}{/}\PY{n}{steps}\PY{p}{)}
          
        \PY{k}{def} \PY{n+nf}{calculateAgentDecay}\PY{p}{(}\PY{n}{agent}\PY{p}{,} \PY{n}{steps}\PY{p}{)}\PY{p}{:}
            \PY{n}{E\PYZus{}N} \PY{o}{=} \PY{n}{normalizedE}\PY{p}{(}\PY{n}{agent}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{E}\PY{p}{)}
            \PY{n}{E\PYZus{}transformed} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{exp}\PY{p}{(}\PY{p}{(}\PY{n}{E\PYZus{}N}\PY{o}{*}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{+}\PY{l+m+mf}{3.3}\PY{p}{)}
            \PY{n}{startEndRatio} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{l+m+mi}{1}\PY{o}{/}\PY{n}{E\PYZus{}transformed}\PY{p}{,} \PY{l+m+mf}{1E\PYZhy{}10}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
            \PY{n}{T0} \PY{o}{=} \PY{n}{agent}\PY{o}{.}\PY{n}{temp}
            \PY{n}{TF} \PY{o}{=} \PY{n}{T0} \PY{o}{*} \PY{n}{startEndRatio}
            \PY{k}{return} \PY{n}{calculateDecay}\PY{p}{(}\PY{n}{steps}\PY{p}{,}\PY{n}{T0}\PY{p}{,}\PY{n}{TF}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}4}]:} \PY{k}{def} \PY{n+nf}{chaching}\PY{p}{(}\PY{p}{)}\PY{p}{:}
            \PY{n}{playsound}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{/Users/samlapp/SAE\PYZus{}ABM/missionComplete.wav}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \subsection{constants and params}\label{constants-and-params}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}108}]:} \PY{n}{complexSharing} \PY{o}{=} \PY{k+kc}{True} \PY{c+c1}{\PYZsh{}if False, shareBasic() is used, eg strictly\PYZhy{}greedy one\PYZhy{}dimension jump }
          \PY{n}{commBonus} \PY{o}{=} \PY{l+m+mi}{10} \PY{c+c1}{\PYZsh{}increasing the communication bonus makes successful communication more likely}
          \PY{n}{commRange} \PY{o}{=} \PY{l+m+mi}{180}
          \PY{n}{selfBias} \PY{o}{=} \PY{l+m+mi}{0} \PY{c+c1}{\PYZsh{}increasing self bias will make agents choose their solutions more over others}
          \PY{n}{startRange} \PY{o}{=} \PY{l+m+mi}{10}
          \PY{n}{nDims} \PY{o}{=} \PY{l+m+mi}{56}
          
          \PY{n}{SO\PYZus{}STRENGTH} \PY{o}{=} \PY{l+m+mi}{10}
          \PY{n}{RG\PYZus{}STRENGTH} \PY{o}{=} \PY{l+m+mi}{10}
          \PY{n}{TEAM\PYZus{}MEETING\PYZus{}COST} \PY{o}{=} \PY{l+m+mi}{1} \PY{c+c1}{\PYZsh{}1 turn}
          
          \PY{n}{VERBOSE} \PY{o}{=} \PY{k+kc}{False}
          \PY{n}{showViz} \PY{o}{=} \PY{k+kc}{False}
          
          \PY{n}{AVG\PYZus{}SPEED} \PY{o}{=} \PY{l+m+mi}{1}
          \PY{n}{SD\PYZus{}SPEED} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{5}
          \PY{n}{MIN\PYZus{}SPEED} \PY{o}{=} \PY{l+m+mf}{1E\PYZhy{}4}
          \PY{n}{AVG\PYZus{}TEMP} \PY{o}{=} \PY{l+m+mi}{1}
          \PY{n}{SD\PYZus{}TEMP} \PY{o}{=} \PY{l+m+mf}{0.5}
\end{Verbatim}


    \subsection{Load Table of parameters}\label{load-table-of-parameters}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{c+c1}{\PYZsh{}FIRST TIME:}
        \PY{n}{paramsDF} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./SAE/paramDB.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{paramsDF}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{paramID}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{name}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{variable}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{team}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{kind}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{minV}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{maxV}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{used}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{c+c1}{\PYZsh{} paramsDF.at[3,\PYZdq{}maxV\PYZdq{}] = np.pi/4}
        \PY{c+c1}{\PYZsh{} paramsDF.at[10,\PYZdq{}maxV\PYZdq{}] = np.pi/4}
        \PY{n}{paramsDF}\PY{o}{.}\PY{n}{at}\PY{p}{[}\PY{l+m+mi}{17}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{maxV}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{pi} \PY{o}{/}\PY{l+m+mi}{4}
        \PY{n}{paramsDF}\PY{o}{.}\PY{n}{used} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{to\PYZus{}numeric}\PY{p}{(}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{used}\PY{p}{)}
        \PY{n}{paramsDF} \PY{o}{=} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{paramID}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{c+c1}{\PYZsh{}remove unused variables... print(len(paramsDF))}
        \PY{n}{paramsDF} \PY{o}{=} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{used} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0} \PY{p}{]}
        \PY{n}{paramsDF}\PY{o}{.}\PY{n}{to\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./SAE/paramDBreduced.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{paramsDF} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./SAE/paramDBreduced.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{paramsDF}\PY{p}{)}\PY{p}{)}
        \PY{n}{paramsDF} \PY{o}{=} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{used}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}\PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n}{paramsDF}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
56

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}6}]:}    Unnamed: 0                       name variable team  kind             minV  \textbackslash{}
        0           0           rear wing height      hrw   rw     1            0.025   
        1           1           rear wing length      lrw   rw     1             0.05   
        2           2            rear wing width      wrw   rw     1              300   
        3           3  rear wing angle of attack      arw   rw     1                0   
        4           5       rear wing y position      yrw   rw     1  .500 + (h\_rw)/2   
        
                             maxV  
        0                     0.7  
        1                    0.25  
        2  r\_track-2*rear\_wheel\_r  
        3            0.7853981634  
        4       1.200 -  (h\_rw)/2  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{asw}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}7}]:}     Unnamed: 0                        name variable team  kind minV  \textbackslash{}
        15          17  side wings angle of attack      asw   sw     1    0   
        
                          maxV  
        15  0.7853981633974483  
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} \PY{c+c1}{\PYZsh{}logical vector for parameters with fixed min/max (TRUE), or min/max as f(p) (FALSE)}
        \PY{n}{hasNumericBounds} \PY{o}{=} \PY{p}{[}\PY{k+kc}{True} \PY{k}{if} \PY{n}{isNumber}\PY{p}{(}\PY{n}{row}\PY{o}{.}\PY{n}{minV}\PY{p}{)} \PY{o+ow}{and} \PY{n}{isNumber}\PY{p}{(}\PY{n}{row}\PY{o}{.}\PY{n}{maxV}\PY{p}{)} \PY{k}{else} \PY{k+kc}{False} \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{row} \PY{o+ow}{in} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{iterrows}\PY{p}{(}\PY{p}{)}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{c+c1}{\PYZsh{} materialsDF = pd.read\PYZus{}csv(\PYZdq{}/Users/samlapp/Documents/THRED Lab/SAE/materials.csv\PYZdq{})}
        \PY{c+c1}{\PYZsh{} materialsDF.q = [int(1 + np.random.uniform(0.98,1.02)*materialsDF.iloc[i][\PYZsq{}q\PYZsq{}]) for i in range(len(materialsDF))]}
        \PY{c+c1}{\PYZsh{} materialsDF.to\PYZus{}csv(\PYZdq{}/Users/samlapp/Documents/THRED Lab/SAE/materialsTweaked.csv\PYZdq{})}
        \PY{n}{materialsDF} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./SAE/materialsTweaked.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{materialsDF}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}9}]:}    Unnamed: 0                      Material Code     q           E
        0           0      Glass-filled epoxy (35\%)  GFE  1890  1900000000
        1           1  Glass-filled polyester (35\%)  GFP  1989  2000000000
        2           2      Glass-filled nylon (35\%)  GFN  1607  1600000000
        3           3           S-glass epoxy (45\%)  SGE  1781  1800000000
        4           4            Carbon epoxy (61\%)   CE  1627  1600000000
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}10}]:} \PY{n}{tiresDF} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./SAE/tires.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{tiresDF}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}10}]:}    ID   radius   mass
         0  T1  0.22860  3.636
         1  T2  0.22987  4.091
         2  T3  0.23241  4.545
         3  T4  0.24638  4.545
         4  T5  0.24765  5.000
         5  T6  0.26670  5.000
         6  T7  0.26670  5.000
         7  T8  0.26162  5.455
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} \PY{c+c1}{\PYZsh{} motorsDF = pd.read\PYZus{}csv(\PYZdq{}/Users/samlapp/Documents/THRED Lab/SAE/motors.csv\PYZdq{})}
         \PY{c+c1}{\PYZsh{} \PYZsh{} first time: we want to make motors with the same power slightly different:}
         \PY{c+c1}{\PYZsh{} motorsDF.Power = [int(1 + np.random.uniform(0.98,1.02)*motorsDF.iloc[i][\PYZsq{}Power\PYZsq{}]) for i in range(len(motorsDF))]}
         \PY{c+c1}{\PYZsh{} motorsDF.to\PYZus{}csv(\PYZdq{}/Users/samlapp/Documents/THRED Lab/SAE/motorsTweaked.csv\PYZdq{})}
         \PY{n}{enginesDF} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./SAE/motorsTweaked.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{unique}\PY{l+s+s2}{\PYZdq{}} \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{enginesDF}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n+nb}{len}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{enginesDF}\PY{o}{.}\PY{n}{Power}\PY{p}{)}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0} \PY{k}{else} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{not uniuqe}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{enginesDF}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ind}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{name}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{le}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{we}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{he}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{me}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Phi\PYZus{}e}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{T\PYZus{}e}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{n}{enginesDF}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
unique

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}11}]:}    ind  id    name     le     we     he    me  Phi\_e    T\_e
         0    0  M1   GX200  0.321  0.376  0.346  16.1   4157  912.4
         1    1  M2   GX240  0.380  0.429  0.422  27.5   5980   18.3
         2    2  M3   GX270  0.380  0.429  0.422  25.0   6208   19.1
         3    3  M4   GX340  0.407  0.485  0.449  31.5   7866   26.4
         4    4  M5  GXV340  0.433  0.382  0.406  32.3   6677   21.6
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}12}]:} \PY{c+c1}{\PYZsh{} susDF = pd.read\PYZus{}csv(\PYZdq{}/Users/samlapp/Documents/THRED Lab/SAE/suspension.csv\PYZdq{})}
         \PY{c+c1}{\PYZsh{} susDF.krsp = [int(np.random.uniform(0.98,1.02)*susDF.iloc[i][\PYZsq{}krsp\PYZsq{}]) for i in range(len(susDF))]}
         \PY{c+c1}{\PYZsh{} susDF.kfsp = susDF.krsp}
         \PY{c+c1}{\PYZsh{} susDF.to\PYZus{}csv(\PYZdq{}/Users/samlapp/Documents/THRED Lab/SAE/suspensionTweaked.csv\PYZdq{})}
         \PY{n}{susDF} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./SAE/suspensionTweaked.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{unique}\PY{l+s+s2}{\PYZdq{}} \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{susDF}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n+nb}{len}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{susDF}\PY{o}{.}\PY{n}{krsp}\PY{p}{)}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0} \PY{k}{else} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{not uniuqe}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{susDF} \PY{o}{=} \PY{n}{susDF}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{n}{susDF}\PY{o}{.}\PY{n}{columns}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{susDF}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
unique

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}12}]:}    id   krsp  crsp  mrsp   kfsp  cfsp  mfsp
         0  S1   3982   600   0.3   3982   600   0.3
         1  S2  21189  2000   0.3  21189  2000   0.3
         2  S3  20784  2000   0.3  20784  2000   0.3
         3  S4  21231  2000   0.3  21231  2000   0.3
         4  S5  20650  2000   0.3  20650  2000   0.3
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}13}]:} \PY{c+c1}{\PYZsh{} brakesDF = pd.read\PYZus{}csv(\PYZdq{}/Users/samlapp/Documents/THRED Lab/SAE/brakes.csv\PYZdq{})}
         \PY{c+c1}{\PYZsh{} brakesDF.columns = [a.strip() for a in brakesDF.columns]}
         \PY{c+c1}{\PYZsh{} brakesDF.rbrk = [np.random.uniform(0.98,1.02)*brakesDF.iloc[i][\PYZsq{}rbrk\PYZsq{}] for i in range(len(brakesDF))]}
         \PY{c+c1}{\PYZsh{} brakesDF.to\PYZus{}csv(\PYZdq{}/Users/samlapp/Documents/THRED Lab/SAE/brakesTweaked.csv\PYZdq{})}
         \PY{n}{brakesDF} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./SAE/brakesTweaked.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{unique}\PY{l+s+s2}{\PYZdq{}} \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{brakesDF}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n+nb}{len}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{brakesDF}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rbrk}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0} \PY{k}{else} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{not uniuqe}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{brakesDF} \PY{o}{=} \PY{n}{brakesDF}\PY{o}{.}\PY{n}{drop}\PY{p}{(}\PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{n}{brakesDF}\PY{o}{.}\PY{n}{columns}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}\PY{p}{)}
         \PY{n}{brakesDF}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
unique

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}13}]:}   brakeID  qbrk  lbrk    hbrk    wbrk   tbrk      rbrk
         0      B1   0.4  0.10  0.0425  0.0200  0.350  0.025447
         1      B2   0.4  0.14  0.0490  0.0175  0.350  0.024598
         2      B3   0.4  0.14  0.0615  0.0175  0.350  0.027990
         3      B4   0.5  0.10  0.0380  0.0160  0.350  0.030169
         4      B5   0.5  0.10  0.0425  0.0200  0.355  0.031523
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}14}]:} \PY{c+c1}{\PYZsh{} paramsDF.variable}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}15}]:} \PY{k}{class} \PY{n+nc}{Params}\PY{p}{:}
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{v} \PY{o}{=} \PY{n}{paramsDF}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{vars} \PY{o}{=} \PY{n}{v}\PY{o}{.}\PY{n}{variable}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{team} \PY{o}{=} \PY{n}{v}\PY{o}{.}\PY{n}{team}
                 \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{row} \PY{o+ow}{in} \PY{n}{v}\PY{o}{.}\PY{n}{iterrows}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                     \PY{n+nb}{setattr}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{row}\PY{o}{.}\PY{n}{variable}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}
         \PY{n}{p} \PY{o}{=} \PY{n}{Params}\PY{p}{(}\PY{p}{)}
         \PY{k}{for} \PY{n}{v} \PY{o+ow}{in} \PY{n}{p}\PY{o}{.}\PY{n}{vars}\PY{p}{:}
             \PY{n}{value} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{p}{)}
             \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{v}\PY{p}{,}\PY{n}{value}\PY{p}{)}
         \PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{hrw}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{team}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
         
         \PY{n}{teams} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{team}\PY{p}{)}
         \PY{n}{teamDimensions} \PY{o}{=} \PY{p}{[}\PY{p}{[}\PY{n}{row}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{t} \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{row} \PY{o+ow}{in} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{iterrows}\PY{p}{(}\PY{p}{)}\PY{p}{]} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{teams}\PY{p}{]}
         \PY{n}{teamDictionary} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{teams}\PY{p}{)}\PY{p}{)}\PY{p}{:}
             \PY{n}{teamDictionary}\PY{p}{[}\PY{n}{teams}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{teamDimensions}\PY{p}{[}\PY{n}{i}\PY{p}{]}
         \PY{n}{paramList} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}16}]:} \PY{c+c1}{\PYZsh{}convert parameter vector to Parameter object}
         \PY{n}{pNames} \PY{o}{=} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}
         \PY{n}{blankParameterObject} \PY{o}{=} \PY{n}{Params}\PY{p}{(}\PY{p}{)}
         \PY{k}{def} \PY{n+nf}{asParameters}\PY{p}{(}\PY{n}{pList}\PY{p}{)}\PY{p}{:}
             \PY{n}{p} \PY{o}{=} \PY{n}{cp}\PY{p}{(}\PY{n}{blankParameterObject}\PY{p}{)}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{pList}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{pNames}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{,}\PY{n}{pList}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
             \PY{k}{return} \PY{n}{p}
         
         \PY{n}{numberParameters} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{paramsDF}\PY{p}{)}
         \PY{k}{def} \PY{n+nf}{asVector}\PY{p}{(}\PY{n}{params}\PY{p}{)}\PY{p}{:}
             \PY{n}{r} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{numberParameters}\PY{p}{)}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{numberParameters}\PY{p}{)}\PY{p}{:}
                 \PY{n}{pName} \PY{o}{=} \PY{n}{pNames}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{r}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n+nb}{getattr}\PY{p}{(}\PY{n}{params}\PY{p}{,}\PY{n}{pName}\PY{p}{)}
             \PY{k}{return} \PY{n}{r}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}17}]:} \PY{n}{p} \PY{o}{=} \PY{n}{startParams}\PY{p}{(}\PY{p}{)}
         \PY{n}{v} \PY{o}{=} \PY{n}{asVector}\PY{p}{(}\PY{n}{p}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        NameError                                 Traceback (most recent call last)

        <ipython-input-17-72947ffea02e> in <module>()
    ----> 1 p = startParams()
          2 v = asVector(p)


        NameError: name 'startParams' is not defined

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}18}]:} \PY{o}{\PYZpc{}}\PY{k}{timeit} asParameters(v)
         \PY{o}{\PYZpc{}}\PY{k}{timeit} asVector(p)
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
191 µs ± 9.61 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
454 µs ± 5.76 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)

    \end{Verbatim}

    \subsection{Objective Subfunctions}\label{objective-subfunctions}

    \subsubsection{constants}\label{constants}

The car's top velocity vcar is 26.8 m/s (60 mph).

The car's engine speed x\_e is 3600 rpm.

The density of air q\_air during the race is 1.225 kg/m3.

The track radio of curvature r\_track is 9 m.

The pressure applied to the brakes Pbrk is 1x10\^{}7 Pa

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}19}]:} \PY{c+c1}{\PYZsh{}scale parameters to go between unit cube (approximately) and SI units}
         \PY{n}{paramMaxValues} \PY{o}{=} \PY{p}{[}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}20}]:} \PY{n}{v\PYZus{}car} \PY{o}{=} \PY{l+m+mf}{26.8} \PY{c+c1}{\PYZsh{}m/s (60 mph)}
         \PY{n}{w\PYZus{}e} \PY{o}{=} \PY{l+m+mi}{3600} \PY{o}{*} \PY{l+m+mi}{60} \PY{o}{*} \PY{l+m+mi}{2} \PY{o}{*}\PY{n}{np}\PY{o}{.}\PY{n}{pi} \PY{c+c1}{\PYZsh{}rpm  to radians/sec }
         \PY{n}{rho\PYZus{}air} \PY{o}{=} \PY{l+m+mf}{1.225} \PY{c+c1}{\PYZsh{}kg/m3.}
         \PY{n}{r\PYZus{}track} \PY{o}{=} \PY{l+m+mi}{9} \PY{c+c1}{\PYZsh{}m}
         \PY{n}{P\PYZus{}brk} \PY{o}{=} \PY{l+m+mi}{10}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{7} \PY{c+c1}{\PYZsh{}Pascals}
         \PY{n}{C\PYZus{}dc} \PY{o}{=} \PY{l+m+mf}{0.04} \PY{c+c1}{\PYZsh{}drag coefficient of cabin}
         \PY{n}{gravity} \PY{o}{=} \PY{l+m+mf}{9.81} \PY{c+c1}{\PYZsh{}m/s\PYZca{}2}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}21}]:} \PY{c+c1}{\PYZsh{}mass (minimize)}
         \PY{k}{def} \PY{n+nf}{mrw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{p}\PY{o}{.}\PY{n}{lrw} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{wrw} \PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{hrw} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{qrw}
         \PY{k}{def} \PY{n+nf}{mfw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{p}\PY{o}{.}\PY{n}{lfw} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{wfw} \PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{hfw} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{qfw}
         \PY{k}{def} \PY{n+nf}{msw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{p}\PY{o}{.}\PY{n}{lsw} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{wsw} \PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{hsw} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{qsw}
         \PY{k}{def} \PY{n+nf}{mia}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{p}\PY{o}{.}\PY{n}{lia} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{wia} \PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{hia} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{qia}
         \PY{k}{def} \PY{n+nf}{mc}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{l+m+mi}{2}\PY{o}{*}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{hc}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{lc}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{tc} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{hc}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{wc}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{tc} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{lc}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{hc}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{tc}\PY{p}{)}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{qc}
         \PY{k}{def} \PY{n+nf}{mbrk}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{c+c1}{\PYZsh{}CHRIS missing parameters: how is mbrk calculated? assuming lrw*rho}
             \PY{k}{return} \PY{n}{p}\PY{o}{.}\PY{n}{lbrk} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{wbrk} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{hbrk} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{qbrk}
         \PY{k}{def} \PY{n+nf}{mass}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}total mass, minimize}
             \PY{n}{mass} \PY{o}{=} \PY{n}{mrw}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{+} \PY{n}{mfw}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{+} \PY{l+m+mi}{2} \PY{o}{*} \PY{n}{msw}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{+} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{mrt} \PY{o}{+} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{mft} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{me} \PY{o}{+} \PY{n}{mc}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{+} \PY{n}{mia}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{+} \PY{l+m+mi}{4}\PY{o}{*}\PY{n}{mbrk}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{+} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{mrsp} \PY{o}{+} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{mfsp}
             \PY{k}{return} \PY{n}{mass}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}22}]:} \PY{c+c1}{\PYZsh{}center of gravity height, minimize}
         \PY{k}{def} \PY{n+nf}{cGy}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:} 
             \PY{n}{t1} \PY{o}{=}  \PY{p}{(}\PY{n}{mrw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{yrw} \PY{o}{+} \PY{n}{mfw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{yfw}\PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{me}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{ye} \PY{o}{+} \PY{n}{mc}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{yc} \PY{o}{+} \PY{n}{mia}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{yia}\PY{p}{)} \PY{o}{/} \PY{n}{mass}\PY{p}{(}\PY{n}{p}\PY{p}{)}
             \PY{n}{t2} \PY{o}{=} \PY{l+m+mi}{2}\PY{o}{*} \PY{p}{(}\PY{n}{msw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{ysw} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{mrt}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{rrt} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{mft}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{rft} \PY{o}{+} \PY{n}{mbrk}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{rft} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{mrsp}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{yrsp} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{mfsp}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{yfsp}\PY{p}{)} \PY{o}{/} \PY{n}{mass}\PY{p}{(}\PY{n}{p}\PY{p}{)}
             
             \PY{k}{return} \PY{n}{t1} \PY{o}{+} \PY{n}{t2}  
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}23}]:} \PY{c+c1}{\PYZsh{}Drag (minimize) and downforce (maximize)}
         \PY{k}{def} \PY{n+nf}{AR}\PY{p}{(}\PY{n}{w}\PY{p}{,}\PY{n}{alpha}\PY{p}{,}\PY{n}{l}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}aspect ratio of a wing}
             \PY{k}{return} \PY{n}{w}\PY{o}{*} \PY{n}{np}\PY{o}{.}\PY{n}{cos}\PY{p}{(}\PY{n}{alpha}\PY{p}{)} \PY{o}{/} \PY{n}{l}
             
         \PY{k}{def} \PY{n+nf}{C\PYZus{}lift}\PY{p}{(}\PY{n}{AR}\PY{p}{,}\PY{n}{alpha}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}lift coefficient of a wing}
             \PY{k}{return} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{np}\PY{o}{.}\PY{n}{pi}\PY{o}{*} \PY{p}{(}\PY{n}{AR} \PY{o}{/} \PY{p}{(}\PY{n}{AR} \PY{o}{+} \PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)} \PY{o}{*} \PY{n}{alpha}
         
         \PY{k}{def} \PY{n+nf}{C\PYZus{}drag}\PY{p}{(}\PY{n}{C\PYZus{}lift}\PY{p}{,} \PY{n}{AR}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}drag coefficient of wing}
             \PY{k}{return} \PY{n}{C\PYZus{}lift}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{/} \PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{pi} \PY{o}{*} \PY{n}{AR}\PY{p}{)}
         
         \PY{k}{def} \PY{n+nf}{F\PYZus{}down\PYZus{}wing}\PY{p}{(}\PY{n}{w}\PY{p}{,}\PY{n}{h}\PY{p}{,}\PY{n}{l}\PY{p}{,}\PY{n}{alpha}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}total downward force of wing}
             \PY{n}{wingAR} \PY{o}{=} \PY{n}{AR}\PY{p}{(}\PY{n}{w}\PY{p}{,}\PY{n}{alpha}\PY{p}{,}\PY{n}{l}\PY{p}{)}
             \PY{n}{C\PYZus{}l} \PY{o}{=} \PY{n}{C\PYZus{}lift}\PY{p}{(}\PY{n}{wingAR}\PY{p}{,} \PY{n}{alpha}\PY{p}{)}
             \PY{k}{return} \PY{l+m+mf}{0.5} \PY{o}{*} \PY{n}{alpha} \PY{o}{*} \PY{n}{h} \PY{o}{*} \PY{n}{w} \PY{o}{*} \PY{n}{rho\PYZus{}air} \PY{o}{*} \PY{p}{(}\PY{n}{v\PYZus{}car}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{p}{)} \PY{o}{*} \PY{n}{C\PYZus{}l}
         
         \PY{k}{def} \PY{n+nf}{F\PYZus{}drag\PYZus{}wing}\PY{p}{(}\PY{n}{w}\PY{p}{,}\PY{n}{h}\PY{p}{,}\PY{n}{l}\PY{p}{,}\PY{n}{alpha}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}total drag force on a wing}
             \PY{n}{wingAR} \PY{o}{=} \PY{n}{AR}\PY{p}{(}\PY{n}{w}\PY{p}{,}\PY{n}{alpha}\PY{p}{,}\PY{n}{l}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}     print(wingAR)}
             \PY{n}{C\PYZus{}l} \PY{o}{=} \PY{n}{C\PYZus{}lift}\PY{p}{(}\PY{n}{wingAR}\PY{p}{,} \PY{n}{alpha}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}     print(C\PYZus{}l)}
             \PY{n}{C\PYZus{}d} \PY{o}{=} \PY{n}{C\PYZus{}drag}\PY{p}{(}\PY{n}{C\PYZus{}l}\PY{p}{,}\PY{n}{wingAR}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}     print(C\PYZus{}d)}
             \PY{k}{return} \PY{n}{F\PYZus{}drag}\PY{p}{(}\PY{n}{w}\PY{p}{,}\PY{n}{h}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{,}\PY{n}{C\PYZus{}d}\PY{p}{)}
             
         \PY{k}{def} \PY{n+nf}{F\PYZus{}drag}\PY{p}{(}\PY{n}{w}\PY{p}{,}\PY{n}{h}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{,}\PY{n}{C\PYZus{}d}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{l+m+mf}{0.5}\PY{o}{*}\PY{n}{w}\PY{o}{*}\PY{n}{h}\PY{o}{*}\PY{n}{rho\PYZus{}air}\PY{o}{*}\PY{n}{v\PYZus{}car}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{C\PYZus{}d}
         
         \PY{k}{def} \PY{n+nf}{F\PYZus{}drag\PYZus{}total}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}total drag on vehicle}
             \PY{n}{cabinDrag} \PY{o}{=} \PY{n}{F\PYZus{}drag}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wc}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hc}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{,}\PY{n}{C\PYZus{}dc}\PY{p}{)}
             \PY{n}{rearWingDrag} \PY{o}{=} \PY{n}{F\PYZus{}drag\PYZus{}wing}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wrw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hrw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{lrw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{arw}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{n}{frontWingDrag} \PY{o}{=} \PY{n}{F\PYZus{}drag\PYZus{}wing}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wfw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hfw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{lfw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{afw}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{n}{sideWingDrag} \PY{o}{=} \PY{n}{F\PYZus{}drag\PYZus{}wing}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wsw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hsw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{lsw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{asw}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{k}{return} \PY{n}{rearWingDrag} \PY{o}{+} \PY{n}{frontWingDrag} \PY{o}{+} \PY{l+m+mi}{2}\PY{o}{*} \PY{n}{sideWingDrag} \PY{o}{+} \PY{n}{cabinDrag}
         
         \PY{k}{def} \PY{n+nf}{F\PYZus{}down\PYZus{}total}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}total downforce}
             \PY{n}{downForceRearWing} \PY{o}{=} \PY{n}{F\PYZus{}down\PYZus{}wing}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wrw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hrw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{lrw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{arw}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{n}{downForceFrontWing} \PY{o}{=} \PY{n}{F\PYZus{}down\PYZus{}wing}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wfw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hfw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{lfw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{afw}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{n}{downForceSideWing} \PY{o}{=} \PY{n}{F\PYZus{}down\PYZus{}wing}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wsw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hsw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{lsw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{asw}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{k}{return} \PY{n}{downForceRearWing} \PY{o}{+} \PY{n}{downForceFrontWing} \PY{o}{+} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{downForceSideWing}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}24}]:} \PY{c+c1}{\PYZsh{}acceleration (maximize)}
         \PY{k}{def} \PY{n+nf}{rollingResistance}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{tirePressure}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}\PY{p}{:}
             \PY{n}{C} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{005} \PY{o}{+} \PY{l+m+mi}{1}\PY{o}{/}\PY{n}{tirePressure} \PY{o}{*} \PY{p}{(}\PY{o}{.}\PY{l+m+mi}{01} \PY{o}{+} \PY{o}{.}\PY{l+m+mi}{0095} \PY{o}{*} \PY{p}{(}\PY{n}{v\PYZus{}car}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}
             \PY{k}{return} \PY{n}{C} \PY{o}{*} \PY{n}{mass}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{*} \PY{n}{gravity}
         
         \PY{k}{def} \PY{n+nf}{acceleration}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{mTotal} \PY{o}{=} \PY{n}{mass}\PY{p}{(}\PY{n}{p}\PY{p}{)}
             \PY{n}{tirePressure} \PY{o}{=} \PY{n}{p}\PY{o}{.}\PY{n}{Prt} \PY{c+c1}{\PYZsh{}CHRIS should it be front or rear tire pressure?}
             \PY{n}{total\PYZus{}resistance} \PY{o}{=} \PY{n}{F\PYZus{}drag\PYZus{}total}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{+} \PY{n}{rollingResistance}\PY{p}{(}\PY{n}{p}\PY{p}{,} \PY{n}{tirePressure}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             
             \PY{n}{w\PYZus{}wheels} \PY{o}{=} \PY{n}{v\PYZus{}car} \PY{o}{/} \PY{n}{p}\PY{o}{.}\PY{n}{rrt} \PY{c+c1}{\PYZsh{}rotational speed of rear tires}
             
             \PY{n}{efficiency} \PY{o}{=} \PY{n}{total\PYZus{}resistance} \PY{o}{*} \PY{n}{v\PYZus{}car} \PY{o}{/} \PY{n}{p}\PY{o}{.}\PY{n}{Phi\PYZus{}e}
             
             \PY{n}{torque} \PY{o}{=} \PY{n}{p}\PY{o}{.}\PY{n}{T\PYZus{}e}
             
             \PY{c+c1}{\PYZsh{}converted units of w\PYZus{}e from rpm to rad/s !!!}
             \PY{n}{F\PYZus{}wheels} \PY{o}{=} \PY{n}{torque} \PY{o}{*} \PY{n}{efficiency} \PY{o}{*} \PY{n}{w\PYZus{}e} \PY{o}{/}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{rrt} \PY{o}{*} \PY{n}{w\PYZus{}wheels}\PY{p}{)} 
             
             \PY{k}{return} \PY{p}{(}\PY{n}{F\PYZus{}wheels} \PY{o}{\PYZhy{}} \PY{n}{total\PYZus{}resistance}\PY{p}{)} \PY{o}{/} \PY{n}{mTotal}
         \PY{c+c1}{\PYZsh{} acceleration(p)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}25}]:} \PY{c+c1}{\PYZsh{}crash force (minimize)}
         \PY{k}{def} \PY{n+nf}{crashForce}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{np}\PY{o}{.}\PY{n}{sqrt}\PY{p}{(}\PY{n}{mass}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{*} \PY{n}{v\PYZus{}car}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{wia} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{hia} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{Eia} \PY{o}{/} \PY{p}{(}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{lia}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}26}]:} \PY{c+c1}{\PYZsh{}impact attenuator volume (minimize)}
         \PY{k}{def} \PY{n+nf}{iaVolume}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{p}\PY{o}{.}\PY{n}{lia}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{wia}\PY{o}{*}\PY{n}{p}\PY{o}{.}\PY{n}{hia}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}27}]:} \PY{c+c1}{\PYZsh{}corner velocity (maximize)}
         \PY{n}{y\PYZus{}suspension} \PY{o}{=} \PY{l+m+mf}{0.05} \PY{c+c1}{\PYZsh{} m}
         \PY{n}{dydt\PYZus{}suspension} \PY{o}{=} \PY{l+m+mf}{0.025} \PY{c+c1}{\PYZsh{}m/s }
         \PY{k}{def} \PY{n+nf}{suspensionForce}\PY{p}{(}\PY{n}{k}\PY{p}{,}\PY{n}{c}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{k}\PY{o}{*}\PY{n}{y\PYZus{}suspension} \PY{o}{+} \PY{n}{c}\PY{o}{*}\PY{n}{dydt\PYZus{}suspension}
         
         \PY{k}{def} \PY{n+nf}{cornerVelocity}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{F\PYZus{}fsp} \PY{o}{=} \PY{n}{suspensionForce}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{kfsp}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{cfsp}\PY{p}{)}
             \PY{n}{F\PYZus{}rsp} \PY{o}{=} \PY{n}{suspensionForce}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{krsp}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{crsp}\PY{p}{)}
             \PY{n}{downforce} \PY{o}{=} \PY{n}{F\PYZus{}down\PYZus{}total}\PY{p}{(}\PY{n}{p}\PY{p}{)}
             \PY{n}{mTotal} \PY{o}{=} \PY{n}{mass}\PY{p}{(}\PY{n}{p}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{}CHRIS again, rear tire pressure?}
             \PY{n}{C} \PY{o}{=} \PY{n}{rollingResistance}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{Prt}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{n}{forces} \PY{o}{=} \PY{n}{downforce}\PY{o}{+}\PY{n}{mTotal}\PY{o}{*}\PY{n}{gravity}\PY{o}{\PYZhy{}}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{F\PYZus{}fsp}\PY{o}{\PYZhy{}}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{F\PYZus{}rsp}
             \PY{k}{if} \PY{n}{forces} \PY{o}{\PYZlt{}} \PY{l+m+mi}{0}\PY{p}{:} 
                 \PY{k}{return} \PY{l+m+mi}{0}
             \PY{k}{return} \PY{n}{np}\PY{o}{.}\PY{n}{sqrt}\PY{p}{(} \PY{n}{forces} \PY{o}{*} \PY{n}{C} \PY{o}{*} \PY{n}{r\PYZus{}track} \PY{o}{/} \PY{n}{mTotal} \PY{p}{)}
         \PY{c+c1}{\PYZsh{} cornerVelocity(p)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}28}]:} \PY{c+c1}{\PYZsh{}breaking distance (minimize)}
         \PY{k}{def} \PY{n+nf}{breakingDistance}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{mTotal} \PY{o}{=} \PY{n}{mass}\PY{p}{(}\PY{n}{p}\PY{p}{)}
             \PY{n}{C} \PY{o}{=} \PY{n}{rollingResistance}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{Prt}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{}CHRIS need c\PYZus{}brk break friction coef, and A\PYZus{}brk (rectangle or circle?)}
             \PY{c+c1}{\PYZsh{}breaking torque}
             \PY{n}{A\PYZus{}brk} \PY{o}{=} \PY{n}{p}\PY{o}{.}\PY{n}{hbrk} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{wbrk}
             \PY{n}{c\PYZus{}brk} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{37} \PY{c+c1}{\PYZsh{}?   most standard brake pads is usually in the range of 0.35 to 0.42}
             \PY{n}{Tbrk} \PY{o}{=} \PY{l+m+mi}{2} \PY{o}{*} \PY{n}{c\PYZus{}brk} \PY{o}{*} \PY{n}{P\PYZus{}brk} \PY{o}{*} \PY{n}{A\PYZus{}brk} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{rbrk}
             
             \PY{c+c1}{\PYZsh{}y forces:}
             \PY{n}{F\PYZus{}fsp} \PY{o}{=} \PY{n}{suspensionForce}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{kfsp}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{cfsp}\PY{p}{)}
             \PY{n}{F\PYZus{}rsp} \PY{o}{=} \PY{n}{suspensionForce}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{krsp}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{crsp}\PY{p}{)}
             \PY{n}{Fy} \PY{o}{=} \PY{n}{mTotal}\PY{o}{*}\PY{n}{gravity} \PY{o}{+} \PY{n}{F\PYZus{}down\PYZus{}total}\PY{p}{(}\PY{n}{p}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{l+m+mi}{2} \PY{o}{*} \PY{n}{F\PYZus{}rsp} \PY{o}{\PYZhy{}} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{F\PYZus{}fsp}
             
             \PY{c+c1}{\PYZsh{}breaking accelleration}
             \PY{c+c1}{\PYZsh{}CHRIS front and rear tire radius are same? (rrt and rft)}
             \PY{n}{a\PYZus{}brk} \PY{o}{=} \PY{n}{Fy} \PY{o}{*} \PY{n}{C} \PY{o}{/} \PY{n}{mTotal} \PY{o}{+} \PY{l+m+mi}{4}\PY{o}{*}\PY{n}{Tbrk}\PY{o}{*}\PY{n}{C}\PY{o}{/}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{rrt}\PY{o}{*}\PY{n}{mTotal}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{}breaking distance}
             \PY{k}{return} \PY{n}{v\PYZus{}car}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{2} \PY{o}{/} \PY{p}{(}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{a\PYZus{}brk}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} breakingDistance(p)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}29}]:} \PY{c+c1}{\PYZsh{}suspension acceleration (minimize)}
         \PY{k}{def} \PY{n+nf}{suspensionAcceleration}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{Ffsp} \PY{o}{=} \PY{n}{suspensionForce}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{kfsp}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{cfsp}\PY{p}{)}
             \PY{n}{Frsp} \PY{o}{=} \PY{n}{suspensionForce}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{krsp}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{crsp}\PY{p}{)}
             \PY{n}{mTotal} \PY{o}{=} \PY{n}{mass}\PY{p}{(}\PY{n}{p}\PY{p}{)}
             \PY{n}{Fd} \PY{o}{=} \PY{n}{F\PYZus{}down\PYZus{}total}\PY{p}{(}\PY{n}{p}\PY{p}{)}
             \PY{k}{return} \PY{p}{(}\PY{l+m+mi}{2}\PY{o}{*}\PY{n}{Ffsp} \PY{o}{\PYZhy{}} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{Frsp} \PY{o}{\PYZhy{}} \PY{n}{mTotal}\PY{o}{*}\PY{n}{gravity} \PY{o}{\PYZhy{}} \PY{n}{Fd}\PY{p}{)}\PY{o}{/}\PY{n}{mTotal}
         \PY{c+c1}{\PYZsh{} suspensionAcceleration(p)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}30}]:} \PY{c+c1}{\PYZsh{}pitch moment (minimize)}
         \PY{k}{def} \PY{n+nf}{pitchMoment}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{Ffsp} \PY{o}{=} \PY{n}{suspensionForce}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{kfsp}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{cfsp}\PY{p}{)}
             \PY{n}{Frsp} \PY{o}{=} \PY{n}{suspensionForce}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{krsp}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{crsp}\PY{p}{)}
             
             \PY{n}{downForceRearWing} \PY{o}{=} \PY{n}{F\PYZus{}down\PYZus{}wing}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wrw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hrw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{lrw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{arw}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{n}{downForceFrontWing} \PY{o}{=} \PY{n}{F\PYZus{}down\PYZus{}wing}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wfw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hfw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{lfw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{afw}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{n}{downForceSideWing} \PY{o}{=} \PY{n}{F\PYZus{}down\PYZus{}wing}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{wsw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{hsw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{lsw}\PY{p}{,}\PY{n}{p}\PY{o}{.}\PY{n}{asw}\PY{p}{,}\PY{n}{rho\PYZus{}air}\PY{p}{,}\PY{n}{v\PYZus{}car}\PY{p}{)}
             \PY{c+c1}{\PYZsh{}CHRIS assuming lcg is lc? and lf is ?}
             \PY{n}{lcg} \PY{o}{=} \PY{n}{p}\PY{o}{.}\PY{n}{lc}
             \PY{n}{lf} \PY{o}{=} \PY{l+m+mf}{0.5}
             \PY{k}{return} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{Ffsp}\PY{o}{*}\PY{n}{lf} \PY{o}{+} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{Frsp}\PY{o}{*}\PY{n}{lf} \PY{o}{+} \PY{n}{downForceRearWing}\PY{o}{*}\PY{p}{(}\PY{n}{lcg} \PY{o}{\PYZhy{}} \PY{n}{p}\PY{o}{.}\PY{n}{lrw}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{downForceFrontWing}\PY{o}{*}\PY{p}{(}\PY{n}{lcg}\PY{o}{\PYZhy{}}\PY{n}{p}\PY{o}{.}\PY{n}{lfw}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{l+m+mi}{2}\PY{o}{*}\PY{n}{downForceSideWing}\PY{o}{*}\PY{p}{(}\PY{n}{lcg}\PY{o}{\PYZhy{}}\PY{n}{p}\PY{o}{.}\PY{n}{lsw}\PY{p}{)}  
         \PY{c+c1}{\PYZsh{} pitchMoment(p)}
\end{Verbatim}


    \subsection{Global Objective}\label{global-objective}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}31}]:} \PY{c+c1}{\PYZsh{}Global objective: linear sum of objective subfunctions}
         \PY{c+c1}{\PYZsh{}sub\PYZhy{}objectives to maximize will be mirrored *\PYZhy{}1 to become minimizing}
         
         \PY{n}{subObjectives} \PY{o}{=} \PY{p}{[}\PY{n}{mass}\PY{p}{,}\PY{n}{cGy}\PY{p}{,}\PY{n}{F\PYZus{}drag\PYZus{}total}\PY{p}{,}\PY{n}{F\PYZus{}down\PYZus{}total}\PY{p}{,}\PY{n}{acceleration}\PY{p}{,}\PY{n}{crashForce}\PY{p}{,}\PY{n}{iaVolume}\PY{p}{,}\PY{n}{cornerVelocity}\PY{p}{,}\PY{n}{breakingDistance}\PY{p}{,}\PY{n}{suspensionAcceleration}\PY{p}{,}\PY{n}{pitchMoment}\PY{p}{]}  
         \PY{n}{alwaysMinimize} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{]} \PY{c+c1}{\PYZsh{}1 for minimizing, \PYZhy{}1 for maximizing}
         \PY{n}{weightsNull} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{ones}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{subObjectives}\PY{p}{)}\PY{p}{)} \PY{o}{/} \PY{n+nb}{len}\PY{p}{(}\PY{n}{subObjectives}\PY{p}{)}
         \PY{n}{weights1} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{l+m+mi}{14}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{30}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{100}
         \PY{n}{weights2} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{l+m+mi}{25}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{15}\PY{p}{,}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{15}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{15}\PY{p}{,}\PY{l+m+mi}{5}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{100}
         \PY{n}{weights3} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{l+m+mi}{14}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{15}\PY{p}{,}\PY{l+m+mi}{25}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{100}
         
         \PY{n}{weightsCustom} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{l+m+mi}{14}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{20}\PY{p}{,}\PY{l+m+mi}{30}\PY{p}{,}\PY{l+m+mi}{11}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{10}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{100} \PY{c+c1}{\PYZsh{}pitch moment is zero bc incorrect eqn}
         
         \PY{k}{def} \PY{n+nf}{objectiveDetailedNonNormalized}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{weights}\PY{p}{)}\PY{p}{:}
             \PY{n}{score} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{n}{subscores} \PY{o}{=} \PY{p}{[}\PY{p}{]}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{subObjectives}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                 \PY{n}{obj} \PY{o}{=} \PY{n}{subObjectives}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{subscore} \PY{o}{=} \PY{n}{obj}\PY{p}{(}\PY{n}{p}\PY{p}{)}
                 \PY{n}{subscores}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{subscore}\PY{p}{)}
                 \PY{n}{score} \PY{o}{+}\PY{o}{=} \PY{n}{weights}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{*}\PY{n}{alwaysMinimize}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{*}\PY{n}{subscore}
             \PY{k}{return} \PY{n}{score}\PY{p}{,}\PY{n}{subscores}
         
         \PY{c+c1}{\PYZsh{} subscoreMean = np.zeros(len(subObjectives))}
         \PY{c+c1}{\PYZsh{} subscoreSd = np.ones(len(subObjectives))}
         
         \PY{k}{def} \PY{n+nf}{objective}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{weights}\PY{p}{)}\PY{p}{:}
             \PY{n}{score} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{subObjectives}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                 \PY{n}{obj} \PY{o}{=} \PY{n}{subObjectives}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{subscore}\PY{o}{=} \PY{n}{obj}\PY{p}{(}\PY{n}{p}\PY{p}{)}
                 \PY{n}{normalizedSubscore} \PY{o}{=} \PY{p}{(}\PY{n}{subscore} \PY{o}{\PYZhy{}} \PY{n}{subscoreMean}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)} \PY{o}{/} \PY{n}{subscoreSd}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{score} \PY{o}{+}\PY{o}{=} \PY{n}{weights}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{*}\PY{n}{alwaysMinimize}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{*}\PY{n}{normalizedSubscore}
             \PY{k}{return} \PY{n}{score}
         
         \PY{k}{def} \PY{n+nf}{objectiveDetailed}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{weights}\PY{p}{)}\PY{p}{:}
             \PY{n}{score} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{n}{subscores} \PY{o}{=} \PY{p}{[}\PY{p}{]}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{subObjectives}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                 \PY{n}{obj} \PY{o}{=} \PY{n}{subObjectives}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{subscore}\PY{o}{=} \PY{n}{obj}\PY{p}{(}\PY{n}{p}\PY{p}{)}
                 \PY{n}{normalizedSubscore} \PY{o}{=} \PY{p}{(}\PY{n}{subscore} \PY{o}{\PYZhy{}} \PY{n}{subscoreMean}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)} \PY{o}{/} \PY{n}{subscoreSd}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{subscores}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{normalizedSubscore}\PY{p}{)}
                 \PY{n}{score} \PY{o}{+}\PY{o}{=} \PY{n}{weights}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{*}\PY{n}{alwaysMinimize}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{*}\PY{n}{normalizedSubscore}
             \PY{k}{return} \PY{n}{score}\PY{p}{,} \PY{n}{subscores}
\end{Verbatim}


    \subsection{Constraints}\label{constraints}

    \subsection{constraints not done}\label{constraints-not-done}

I didnt actually do the constraint functions yet just bounds

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}32}]:} \PY{c+c1}{\PYZsh{}a list with all the min\PYZhy{}max functions (!) which can be called to return max and min value as f(p)}
         \PY{n}{minMaxParam} \PY{o}{=} \PY{p}{[}\PY{k+kc}{None} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{paramsDF}\PY{p}{)}\PY{p}{)}\PY{p}{]}
         \PY{k}{def} \PY{n+nf}{wrw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{l+m+mf}{0.300}
             \PY{n}{maxV} \PY{o}{=} \PY{n}{r\PYZus{}track} \PY{o}{\PYZhy{}} \PY{l+m+mi}{2} \PY{o}{*} \PY{n}{p}\PY{o}{.}\PY{n}{rrt}
             
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{wrw}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{wrw}
         
         \PY{c+c1}{\PYZsh{} def xrw(p):}
         \PY{c+c1}{\PYZsh{}     minV = p.lrw / 2}
         \PY{c+c1}{\PYZsh{}     maxV = .250 \PYZhy{} minV}
         \PY{c+c1}{\PYZsh{}     return minV, maxV}
         \PY{c+c1}{\PYZsh{} minMaxParam[paramsDF.loc[paramsDF.variable==\PYZdq{}xrw\PYZdq{}].index[0]] = xrw}
         
         \PY{k}{def} \PY{n+nf}{yrw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{5} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{hrw} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{n}{maxV} \PY{o}{=} \PY{l+m+mf}{1.2} \PY{o}{\PYZhy{}} \PY{n}{p}\PY{o}{.}\PY{n}{hrw} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{yrw}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{yrw}
         \PY{n}{wheelSpace} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{1} \PY{c+c1}{\PYZsh{}?? don\PYZsq{}t have an equation for this rn, min is .075}
         
         \PY{n}{aConst} \PY{o}{=} \PY{n}{wheelSpace}
         \PY{k}{def} \PY{n+nf}{lfw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{05} 
             \PY{n}{maxV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{7} \PY{o}{\PYZhy{}} \PY{n}{aConst}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{lfw}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{lfw}
         
         \PY{n}{f\PYZus{}track} \PY{o}{=} \PY{l+m+mi}{3} \PY{c+c1}{\PYZsh{} bounds: 3, 2.25 m }
         \PY{k}{def} \PY{n+nf}{wfw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{3}
             \PY{n}{maxV} \PY{o}{=} \PY{n}{f\PYZus{}track}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{wfw}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{wfw}
         
         \PY{c+c1}{\PYZsh{} def xfw(p):}
         \PY{c+c1}{\PYZsh{}     minV = p.lrw + p.rrt + p.lc + p.lia + p.lfw/2}
         \PY{c+c1}{\PYZsh{}     maxV = .25 + p.rrt + p.lc + p.lia + p.lfw/2}
         \PY{c+c1}{\PYZsh{}     return minV, maxV}
         \PY{c+c1}{\PYZsh{} minMaxParam[paramsDF.loc[paramsDF.variable==\PYZdq{}xfw\PYZdq{}].index[0]] = xfw}
         
         \PY{n}{xConst} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{030} \PY{c+c1}{\PYZsh{}ground clearance 19 to 50 mm}
         \PY{k}{def} \PY{n+nf}{yfw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{n}{xConst} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{hfw} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{n}{maxV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{25} \PY{o}{\PYZhy{}} \PY{n}{p}\PY{o}{.}\PY{n}{hfw}\PY{o}{/}\PY{l+m+mi}{2}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{yfw}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{yfw}
         
         \PY{c+c1}{\PYZsh{} def xsw(p):}
         \PY{c+c1}{\PYZsh{}     minV = p.lrw + 2*p.rrt + aConst + p.lsw / 2}
         \PY{c+c1}{\PYZsh{}     maxV = .250 + 2*p.rrt + aConst + p.lsw / 2}
         \PY{c+c1}{\PYZsh{}     return minV, maxV}
         \PY{c+c1}{\PYZsh{} minMaxParam[paramsDF.loc[paramsDF.variable==\PYZdq{}xsw\PYZdq{}].index[0]] = xsw}
         
         \PY{k}{def} \PY{n+nf}{ysw}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{n}{xConst} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{hsw}\PY{o}{/}\PY{l+m+mi}{2}
             \PY{n}{maxV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{250} \PY{o}{\PYZhy{}} \PY{n}{p}\PY{o}{.}\PY{n}{hsw}\PY{o}{/}\PY{l+m+mi}{2}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ysw}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{ysw}
         
         \PY{c+c1}{\PYZsh{} def xrt(p):}
         \PY{c+c1}{\PYZsh{}     minV = p.lrw + p.rrt}
         \PY{c+c1}{\PYZsh{}     maxV = .250 + p.rrt }
         \PY{c+c1}{\PYZsh{}     return minV, maxV}
         \PY{c+c1}{\PYZsh{} minMaxParam[paramsDF.loc[paramsDF.variable==\PYZdq{}xrt\PYZdq{}].index[0]] = xrt}
         
         \PY{c+c1}{\PYZsh{} def xft(p):}
         \PY{c+c1}{\PYZsh{}     minV = p.lrw + p.rrt + p.lc}
         \PY{c+c1}{\PYZsh{}     maxV = .250 + p.rrt  + p.lc}
         \PY{c+c1}{\PYZsh{}     return minV, maxV}
         \PY{c+c1}{\PYZsh{} minMaxParam[paramsDF.loc[paramsDF.variable==\PYZdq{}xft\PYZdq{}].index[0]] = xft}
         
         \PY{c+c1}{\PYZsh{} def xe(p):}
         \PY{c+c1}{\PYZsh{}     minV = p.lrw + p.rrt \PYZhy{} p.le / 2}
         \PY{c+c1}{\PYZsh{}     maxV = p.lrw + aConst + p.rrt \PYZhy{} p.le / 2}
         \PY{c+c1}{\PYZsh{}     return minV, maxV}
         \PY{c+c1}{\PYZsh{} minMaxParam[paramsDF.loc[paramsDF.variable==\PYZdq{}xe\PYZdq{}].index[0]] = xe}
         
         \PY{k}{def} \PY{n+nf}{ye}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{n}{xConst} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{he} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{n}{maxV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{5} \PY{o}{\PYZhy{}} \PY{n}{p}\PY{o}{.}\PY{n}{he} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ye}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{ye}
         
         \PY{k}{def} \PY{n+nf}{hc}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{500}
             \PY{n}{maxV} \PY{o}{=} \PY{l+m+mf}{1.200} \PY{o}{\PYZhy{}} \PY{n}{xConst}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{hc}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{hc}
         
         \PY{c+c1}{\PYZsh{} def xc(p):}
         \PY{c+c1}{\PYZsh{}     minV = p.lrw + p.rrt + p.lc / 2}
         \PY{c+c1}{\PYZsh{}     maxV = .250 + p.rrt + p.lc / 2}
         \PY{c+c1}{\PYZsh{}     return minV, maxV}
         \PY{c+c1}{\PYZsh{} minMaxParam[paramsDF.loc[paramsDF.variable==\PYZdq{}xc\PYZdq{}].index[0]] = xc}
         
         \PY{k}{def} \PY{n+nf}{yc}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{n}{xConst} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{hc} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{n}{maxV} \PY{o}{=} \PY{l+m+mf}{1.200} \PY{o}{\PYZhy{}} \PY{n}{p}\PY{o}{.}\PY{n}{hc} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{yc}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{yc}
         
         \PY{k}{def} \PY{n+nf}{lia}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{2}
             \PY{n}{maxV} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{7}  \PY{o}{\PYZhy{}} \PY{n}{p}\PY{o}{.}\PY{n}{lfw} \PY{c+c1}{\PYZsh{} what is l\PYZus{}fr?}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{lia}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{lia}
         
         \PY{c+c1}{\PYZsh{} def xia(p):}
         \PY{c+c1}{\PYZsh{}     minV = p.lrw + p.rrt + p.lc + p.lia / 2}
         \PY{c+c1}{\PYZsh{}     maxV = .250 + p.rrt + p.lc + p.lia/ 2}
         \PY{c+c1}{\PYZsh{}     return minV, maxV}
         \PY{c+c1}{\PYZsh{} minMaxParam[paramsDF.loc[paramsDF.variable==\PYZdq{}xia\PYZdq{}].index[0]] = xia}
         
         \PY{k}{def} \PY{n+nf}{yia}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{n}{xConst} \PY{o}{+} \PY{n}{p}\PY{o}{.}\PY{n}{hia} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{n}{maxV} \PY{o}{=} \PY{l+m+mf}{1.200} \PY{o}{\PYZhy{}} \PY{n}{p}\PY{o}{.}\PY{n}{hia} \PY{o}{/} \PY{l+m+mi}{2}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{yia}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{yia}
         
         \PY{k}{def} \PY{n+nf}{yrsp}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{n}{p}\PY{o}{.}\PY{n}{rrt}
             \PY{n}{maxV} \PY{o}{=} \PY{n}{p}\PY{o}{.}\PY{n}{rrt} \PY{o}{*} \PY{l+m+mi}{2}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{yrsp}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{yrsp}
         
         \PY{k}{def} \PY{n+nf}{yfsp}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{:}
             \PY{n}{minV} \PY{o}{=} \PY{n}{p}\PY{o}{.}\PY{n}{rft}
             \PY{n}{maxV} \PY{o}{=} \PY{n}{p}\PY{o}{.}\PY{n}{rft} \PY{o}{*} \PY{l+m+mi}{2}
             \PY{k}{return} \PY{n}{minV}\PY{p}{,} \PY{n}{maxV}
         \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{variable}\PY{o}{==}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{yfsp}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{n}{yfsp}
         
         \PY{c+c1}{\PYZsh{}test:}
         \PY{c+c1}{\PYZsh{} for f in minMaxParam:}
         \PY{c+c1}{\PYZsh{}     if f is not None:}
         \PY{c+c1}{\PYZsh{}         print(f(p))}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}33}]:} \PY{k}{def} \PY{n+nf}{getAttr}\PY{p}{(}\PY{n}{obj}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{p}{[}\PY{n}{a} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb}{dir}\PY{p}{(}\PY{n}{obj}\PY{p}{)} \PY{k}{if} \PY{o+ow}{not} \PY{n}{a}\PY{o}{.}\PY{n}{startswith}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}34}]:} \PY{k}{def} \PY{n+nf}{findMaterialByDensity}\PY{p}{(}\PY{n}{rho}\PY{p}{)}\PY{p}{:}
             \PY{n}{differences} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{materialsDF}\PY{o}{.}\PY{n}{q}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{rho}\PY{p}{)}
             \PY{n}{material} \PY{o}{=} \PY{n}{materialsDF}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argmin}\PY{p}{(}\PY{n}{differences}\PY{p}{)}\PY{p}{]}
             \PY{k}{return} \PY{n}{material}\PY{o}{.}\PY{n}{Code}\PY{p}{,} \PY{n}{material}\PY{o}{.}\PY{n}{q}\PY{p}{,} \PY{n}{material}\PY{o}{.}\PY{n}{E}
         \PY{k}{def} \PY{n+nf}{findTireByRadius}\PY{p}{(}\PY{n}{radius}\PY{p}{)}\PY{p}{:}
             \PY{n}{differences} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{tiresDF}\PY{o}{.}\PY{n}{radius}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{radius}\PY{p}{)}
             \PY{n}{tire} \PY{o}{=} \PY{n}{tiresDF}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argmin}\PY{p}{(}\PY{n}{differences}\PY{p}{)}\PY{p}{]}
             \PY{k}{return} \PY{n}{tire}\PY{o}{.}\PY{n}{ID}\PY{p}{,} \PY{n}{tire}\PY{o}{.}\PY{n}{radius}\PY{p}{,} \PY{n}{tire}\PY{o}{.}\PY{n}{mass}
         
         \PY{k}{def} \PY{n+nf}{findEngineByPower}\PY{p}{(}\PY{n}{power}\PY{p}{)}\PY{p}{:}
             \PY{n}{differences} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{enginesDF}\PY{o}{.}\PY{n}{Phi\PYZus{}e}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{power}\PY{p}{)}
             \PY{n}{engine} \PY{o}{=} \PY{n}{enginesDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argmin}\PY{p}{(}\PY{n}{differences}\PY{p}{)}\PY{p}{]}
             \PY{k}{return} \PY{n}{engine}
         
         \PY{k}{def} \PY{n+nf}{findSuspensionByK}\PY{p}{(}\PY{n}{k}\PY{p}{)}\PY{p}{:}
             \PY{n}{differences} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{susDF}\PY{o}{.}\PY{n}{krsp}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{k}\PY{p}{)}
             \PY{n}{sus} \PY{o}{=} \PY{n}{susDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argmin}\PY{p}{(}\PY{n}{differences}\PY{p}{)}\PY{p}{]}
             \PY{k}{return} \PY{n}{sus}
         
         \PY{k}{def} \PY{n+nf}{findBrakesByR}\PY{p}{(}\PY{n}{r}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}what is the driving variable for brakes??? r?}
             \PY{n}{differences} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{brakesDF}\PY{o}{.}\PY{n}{rbrk}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{r}\PY{p}{)}
             \PY{n}{brakes} \PY{o}{=} \PY{n}{brakesDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argmin}\PY{p}{(}\PY{n}{differences}\PY{p}{)}\PY{p}{]}
         
             \PY{k}{return} \PY{n}{brakes}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}35}]:} \PY{k}{def} \PY{n+nf}{constrain}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{dimsToConstrain}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{ones}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{paramsDF}\PY{p}{)}\PY{p}{)}\PY{p}{)}\PY{p}{:}
         \PY{c+c1}{\PYZsh{}     p\PYZus{}attribute = getAttr(p)}
             \PY{n}{paramIndices} \PY{o}{=} \PY{p}{[}\PY{n}{i} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{dimsToConstrain}\PY{p}{)}\PY{p}{)} \PY{k}{if} \PY{n}{dimsToConstrain}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{==}\PY{l+m+mi}{1}\PY{p}{]}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{paramIndices}\PY{p}{:} \PY{c+c1}{\PYZsh{}range(len(paramsDF)): \PYZsh{} we need to do the equations bounds last}
         \PY{c+c1}{\PYZsh{}         if not dimsToConstrain[i]: \PYZsh{}we don\PYZsq{}t need to check this dimension, it didn\PYZsq{}t change}
         \PY{c+c1}{\PYZsh{}             continue}
                 \PY{n}{param} \PY{o}{=} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{variable} \PY{o}{=} \PY{n}{param}\PY{o}{.}\PY{n}{variable}
                 \PY{n}{value} \PY{o}{=} \PY{n+nb}{getattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{variable}\PY{p}{)}
                 \PY{k}{if} \PY{n}{param}\PY{o}{.}\PY{n}{kind} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{:} \PY{c+c1}{\PYZsh{}continuous param with min and max}
                     \PY{k}{if} \PY{n}{hasNumericBounds}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{:}
                         \PY{n}{newValue} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{n}{value}\PY{p}{,}\PY{n+nb}{float}\PY{p}{(}\PY{n}{param}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{minV}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}\PY{p}{,}\PY{n+nb}{float}\PY{p}{(}\PY{n}{param}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{maxV}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}
                         \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{variable}\PY{p}{,}\PY{n}{newValue}\PY{p}{)}
                     \PY{c+c1}{\PYZsh{}do the equation ones after setting all other parameters}
                         
                 \PY{k}{elif} \PY{n}{param}\PY{o}{.}\PY{n}{kind} \PY{o}{==} \PY{l+m+mi}{2}\PY{p}{:} \PY{c+c1}{\PYZsh{}choose a material based on density}
                     \PY{n}{materialID}\PY{p}{,}\PY{n}{density}\PY{p}{,}\PY{n}{modulusE} \PY{o}{=} \PY{n}{findMaterialByDensity}\PY{p}{(}\PY{n}{value}\PY{p}{)}
                     \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{variable}\PY{p}{,}\PY{n}{density}\PY{p}{)}
                     \PY{c+c1}{\PYZsh{}find other variables that are driven by this one:}
                     \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{otherParam} \PY{o+ow}{in} \PY{n}{paramsDF}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{variable}\PY{p}{]}\PY{o}{.}\PY{n}{iterrows}\PY{p}{(}\PY{p}{)}\PY{p}{:}\PY{c+c1}{\PYZsh{}dimension is driven by this one}
                         \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{otherParam}\PY{o}{.}\PY{n}{variable}\PY{p}{,}\PY{n}{modulusE}\PY{p}{)}    
                 \PY{k}{elif} \PY{n}{param}\PY{o}{.}\PY{n}{kind} \PY{o}{==} \PY{l+m+mi}{3}\PY{p}{:} \PY{c+c1}{\PYZsh{}choose tires}
                     \PY{n}{tireID}\PY{p}{,}\PY{n}{radius}\PY{p}{,}\PY{n}{weight} \PY{o}{=} \PY{n}{findTireByRadius}\PY{p}{(}\PY{n}{value}\PY{p}{)}
                     \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{variable}\PY{p}{,}\PY{n}{radius}\PY{p}{)}
                     \PY{c+c1}{\PYZsh{}find other variables that are driven by this one:}
                     \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{otherParam} \PY{o+ow}{in} \PY{n}{paramsDF}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{variable}\PY{p}{]}\PY{o}{.}\PY{n}{iterrows}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                         \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{otherParam}\PY{o}{.}\PY{n}{variable}\PY{p}{,}\PY{n}{weight}\PY{p}{)}
                 \PY{k}{elif} \PY{n}{param}\PY{o}{.}\PY{n}{kind} \PY{o}{==} \PY{l+m+mi}{4}\PY{p}{:} \PY{c+c1}{\PYZsh{}choose motor}
                     \PY{n}{tableRow}\PY{o}{=} \PY{n}{findEngineByPower}\PY{p}{(}\PY{n}{value}\PY{p}{)} \PY{c+c1}{\PYZsh{}Phi\PYZus{}e,l\PYZus{}e,w\PYZus{}e,h\PYZus{}e,T\PYZus{}e,m\PYZus{}e}
                     \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{variable}\PY{p}{,}\PY{n}{tableRow}\PY{p}{[}\PY{n}{variable}\PY{p}{]}\PY{p}{)}
                     \PY{c+c1}{\PYZsh{}find other variables that are driven by this one:}
                     \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{otherParam} \PY{o+ow}{in} \PY{n}{paramsDF}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{variable}\PY{p}{]}\PY{o}{.}\PY{n}{iterrows}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                         \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{otherParam}\PY{o}{.}\PY{n}{variable}\PY{p}{,}\PY{n}{tableRow}\PY{p}{[}\PY{n}{otherParam}\PY{o}{.}\PY{n}{variable}\PY{p}{]}\PY{p}{)}
                 \PY{k}{elif} \PY{n}{param}\PY{o}{.}\PY{n}{kind} \PY{o}{==} \PY{l+m+mi}{5}\PY{p}{:} \PY{c+c1}{\PYZsh{}choose brakes}
                     \PY{n}{tableRow} \PY{o}{=} \PY{n}{findBrakesByR}\PY{p}{(}\PY{n}{value}\PY{p}{)} \PY{c+c1}{\PYZsh{} r is driving variable}
         
                     \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{variable}\PY{p}{,}\PY{n}{tableRow}\PY{p}{[}\PY{n}{variable}\PY{p}{]}\PY{p}{)} \PY{c+c1}{\PYZsh{}df columns need to be same as variable names}
                     \PY{c+c1}{\PYZsh{}find other variables that are driven by this one:}
                     \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{otherParam} \PY{o+ow}{in} \PY{n}{paramsDF}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{variable}\PY{p}{]}\PY{o}{.}\PY{n}{iterrows}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                     \PY{c+c1}{\PYZsh{}their \PYZdq{}team\PYZdq{} is THIS VAR: dimension is driven by this}
                         \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{otherParam}\PY{o}{.}\PY{n}{variable}\PY{p}{,}\PY{n}{tableRow}\PY{p}{[}\PY{n}{otherParam}\PY{o}{.}\PY{n}{variable}\PY{p}{]}\PY{p}{)}
         
                 \PY{k}{elif} \PY{n}{param}\PY{o}{.}\PY{n}{kind} \PY{o}{==} \PY{l+m+mi}{6}\PY{p}{:} \PY{c+c1}{\PYZsh{}choose suspension}
                     \PY{n}{tableRow} \PY{o}{=} \PY{n}{findSuspensionByK}\PY{p}{(}\PY{n}{value}\PY{p}{)} \PY{c+c1}{\PYZsh{}kfsp, cfsp, mfsp}
                     \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{variable}\PY{p}{,}\PY{n}{tableRow}\PY{p}{[}\PY{n}{variable}\PY{p}{]}\PY{p}{)}
                     \PY{c+c1}{\PYZsh{}find other variables that are driven by this one:}
                     \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{otherParam} \PY{o+ow}{in} \PY{n}{paramsDF}\PY{p}{[}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{variable}\PY{p}{]}\PY{o}{.}\PY{n}{iterrows}\PY{p}{(}\PY{p}{)}\PY{p}{:}\PY{c+c1}{\PYZsh{}their \PYZdq{}team\PYZdq{} is THIS VAR: dimension is driven by this}
                         \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{otherParam}\PY{o}{.}\PY{n}{variable}\PY{p}{,}\PY{n}{tableRow}\PY{p}{[}\PY{n}{otherParam}\PY{o}{.}\PY{n}{variable}\PY{p}{]}\PY{p}{)}
             
             \PY{c+c1}{\PYZsh{}now we can do the ones that depend on other variables}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{paramIndices}\PY{p}{:} 
                 \PY{n}{param} \PY{o}{=} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{variable} \PY{o}{=} \PY{n}{param}\PY{o}{.}\PY{n}{variable}
                 \PY{n}{value} \PY{o}{=} \PY{n+nb}{getattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{variable}\PY{p}{)}
                 \PY{k}{if} \PY{n}{param}\PY{o}{.}\PY{n}{kind} \PY{o}{==} \PY{l+m+mi}{1} \PY{o+ow}{and} \PY{o+ow}{not} \PY{n}{hasNumericBounds}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{:}
                     \PY{n}{f} \PY{o}{=} \PY{n}{minMaxParam}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{c+c1}{\PYZsh{}list of minMax functions for each variable}
                     \PY{n}{minV}\PY{p}{,} \PY{n}{maxV} \PY{o}{=} \PY{n}{f}\PY{p}{(}\PY{n}{p}\PY{p}{)} 
                     \PY{n}{newValue} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{n}{value}\PY{p}{,}\PY{n}{minV}\PY{p}{,}\PY{n}{maxV}\PY{p}{)}
                     \PY{n+nb}{setattr}\PY{p}{(}\PY{n}{p}\PY{p}{,}\PY{n}{variable}\PY{p}{,}\PY{n}{newValue}\PY{p}{)}
             \PY{k}{return} \PY{n}{p}
\end{Verbatim}


    \subsection{create the scaling vector}\label{create-the-scaling-vector}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}36}]:} \PY{n}{pVmax} \PY{o}{=} \PY{n}{asParameters}\PY{p}{(}\PY{p}{[}\PY{l+m+mf}{1e30} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{paramsDF}\PY{p}{)}\PY{p}{)}\PY{p}{]}\PY{p}{)}
         \PY{n}{maxVals} \PY{o}{=} \PY{n}{pVmax}
         \PY{n}{maxVals} \PY{o}{=} \PY{n}{constrain}\PY{p}{(}\PY{n}{pVmax}\PY{p}{)}
         \PY{n}{scalingVector} \PY{o}{=} \PY{n}{asVector}\PY{p}{(}\PY{n}{maxVals}\PY{p}{)} \PY{c+c1}{\PYZsh{}this acts as a scaling vector to map SI unit values to \PYZti{}unit cube}
         \PY{c+c1}{\PYZsh{} paramsDF.iloc[11]}
\end{Verbatim}


    \subsection{create realistic starting
values}\label{create-realistic-starting-values}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}37}]:} \PY{k}{def} \PY{n+nf}{startParams}\PY{p}{(}\PY{n}{returnParamObject}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{:}
             \PY{n}{nParams} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{paramsDF}\PY{p}{)}
             \PY{n}{pV} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{nParams}\PY{p}{)} \PY{o}{*} \PY{n}{scalingVector}
             \PY{n}{p} \PY{o}{=} \PY{n}{constrain}\PY{p}{(}\PY{n}{asParameters}\PY{p}{(}\PY{n}{pV}\PY{p}{)}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}     print(asVector(p))}
             \PY{k}{return} \PY{n}{p} \PY{k}{if} \PY{n}{returnParamObject} \PY{k}{else} \PY{n}{asVector}\PY{p}{(}\PY{n}{p}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} objective(p,weightsCustom)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} \PY{c+c1}{\PYZsh{} p = startParams()}
         \PY{c+c1}{\PYZsh{} constrained = asVector(p)}
         \PY{c+c1}{\PYZsh{} \PYZsh{} constrained/ scalingVector}
         \PY{c+c1}{\PYZsh{} for i, row in paramsDF.iterrows():}
         \PY{c+c1}{\PYZsh{}     print(row[1] + \PYZdq{} : \PYZbs{}t\PYZdq{}+str(constrained[i]))}
\end{Verbatim}


    \subsubsection{run random possible start values through objectives to
get distribution of
outputs}\label{run-random-possible-start-values-through-objectives-to-get-distribution-of-outputs}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}39}]:} \PY{c+c1}{\PYZsh{} subscores = []}
         \PY{c+c1}{\PYZsh{} for i in range(2000):}
         \PY{c+c1}{\PYZsh{}     p = startParams()}
         \PY{c+c1}{\PYZsh{}     \PYZus{},ss = objectiveDetailedNonNormalized(p,weightsNull)}
         \PY{c+c1}{\PYZsh{}     subscores.append(ss)}
         \PY{c+c1}{\PYZsh{} s = np.array(subscores)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}40}]:} \PY{c+c1}{\PYZsh{} x = s[:,7]}
         \PY{c+c1}{\PYZsh{} s[:,7 ] = [3000 if isNaN(x[i]) else x[i] for i in range(len(x)) ]}
\end{Verbatim}


    \subsubsection{capture the mean and standard deviations of
subscores}\label{capture-the-mean-and-standard-deviations-of-subscores}

so that we can normalize them assuming Normal dist. Now, the objective
function will fairly weight sub-objectives using custom weights

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}41}]:} \PY{c+c1}{\PYZsh{} \PYZsh{}FIRST TIME, need to run this if we don\PYZsq{}t have the file with saved values}
         \PY{c+c1}{\PYZsh{} subscoreMean = []}
         \PY{c+c1}{\PYZsh{} subscoreSd = []}
         \PY{c+c1}{\PYZsh{} for i in range(len(subscores[0])):}
         \PY{c+c1}{\PYZsh{}     subscoreMean.append(np.mean(s[:,i]))}
         \PY{c+c1}{\PYZsh{}     subscoreSd.append(np.std(s[:,i]))}
         
         \PY{c+c1}{\PYZsh{} subscoreStatsDF = pd.DataFrame(columns=[\PYZdq{}subscoreMean\PYZdq{},\PYZdq{}subscoreSD\PYZdq{}],data=np.transpose([subscoreMean,subscoreSd]))}
         \PY{c+c1}{\PYZsh{} subscoreStatsDF.to\PYZus{}csv(\PYZdq{}./SAE/subscoreStatsDF.csv\PYZdq{})}
         
         \PY{c+c1}{\PYZsh{} \PYZsh{}     plt.hist((np.array(s[:,i]) \PYZhy{} subscoreMean[i])/subscoreSd[i])}
         \PY{c+c1}{\PYZsh{} \PYZsh{}     plt.show()}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}42}]:} \PY{n}{subscoreStatsDF} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./SAE/subscoreStatsDF.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{subscoreMean} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{subscoreStatsDF}\PY{o}{.}\PY{n}{subscoreMean}\PY{p}{)}
         \PY{n}{subscoreSd} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{subscoreStatsDF}\PY{o}{.}\PY{n}{subscoreSD}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}46}]:} \PY{n}{objective}\PY{p}{(}\PY{n}{startParams}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{weightsCustom}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}46}]:} -1.2512569551431818
\end{Verbatim}
            
    \section{Create Virtual Population with represntative KAI
scores}\label{create-virtual-population-with-represntative-kai-scores}

based on KAI score and subscore dataset provided by Dr. J

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}77}]:} \PY{n}{kaiDF\PYZus{}DATASET} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./KAI/KAI\PYZus{}DATA\PYZus{}2018\PYZus{}07\PYZus{}09.csv}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{KAI}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{SO}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{E}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{RG}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
         \PY{k}{def} \PY{n+nf}{makeKAI}\PY{p}{(}\PY{n}{n}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{asDF}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{:}
             \PY{n}{pop} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{multivariate\PYZus{}normal}\PY{p}{(}\PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{cov}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{n}\PY{p}{)}
             \PY{k}{if} \PY{n}{asDF}\PY{p}{:}
                 \PY{n}{popDF} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{pop}\PY{p}{)} 
                 \PY{n}{popDF}\PY{o}{.}\PY{n}{columns} \PY{o}{=} \PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{columns}
                 \PY{k}{return} \PY{n}{popDF} \PY{k}{if} \PY{n}{n}\PY{o}{\PYZgt{}}\PY{l+m+mi}{1} \PY{k}{else} \PY{n}{popDF}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
             \PY{k}{else}\PY{p}{:}
                 \PY{k}{return} \PY{n}{pop} \PY{k}{if} \PY{n}{n}\PY{o}{\PYZgt{}}\PY{l+m+mi}{1} \PY{k}{else} \PY{n}{pop}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
             
         \PY{c+c1}{\PYZsh{} def makeSubscores(kai,n=1,asDF=True):}
         \PY{c+c1}{\PYZsh{}     pop = np.random.multivariate\PYZus{}normal(kaiDF\PYZus{}DATASET.mean(),kaiDF\PYZus{}DATASET.cov(),n)}
         \PY{n}{kaiPopulation} \PY{o}{=} \PY{n}{makeKAI}\PY{p}{(}\PY{l+m+mi}{100000}\PY{p}{)}
         \PY{n}{kaiPopulation}\PY{o}{=}\PY{n}{kaiPopulation}\PY{o}{.}\PY{n}{round}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}78}]:} \PY{k}{def} \PY{n+nf}{findAiScore}\PY{p}{(}\PY{n}{kai}\PY{p}{)}\PY{p}{:}
             \PY{n}{kai} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{n}{kai}\PY{p}{)}
             \PY{n}{a} \PY{o}{=} \PY{n}{kaiPopulation}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{kaiPopulation}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{KAI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{n}{kai}\PY{p}{]}
             \PY{n}{ind} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{choice}\PY{p}{(}\PY{n}{a}\PY{o}{.}\PY{n}{index}\PY{p}{)}
             \PY{n}{me} \PY{o}{=} \PY{n}{kaiPopulation}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{ind}\PY{p}{]}
             \PY{k}{return} \PY{n}{KAIScore}\PY{p}{(}\PY{n}{me}\PY{p}{)} \PY{c+c1}{\PYZsh{}this is a KAIScore object}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}79}]:} \PY{k}{def} \PY{n+nf}{normalizedAI}\PY{p}{(}\PY{n}{ai}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{p}{(}\PY{n}{ai} \PY{o}{\PYZhy{}} \PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{KAI}\PY{p}{)}\PY{o}{/}\PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{KAI}
         \PY{k}{def} \PY{n+nf}{normalizedRG}\PY{p}{(}\PY{n}{rg}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{p}{(}\PY{n}{rg} \PY{o}{\PYZhy{}} \PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{RG}\PY{p}{)}\PY{o}{/}\PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{RG}
         \PY{k}{def} \PY{n+nf}{normalizedE}\PY{p}{(}\PY{n}{E}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{p}{(}\PY{n}{E} \PY{o}{\PYZhy{}} \PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{E}\PY{p}{)}\PY{o}{/}\PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{E}
         \PY{k}{def} \PY{n+nf}{normalizedSO}\PY{p}{(}\PY{n}{SO}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{p}{(}\PY{n}{SO} \PY{o}{\PYZhy{}} \PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{SO}\PY{p}{)}\PY{o}{/}\PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{SO}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}80}]:} \PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{E}
         \PY{n}{kaiDF\PYZus{}DATASET}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{E}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}80}]:} 5.251845955448993
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}81}]:} \PY{k}{def} \PY{n+nf}{dotNorm}\PY{p}{(}\PY{n}{a}\PY{p}{,}\PY{n}{b}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}return normalized dot product (how parallel 2 vectors are, \PYZhy{}1 to 1)}
             \PY{k}{if} \PY{n}{norm}\PY{p}{(}\PY{n}{a}\PY{p}{)} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{l+m+mi}{0} \PY{o+ow}{or} \PY{n}{norm}\PY{p}{(}\PY{n}{b}\PY{p}{)}\PY{o}{\PYZlt{}}\PY{o}{=} \PY{l+m+mi}{0}\PY{p}{:}
         \PY{c+c1}{\PYZsh{}         print(\PYZdq{}uh oh, vector was length zero\PYZdq{})}
                 \PY{k}{return} \PY{l+m+mi}{0}
             \PY{n}{a} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{a}\PY{p}{)}
             \PY{n}{b} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{b}\PY{p}{)}
             \PY{n}{dotAB} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{a}\PY{o}{*}\PY{n}{b}\PY{p}{)}
             \PY{n}{normDotAB} \PY{o}{=} \PY{n}{dotAB} \PY{o}{/} \PY{p}{(}\PY{n}{norm}\PY{p}{(}\PY{n}{a}\PY{p}{)}\PY{o}{*}\PY{n}{norm}\PY{p}{(}\PY{n}{b}\PY{p}{)}\PY{p}{)}
             \PY{k}{return} \PY{n}{normDotAB}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}82}]:} \PY{k}{def} \PY{n+nf}{plotCategoricalMeans}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{)}\PY{p}{:}
             \PY{n}{categories} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{x}\PY{p}{)}
             \PY{n}{means} \PY{o}{=} \PY{p}{[}\PY{p}{]}
             \PY{n}{sds} \PY{o}{=} \PY{p}{[}\PY{p}{]}
             \PY{k}{for} \PY{n}{c} \PY{o+ow}{in} \PY{n}{categories}\PY{p}{:}
                 \PY{n}{yc} \PY{o}{=} \PY{p}{[}\PY{n}{y}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{y}\PY{p}{)}\PY{p}{)} \PY{k}{if} \PY{n}{x}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{==} \PY{n}{c}\PY{p}{]}
                 \PY{n}{means}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{yc}\PY{p}{)}\PY{p}{)}
                 \PY{n}{sds}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{yc}\PY{p}{)}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{errorbar}\PY{p}{(}\PY{n}{categories}\PY{p}{,}\PY{n}{means}\PY{p}{,}\PY{n}{yerr}\PY{o}{=}\PY{n}{sds}\PY{p}{,}\PY{n}{marker}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{o}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{ls}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{none}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             
             \PY{k}{return} \PY{n}{means}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}83}]:} \PY{c+c1}{\PYZsh{}speed distributions:}
         \PY{n}{dfConstant}\PY{o}{=}\PY{l+m+mf}{1.9}
         \PY{k}{def} \PY{n+nf}{travelDistance}\PY{p}{(}\PY{n}{speed}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}how far do we go? chi distribution, but at least go 0.1 * speed}
             \PY{n}{r} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{p}{[}\PY{n}{chi}\PY{o}{.}\PY{n}{rvs}\PY{p}{(}\PY{n}{dfConstant}\PY{p}{)}\PY{p}{,}\PY{l+m+mf}{0.1}\PY{p}{]}\PY{p}{)} 
             \PY{k}{return} \PY{n}{r} \PY{o}{*} \PY{n}{speed}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}84}]:} \PY{k}{def} \PY{n+nf}{memoryWeightsPrimacy}\PY{p}{(}\PY{n}{n}\PY{p}{)}\PY{p}{:}
             \PY{k}{if} \PY{n}{n}\PY{o}{==}\PY{l+m+mi}{1}\PY{p}{:}
                 \PY{k}{return} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
             \PY{n}{weights} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n}{n}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{3}\PY{o}{*}\PY{l+m+mf}{0.4} \PY{o}{+} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{n}{n}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{3}
             \PY{n}{weights} \PY{o}{=} \PY{n}{weights} \PY{o}{/} \PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{n}{weights}\PY{p}{)}
             \PY{k}{return} \PY{n}{weights}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}85}]:} \PY{k}{def} \PY{n+nf}{aiColor}\PY{p}{(}\PY{n}{ai}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}red for innovators, blue for adaptors}
             \PY{n}{ai01} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{p}{(}\PY{n}{ai} \PY{o}{\PYZhy{}} \PY{l+m+mi}{40}\PY{p}{)}\PY{o}{/} \PY{l+m+mi}{120}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
             \PY{n}{red} \PY{o}{=} \PY{n}{ai01}
             \PY{n}{blue} \PY{o}{=} \PY{l+m+mi}{1} \PY{o}{\PYZhy{}} \PY{n}{ai01}
             \PY{k}{return} \PY{p}{(}\PY{n}{red}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{,}\PY{n}{blue}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}86}]:} \PY{k}{def} \PY{n+nf}{makeParamString}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{n}{s}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{steps: }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{steps}\PY{p}{)} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{self\PYZhy{}bias: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{selfBias}\PY{p}{)}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{num agents: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{nAgents}\PY{p}{)}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{rg strength: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{RG\PYZus{}STRENGTH}\PY{p}{)}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{so strength: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{SO\PYZus{}STRENGTH}\PY{p}{)}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{repeats: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{reps}\PY{p}{)}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{avg speed: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{AVG\PYZus{}SPEED}\PY{p}{)} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{sd speed: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{SD\PYZus{}SPEED}\PY{p}{)}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{min speed: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{MIN\PYZus{}SPEED}\PY{p}{)}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{avg temp: }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{AVG\PYZus{}TEMP}\PY{p}{)}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{n}{s}\PY{o}{+}\PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{sd temp: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{SD\PYZus{}TEMP}\PY{p}{)}\PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ }\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
             \PY{k}{return} \PY{n}{s}
\end{Verbatim}


    \subsection{Agent and Team Classes}\label{agent-and-team-classes}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}87}]:} \PY{k}{class} \PY{n+nc}{Agent}\PY{p}{:}
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n+nb}{id}\PY{o}{=}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{id} \PY{o}{=} \PY{n+nb}{id}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{inf}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{params} \PY{o}{=} \PY{n}{startParams}\PY{p}{(}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r} \PY{o}{=} \PY{n}{asVector}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{params}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rNorm} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r} \PY{o}{/} \PY{n}{scalingVector}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{nmoves} \PY{o}{=} \PY{l+m+mi}{0}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{kai} \PY{o}{=} \PY{n}{KAIScore}\PY{p}{(}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{speed} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{n}{AVG\PYZus{}SPEED} \PY{o}{+} \PY{n}{normalizedAI}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI}\PY{p}{)} \PY{o}{*} \PY{n}{SD\PYZus{}SPEED}\PY{p}{,} \PY{n}{MIN\PYZus{}SPEED} \PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{inf}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{temp} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{n}{AVG\PYZus{}TEMP} \PY{o}{+} \PY{n}{normalizedE}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{E}\PY{p}{)} \PY{o}{*} \PY{n}{SD\PYZus{}TEMP}\PY{p}{,} \PY{l+m+mi}{0} \PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{inf}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{iq} \PY{o}{=} \PY{l+m+mi}{1} \PY{c+c1}{\PYZsh{}makeIqScore()}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{memory} \PY{o}{=} \PY{p}{[}\PY{n}{Solution}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r}\PY{p}{,}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score}\PY{p}{,}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{id}\PY{p}{,}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)}\PY{p}{]}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{team} \PY{o}{=} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{decay} \PY{o}{=} \PY{n}{calculateAgentDecay}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{startTemp} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{temp}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{startSpeed} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{speed}
                 
             \PY{k}{def} \PY{n+nf}{move}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{soBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{groupConformityBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{teamPosition}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
                 \PY{k}{if} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{p}{)}\PY{o}{\PYZgt{}}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{iq}\PY{p}{:} \PY{c+c1}{\PYZsh{}I\PYZsq{}m just thinking this turn}
                     \PY{k}{return} \PY{k+kc}{False} 
                 
         \PY{c+c1}{\PYZsh{}         print(\PYZdq{}my dimensions:\PYZdq{} +str(self.myDims))}
                 \PY{c+c1}{\PYZsh{}pick a new direction}
                 \PY{n}{d} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{n}{nDims}\PY{p}{)}
                 \PY{n}{d} \PY{o}{=} \PY{n}{d} \PY{o}{*} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{myDims} \PY{c+c1}{\PYZsh{}project onto the dimensions I can move}
                 \PY{n}{dn} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linalg}\PY{o}{.}\PY{n}{norm}\PY{p}{(}\PY{n}{d}\PY{p}{)}
                 \PY{k}{if} \PY{n}{dn}\PY{o}{==}\PY{l+m+mi}{0}\PY{p}{:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{divide by zero (dn)}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
                 \PY{c+c1}{\PYZsh{}distance moved should be poisson distribution, rn its just my speed}
                 \PY{n}{distance} \PY{o}{=} \PY{n}{travelDistance}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{speed}\PY{p}{)} \PY{o}{*} \PY{n}{nDims}
                 \PY{n}{d} \PY{o}{=} \PY{n}{d} \PY{o}{/} \PY{n}{dn} \PY{o}{*} \PY{n}{distance}
         \PY{c+c1}{\PYZsh{}         print(\PYZsq{}considering moving \PYZsq{}+str(d) + \PYZsq{} from \PYZsq{}+str(self.r))}
                 \PY{n}{candidateSolution} \PY{o}{=} \PY{n}{asParameters}\PY{p}{(}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rNorm} \PY{o}{+} \PY{n}{d}\PY{p}{)}\PY{o}{*}\PY{n}{scalingVector}\PY{p}{)}
                 \PY{n}{candidateSolution} \PY{o}{=} \PY{n}{constrain}\PY{p}{(}\PY{n}{candidateSolution}\PY{p}{,}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{myDims}\PY{p}{)}
                 
                 \PY{n}{acceptsNewSolution} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{evaluate}\PY{p}{(}\PY{n}{candidateSolution}\PY{p}{,}\PY{n}{soBias}\PY{p}{,}\PY{n}{groupConformityBias}\PY{p}{,}\PY{n}{teamPosition}\PY{o}{=}\PY{n}{teamPosition}\PY{p}{)}
                 \PY{k}{if} \PY{n}{acceptsNewSolution}\PY{p}{:} 
                     \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{moveTo}\PY{p}{(}\PY{n}{asVector}\PY{p}{(}\PY{n}{candidateSolution}\PY{p}{)}\PY{p}{)}
                     \PY{k}{return} \PY{k+kc}{True}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{f}\PY{p}{(}\PY{p}{)}
                 \PY{k}{return} \PY{k+kc}{False}
         
             \PY{k}{def} \PY{n+nf}{moveTo}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{r}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r} \PY{o}{=} \PY{n}{r}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rNorm} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r} \PY{o}{/} \PY{n}{scalingVector}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{params} \PY{o}{=} \PY{n}{asParameters}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{f}\PY{p}{(}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{memory}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{Solution}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r}\PY{p}{,}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score}\PY{p}{,}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{id}\PY{p}{,}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{nmoves} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                 
             \PY{k}{def} \PY{n+nf}{startAt}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{position}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r} \PY{o}{=} \PY{n}{position}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rNorm} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r} \PY{o}{/} \PY{n}{scalingVector}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{params} \PY{o}{=} \PY{n}{asParameters}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{memory} \PY{o}{=} \PY{p}{[}\PY{n}{Solution}\PY{p}{(}\PY{n}{r}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r}\PY{p}{,}\PY{n}{score}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{f}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{owner\PYZus{}id}\PY{o}{=}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{id}\PY{p}{,}\PY{n}{agent\PYZus{}class}\PY{o}{=}\PY{n+nb}{type}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{)}\PY{p}{]}
         
             \PY{k}{def} \PY{n+nf}{wantsToTalk}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{pComm}\PY{p}{)}\PY{p}{:}
                 \PY{k}{if}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZlt{}} \PY{n}{pComm}\PY{p}{)}\PY{p}{:}
                     \PY{k}{return} \PY{k+kc}{True}
                 \PY{k}{return} \PY{k+kc}{False}
             
             \PY{k}{def} \PY{n+nf}{getBestScore}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n}{bestScore} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score}
                 \PY{k}{for} \PY{n}{s} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{memory}\PY{p}{:}
                     \PY{k}{if} \PY{n}{s}\PY{o}{.}\PY{n}{score} \PY{o}{\PYZlt{}} \PY{n}{bestScore}\PY{p}{:}
                         \PY{n}{bestScore} \PY{o}{=} \PY{n}{s}\PY{o}{.}\PY{n}{score}
                 \PY{k}{return} \PY{n}{bestScore}
             
             \PY{k}{def} \PY{n+nf}{getBestSolution}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n}{bestSolution} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{memory}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                 \PY{k}{for} \PY{n}{m} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{memory}\PY{p}{:}
                     \PY{k}{if} \PY{n}{m}\PY{o}{.}\PY{n}{score} \PY{o}{\PYZlt{}} \PY{n}{bestSolution}\PY{o}{.}\PY{n}{score}\PY{p}{:}
                         \PY{n}{bestSolution} \PY{o}{=} \PY{n}{m}
                 \PY{k}{return} \PY{n}{bestSolution}
             
             \PY{k}{def} \PY{n+nf}{soBias}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{currentPosition}\PY{p}{,}\PY{n}{candidatePosition}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}influences preference for new solutions, f(A\PYZhy{}I)}
                 \PY{c+c1}{\PYZsh{}positions should be given as NORMALIZED positions on unit cube! }
                 \PY{n}{soNorm} \PY{o}{=} \PY{n}{normalizedSO}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{SO}\PY{p}{)} \PY{c+c1}{\PYZsh{}normalized score for Sufficiency of Originality}
                 \PY{n}{memSize} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{memory}\PY{p}{)} 
                 \PY{k}{if} \PY{n}{memSize} \PY{o}{\PYZlt{}} \PY{l+m+mi}{2}\PY{p}{:} \PY{k}{return} \PY{l+m+mi}{0} \PY{c+c1}{\PYZsh{}we don\PYZsq{}t have enough places be sticking around them}
                 
                 \PY{n}{candidateDirection} \PY{o}{=} \PY{n}{candidatePosition} \PY{o}{\PYZhy{}} \PY{n}{currentPosition} \PY{c+c1}{\PYZsh{}in unit cube space}
                 
                 \PY{n}{memDirection} \PY{o}{=} \PY{l+m+mi}{0} \PY{c+c1}{\PYZsh{} what is the direction of past solns from current soln?}
                 \PY{n}{weights} \PY{o}{=} \PY{n}{memoryWeightsPrimacy}\PY{p}{(}\PY{n}{memSize}\PY{p}{)} \PY{c+c1}{\PYZsh{}weights based on temporal order, Recency and Primacy Bias}
                 \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{memSize}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}don\PYZsq{}t include current soln}
                     \PY{n}{past\PYZus{}soln} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{memory}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                     \PY{n}{pairwiseDiff} \PY{o}{=} \PY{n}{past\PYZus{}soln}\PY{o}{.}\PY{n}{rNorm} \PY{o}{\PYZhy{}} \PY{n}{currentPosition}
                     \PY{n}{memDirection} \PY{o}{+}\PY{o}{=} \PY{n}{pairwiseDiff} \PY{o}{*} \PY{n}{weights}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{c+c1}{\PYZsh{}now we see if the new solution is in the direction of the memories or away from the memories}
                 \PY{n}{paradigmRelatedness} \PY{o}{=} \PY{n}{dotNorm}\PY{p}{(}\PY{n}{memDirection}\PY{p}{,} \PY{n}{candidateDirection}\PY{p}{)}
                 \PY{n}{raw\PYZus{}PR\PYZus{}score} \PY{o}{=} \PY{n}{soNorm} \PY{o}{*} \PY{p}{(}\PY{n}{paradigmRelatedness} \PY{o}{+} \PY{l+m+mi}{0}\PY{p}{)} \PY{c+c1}{\PYZsh{}shifting the x intercept \PYZsh{}biasOfSO(PR,soNorm)}
                 \PY{n}{sufficiency\PYZus{}of\PYZus{}originality} \PY{o}{=} \PY{n}{raw\PYZus{}PR\PYZus{}score}\PY{o}{*}\PY{n}{SO\PYZus{}STRENGTH} \PY{c+c1}{\PYZsh{}the agent should have a memory of their path \PYZam{} interactions}
                     
                 \PY{k}{return} \PY{n}{sufficiency\PYZus{}of\PYZus{}originality}
             
             \PY{k}{def} \PY{n+nf}{groupConformityBias}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{teamPosition}\PY{p}{,}\PY{n}{currentPosition}\PY{p}{,}\PY{n}{candidatePosition}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}influences preference for new solutions, f(A\PYZhy{}I)}
                 \PY{n}{rgNorm} \PY{o}{=} \PY{n}{normalizedRG}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{RG}\PY{p}{)} \PY{c+c1}{\PYZsh{}normalized score for Rule/Group Conformity}
                 \PY{n}{candidateDirection} \PY{o}{=} \PY{n}{candidatePosition} \PY{o}{\PYZhy{}} \PY{n}{currentPosition} 
                 
                 \PY{c+c1}{\PYZsh{}all teammates have equal weight}
                 \PY{n}{teamDirection} \PY{o}{=} \PY{n}{teamPosition} \PY{o}{\PYZhy{}} \PY{n}{currentPosition}
         
                 \PY{c+c1}{\PYZsh{}now we see if the new solution is in the direction of the team or away from the team}
                 \PY{n}{groupConformity} \PY{o}{=} \PY{n}{dotNorm}\PY{p}{(}\PY{n}{teamDirection}\PY{p}{,} \PY{n}{candidateDirection}\PY{p}{)}
                 \PY{n}{nominalGC} \PY{o}{=} \PY{l+m+mi}{0} \PY{c+c1}{\PYZsh{}can change intercept with \PYZhy{}0 (using dot product of direction,so is perpendicular the null case?)}
                 \PY{n}{groupConformityBias} \PY{o}{=} \PY{p}{(}\PY{n}{groupConformity}\PY{o}{\PYZhy{}}\PY{n}{nominalGC}\PY{p}{)}\PY{o}{*}\PY{n}{rgNorm}\PY{o}{*}\PY{n}{RG\PYZus{}STRENGTH} 
                 \PY{k}{return} \PY{n}{groupConformityBias}
             
             \PY{k}{def} \PY{n+nf}{evaluate}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{candidateSolution}\PY{p}{,}\PY{n}{soBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{groupConformityBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{teamPosition}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}implements simulated annealing greediness}
                 \PY{n}{candidateSolutionNorm} \PY{o}{=} \PY{n}{asVector}\PY{p}{(}\PY{n}{candidateSolution}\PY{p}{)} \PY{o}{/} \PY{n}{scalingVector}
                 \PY{n}{candidateScore} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{fr}\PY{p}{(}\PY{n}{candidateSolution}\PY{p}{)}
                 \PY{k}{if} \PY{n}{soBias}\PY{p}{:}
                     \PY{n}{candidateScore} \PY{o}{+}\PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{soBias}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rNorm}\PY{p}{,}\PY{n}{candidateSolutionNorm}\PY{p}{)}
                 \PY{k}{if} \PY{n}{groupConformityBias}\PY{p}{:}
                     \PY{n}{gcB} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{groupConformityBias}\PY{p}{(}\PY{n}{teamPosition}\PY{p}{,}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rNorm}\PY{p}{,}\PY{n}{candidateSolutionNorm}\PY{p}{)}
                     \PY{n}{candidateScore} \PY{o}{+}\PY{o}{=} \PY{n}{gcB}
                 \PY{c+c1}{\PYZsh{}if better solution, accept}
                 \PY{k}{if} \PY{n}{candidateScore} \PY{o}{\PYZlt{}} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score}\PY{p}{:}
                     \PY{k}{return} \PY{k+kc}{True}
                 \PY{c+c1}{\PYZsh{}accept worse solution with some probability, according to exp((old\PYZhy{}new )/temp)}
                 \PY{k}{elif} \PY{n}{pickWorseScore}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score}\PY{p}{,}\PY{n}{candidateScore}\PY{p}{,}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{temp}\PY{p}{)}\PY{p}{:}
                     \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score} \PY{o}{=} \PY{n}{candidateScore} \PY{c+c1}{\PYZsh{}(its worse, but we go there anyways)}
                     \PY{k}{return} \PY{k+kc}{True}              
                 \PY{k}{return} \PY{k+kc}{False}
             
             
         \PY{c+c1}{\PYZsh{}Solutions are objects}
         \PY{k}{class} \PY{n+nc}{Solution}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{r}\PY{p}{,}  \PY{n}{score}\PY{p}{,} \PY{n}{owner\PYZus{}id}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{agent\PYZus{}class}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r} \PY{o}{=} \PY{n}{cp}\PY{p}{(}\PY{n}{r}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rNorm} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{r} \PY{o}{/} \PY{n}{scalingVector}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{score} \PY{o}{=} \PY{n}{cp}\PY{p}{(}\PY{n}{score}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{owner\PYZus{}id} \PY{o}{=} \PY{n}{cp}\PY{p}{(}\PY{n}{owner\PYZus{}id}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agent\PYZus{}class} \PY{o}{=} \PY{n}{cp}\PY{p}{(}\PY{n}{agent\PYZus{}class}\PY{p}{)}
                 
         \PY{c+c1}{\PYZsh{}KAI scores are objects }
         \PY{k}{class} \PY{n+nc}{KAIScore}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{subscores}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
                 \PY{k}{if} \PY{n}{subscores} \PY{o+ow}{is} \PY{k+kc}{None}\PY{p}{:}
                     \PY{n}{subscores} \PY{o}{=} \PY{n}{makeKAI}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{k+kc}{True}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{KAI} \PY{o}{=} \PY{n}{subscores}\PY{o}{.}\PY{n}{KAI}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{SO} \PY{o}{=} \PY{n}{subscores}\PY{o}{.}\PY{n}{SO}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{E} \PY{o}{=} \PY{n}{subscores}\PY{o}{.}\PY{n}{E}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{RG} \PY{o}{=} \PY{n}{subscores}\PY{o}{.}\PY{n}{RG}
             
         \PY{c+c1}{\PYZsh{}subclasses (Types) of Agents}
         \PY{k}{class} \PY{n+nc}{carDesigner}\PY{p}{(}\PY{n}{Agent}\PY{p}{)}\PY{p}{:}
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n+nb}{id}\PY{o}{=}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:}
                 \PY{n}{Agent}\PY{o}{.}\PY{n+nf+fm}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n+nb}{id}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{myDims} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{1} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{team} \PY{p}{]} \PY{c+c1}{\PYZsh{}owns all dimensions by default}
         \PY{c+c1}{\PYZsh{}         self.params = startParams() \PYZsh{}\PYZsh{}these already set in class Agent()}
         \PY{c+c1}{\PYZsh{}         self.r = asVector(params)}
         \PY{c+c1}{\PYZsh{}         self.rNorm = self.r / scalingVector}
                  
             \PY{k}{def} \PY{n+nf}{f}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{k}{return} \PY{n}{objective}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{params}\PY{p}{,}\PY{n}{weightsCustom}\PY{p}{)}
             \PY{k}{def} \PY{n+nf}{fr}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{params}\PY{p}{)}\PY{p}{:}
                 \PY{k}{return} \PY{n}{objective}\PY{p}{(}\PY{n}{params}\PY{p}{,}\PY{n}{weightsCustom}\PY{p}{)}
             
         \PY{k}{class} \PY{n+nc}{cabinPerson}\PY{p}{(}\PY{n}{Agent}\PY{p}{)}\PY{p}{:}
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n+nb}{id}\PY{o}{=}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:}
                 \PY{n}{Agent}\PY{o}{.}\PY{n+nf+fm}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n+nb}{id}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{myDims} \PY{o}{=} \PY{p}{[}\PY{p}{(} \PY{l+m+mi}{1} \PY{k}{if} \PY{n}{t} \PY{o}{==} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{c}\PY{l+s+s2}{\PYZdq{}} \PY{k}{else} \PY{l+m+mi}{0} \PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{team} \PY{p}{]}
         \PY{c+c1}{\PYZsh{}         self.r = np.random.uniform(\PYZhy{}1*startRange,startRange,nDims)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{params} \PY{o}{=} \PY{n}{startParams}\PY{p}{(}\PY{p}{)} \PY{c+c1}{\PYZsh{} asParameters(self.r)}
                 
             \PY{k}{def} \PY{n+nf}{f}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{k}{return} \PY{n}{objective}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{params}\PY{p}{,}\PY{n}{weightsCustom}\PY{p}{)}
             \PY{k}{def} \PY{n+nf}{fr}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{params}\PY{p}{)}\PY{p}{:}
                 \PY{k}{return} \PY{n}{objective}\PY{p}{(}\PY{n}{params}\PY{p}{,}\PY{n}{weightsCustom}\PY{p}{)}
             
         \PY{c+c1}{\PYZsh{} class Steinway(Agent): \PYZsh{}tuneable roughness}
         \PY{c+c1}{\PYZsh{}     def \PYZus{}\PYZus{}init\PYZus{}\PYZus{}(self, id=\PYZhy{}1):}
         \PY{c+c1}{\PYZsh{}         Agent.\PYZus{}\PYZus{}init\PYZus{}\PYZus{}(self,id)}
         \PY{c+c1}{\PYZsh{}         self.myDims = np.ones(nDims)}
         \PY{c+c1}{\PYZsh{}         self.r = np.random.uniform(\PYZhy{}1*startRange,startRange,nDims)}
                 
         \PY{c+c1}{\PYZsh{}     def f(self):}
         \PY{c+c1}{\PYZsh{}         return testy(self.r,ROUGHNESS)}
         \PY{c+c1}{\PYZsh{}     def fr(self,r):}
         \PY{c+c1}{\PYZsh{}         return testy(r,ROUGHNESS)}
         
         \PY{c+c1}{\PYZsh{} class LewisMultiDim(Agent): \PYZsh{}objective is beauty}
         \PY{c+c1}{\PYZsh{}     def \PYZus{}\PYZus{}init\PYZus{}\PYZus{}(self,id=\PYZhy{}1):}
         \PY{c+c1}{\PYZsh{}         Agent.\PYZus{}\PYZus{}init\PYZus{}\PYZus{}(self,id)}
         \PY{c+c1}{\PYZsh{}         self.myDims = np.ones(nDims) \PYZsh{}logical vector, LewD controls/varies x0 AND x1}
                 
         \PY{c+c1}{\PYZsh{}     def f(self):}
         \PY{c+c1}{\PYZsh{}         return ellipsoid(self.r)}
         \PY{c+c1}{\PYZsh{}     def fr(self,r):}
         \PY{c+c1}{\PYZsh{}         return ellipsoid(r)}
         
         \PY{k}{def} \PY{n+nf}{tryToShare}\PY{p}{(}\PY{n}{a1}\PY{p}{,}\PY{n}{a2}\PY{p}{)}\PY{p}{:}
             \PY{n}{deltaAi} \PY{o}{=} \PY{n+nb}{abs}\PY{p}{(}\PY{n}{a1}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI} \PY{o}{\PYZhy{}} \PY{n}{a2}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI}\PY{p}{)} \PY{c+c1}{\PYZsh{}harder to communicate above 20, easy below 10}
             \PY{n}{successful} \PY{o}{=}  \PY{n}{tryComm}\PY{p}{(}\PY{n}{deltaAi}\PY{p}{)}
             \PY{k}{if} \PY{n}{successful}\PY{p}{:} \PY{c+c1}{\PYZsh{}in share(), agents might adopt a better solution depending on their temperature}
                 \PY{n}{share}\PY{p}{(}\PY{n}{a1}\PY{p}{,}\PY{n}{a2}\PY{p}{)} \PY{k}{if} \PY{n}{complexSharing} \PY{k}{else} \PY{n}{shareBasic}\PY{p}{(}\PY{n}{a1}\PY{p}{,}\PY{n}{a2}\PY{p}{)}
                 \PY{k}{return} \PY{k+kc}{True}
             \PY{k}{return} \PY{k+kc}{False}
         
         \PY{c+c1}{\PYZsh{} def softShare(a1,a2): \PYZsh{}share position with some error}
         \PY{c+c1}{\PYZsh{}     deltaAi = abs(a1.ai \PYZhy{} a2.ai) \PYZsh{}hard to communicate above 20, easy below 10}
         \PY{c+c1}{\PYZsh{}     \PYZsh{}the higher the deltaAi, the more noise in sharing position}
         \PY{c+c1}{\PYZsh{}     e = np.random.normal(10,10)}
         \PY{c+c1}{\PYZsh{}         return True}
         \PY{c+c1}{\PYZsh{}     return False}
             
         \PY{c+c1}{\PYZsh{} def shareBasic(a1,a2): \PYZsh{}always share}
         \PY{c+c1}{\PYZsh{}     for i in range(len(a1.myDims)):}
         \PY{c+c1}{\PYZsh{}         if(a1.myDims[i]\PYZgt{}0):}
         \PY{c+c1}{\PYZsh{}             \PYZsh{}a1 controls this dimension, but a2 only follows if it helps them}
         \PY{c+c1}{\PYZsh{}             candidateSoln = a2.params \PYZsh{}other dimensions won\PYZsq{}t change}
         \PY{c+c1}{\PYZsh{}             candidateSoln[i] = a1.r[i] \PYZsh{}tells a1 where to go in This [i] dimension only}
         \PY{c+c1}{\PYZsh{}             if(a2.fr(candidateSoln)\PYZlt{}a2.score): \PYZsh{}self\PYZhy{}bias goes here}
         \PY{c+c1}{\PYZsh{}                 a2.r = candidateSoln}
         \PY{c+c1}{\PYZsh{}                 a2.params = asParameters(a2.r)}
         \PY{c+c1}{\PYZsh{}                 a2.score = a2.f()}
         \PY{c+c1}{\PYZsh{} \PYZsh{}                 print(\PYZsq{}shared\PYZsq{})}
                  
         \PY{c+c1}{\PYZsh{}         elif(a2.myDims[i]\PYZgt{}0):}
         \PY{c+c1}{\PYZsh{}             \PYZsh{}a1.r[i]=a2.r[i] \PYZsh{}for naive follow}
         \PY{c+c1}{\PYZsh{}             candidateSoln = a1.r }
         \PY{c+c1}{\PYZsh{}             candidateSoln[i] = a2.r[i] }
         \PY{c+c1}{\PYZsh{}             if(a1.fr(candidateSoln)\PYZlt{}a1.score): }
         \PY{c+c1}{\PYZsh{}                 a1.r = candidateSoln}
         \PY{c+c1}{\PYZsh{}                 a1.params = asParameters(a1.r)}
         \PY{c+c1}{\PYZsh{}                 a1.score = a1.f()}
         \PY{c+c1}{\PYZsh{} \PYZsh{}                 print(\PYZsq{}shared\PYZsq{})}
         \PY{c+c1}{\PYZsh{}     return True}
                 
         \PY{k}{def} \PY{n+nf}{share}\PY{p}{(}\PY{n}{a1}\PY{p}{,}\PY{n}{a2}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}agent chooses whether to accept new solution or not, holistic NOTTTTTT dimension by dimension}
             \PY{n}{copyOfA1} \PY{o}{=} \PY{n}{cp}\PY{p}{(}\PY{n}{a1}\PY{p}{)}
             \PY{n}{considerSharedSoln}\PY{p}{(}\PY{n}{a1}\PY{p}{,}\PY{n}{a2}\PY{p}{)}
             \PY{n}{considerSharedSoln}\PY{p}{(}\PY{n}{a2}\PY{p}{,}\PY{n}{copyOfA1}\PY{p}{)} \PY{c+c1}{\PYZsh{}so they could theoretically swap positions...}
             \PY{k}{return} \PY{k+kc}{True}
         
         \PY{k}{def} \PY{n+nf}{considerSharedSoln}\PY{p}{(}\PY{n}{me}\PY{p}{,}\PY{n}{sharer}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{},dim): \PYZsh{}will only move (jump) in the dimensions that sharer controls}
         \PY{c+c1}{\PYZsh{}         candidateSoln = me.r \PYZsh{}other dimensions won\PYZsq{}t change}
         \PY{c+c1}{\PYZsh{}         candidateSoln[dim] = sharer.r[dim] \PYZsh{}tells a1 where to go in This [i] dimension only}
                 \PY{n}{candidateSolution} \PY{o}{=} \PY{n}{sharer}\PY{o}{.}\PY{n}{params}
                 \PY{n}{candidateScore} \PY{o}{=} \PY{n}{me}\PY{o}{.}\PY{n}{fr}\PY{p}{(}\PY{n}{candidateSolution}\PY{p}{)}
                 \PY{n}{myScore} \PY{o}{=} \PY{n}{me}\PY{o}{.}\PY{n}{score} \PY{o}{\PYZhy{}} \PY{n}{selfBias} \PY{c+c1}{\PYZsh{}improve my score by selfBias}
                 \PY{c+c1}{\PYZsh{}Quality Bias Reduction? would go here}
                 \PY{k}{if}\PY{p}{(}\PY{n}{candidateScore}\PY{o}{\PYZlt{}}\PY{n}{myScore}\PY{p}{)}\PY{p}{:}
                     \PY{k}{if} \PY{o+ow}{not} \PY{n}{pickWorseScore}\PY{p}{(}\PY{n}{candidateScore}\PY{p}{,}\PY{n}{myScore}\PY{p}{,}\PY{n}{me}\PY{o}{.}\PY{n}{temp}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}sometimes choose better, not always}
                         \PY{n}{me}\PY{o}{.}\PY{n}{moveTo}\PY{p}{(}\PY{n}{asVector}\PY{p}{(}\PY{n}{candidateSolution}\PY{p}{)}\PY{p}{)}  \PY{c+c1}{\PYZsh{}(but never take a worse score from a teammate)}
         \PY{c+c1}{\PYZsh{}                 me.speed = me.startSpeed}
         \PY{c+c1}{\PYZsh{}                 me.temp = me.startTemp \PYZsh{} !! CHRIS trying somethign new here: restart temp at teammate\PYZsq{}s soln}
         \PY{n}{constructor} \PY{o}{=} \PY{n}{carDesigner}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}88}]:} \PY{c+c1}{\PYZsh{} commBonus = 0}
         \PY{c+c1}{\PYZsh{} commRange = 200}
         \PY{k}{def} \PY{n+nf}{tryComm}\PY{p}{(}\PY{n}{deltaAi}\PY{p}{)}\PY{p}{:}
             \PY{n}{c} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{n}{commBonus}\PY{p}{,}\PY{n}{commBonus}\PY{o}{+}\PY{n}{commRange}\PY{p}{)} \PY{c+c1}{\PYZsh{}increasing commBonus makes sharing easier }
             \PY{k}{return} \PY{p}{(}\PY{n}{deltaAi} \PY{o}{\PYZlt{}} \PY{n}{c} \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}89}]:} \PY{k}{class} \PY{n+nc}{Team}\PY{p}{(}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}a group of agents working on the same dimension and objective function}
             \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{nAgents}\PY{p}{,} \PY{n}{agentConstructor}\PY{p}{,} \PY{n}{dimensions} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{ones}\PY{p}{(}\PY{n}{nDims}\PY{p}{)}\PY{p}{,} \PY{n}{specializations} \PY{o}{=} \PY{k+kc}{None}\PY{p}{,} \PY{n}{temp}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{speed}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{aiScore}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{aiRange}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{startPositions}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents} \PY{o}{=} \PY{p}{[}\PY{p}{]}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{dimensions} \PY{o}{=} \PY{n}{dimensions}
                 \PY{k}{if} \PY{p}{(}\PY{n}{aiScore} \PY{o+ow}{is} \PY{o+ow}{not} \PY{k+kc}{None}\PY{p}{)} \PY{o+ow}{and} \PY{p}{(}\PY{n}{aiRange} \PY{o+ow}{is} \PY{o+ow}{not} \PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
                     \PY{n}{minScore} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{p}{[}\PY{l+m+mi}{40}\PY{p}{,} \PY{n}{aiScore}\PY{o}{\PYZhy{}}\PY{n}{aiRange}\PY{o}{/}\PY{l+m+mf}{2.0}\PY{p}{]}\PY{p}{)}
                     \PY{n}{maxScore} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{[}\PY{l+m+mi}{150}\PY{p}{,}\PY{n}{aiScore}\PY{o}{+}\PY{n}{aiRange}\PY{o}{/}\PY{l+m+mf}{2.0}\PY{p}{]}\PY{p}{)}
                     \PY{n}{aiScores} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{n}{minScore}\PY{p}{,}\PY{n}{maxScore}\PY{p}{,}\PY{n}{nAgents}\PY{p}{)}
                     \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{shuffle}\PY{p}{(}\PY{n}{aiScores}\PY{p}{)} \PY{c+c1}{\PYZsh{}randomly assign these to agents, not in order...}
                     \PY{c+c1}{\PYZsh{}or we could try putting them in subteams according to a rule:}
                     
                 \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{nAgents}\PY{p}{)}\PY{p}{:}
                     \PY{n}{a} \PY{o}{=} \PY{n}{agentConstructor}\PY{p}{(}\PY{n+nb}{id} \PY{o}{=} \PY{n}{i}\PY{p}{)}
                     \PY{k}{if} \PY{n}{startPositions} \PY{o+ow}{is} \PY{o+ow}{not} \PY{k+kc}{None}\PY{p}{:}
                         \PY{n}{a}\PY{o}{.}\PY{n}{startAt}\PY{p}{(}\PY{n}{startPositions}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
                     \PY{k}{if} \PY{p}{(}\PY{n}{aiScore} \PY{o+ow}{is} \PY{o+ow}{not} \PY{k+kc}{None}\PY{p}{)} \PY{o+ow}{and} \PY{p}{(}\PY{n}{aiRange} \PY{o+ow}{is} \PY{o+ow}{not} \PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
                         \PY{n}{aiScore} \PY{o}{=} \PY{n}{aiScores}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                         \PY{n}{a}\PY{o}{.}\PY{n}{kai} \PY{o}{=} \PY{n}{findAiScore}\PY{p}{(}\PY{n}{aiScore}\PY{p}{)}
                         \PY{n}{a}\PY{o}{.}\PY{n}{speed} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{n}{AVG\PYZus{}SPEED} \PY{o}{+} \PY{n}{normalizedAI}\PY{p}{(}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI}\PY{p}{)} \PY{o}{*} \PY{n}{SD\PYZus{}SPEED}\PY{p}{,} \PY{n}{MIN\PYZus{}SPEED} \PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{inf}\PY{p}{)}
                         \PY{n}{a}\PY{o}{.}\PY{n}{temp} \PY{o}{=} \PY{n}{bounds}\PY{p}{(}\PY{n}{AVG\PYZus{}TEMP} \PY{o}{+} \PY{n}{normalizedE}\PY{p}{(}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{E}\PY{p}{)} \PY{o}{*} \PY{n}{SD\PYZus{}TEMP}\PY{p}{,} \PY{l+m+mi}{0} \PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{inf}\PY{p}{)}
                     \PY{k}{if} \PY{n}{speed} \PY{o+ow}{is} \PY{o+ow}{not} \PY{k+kc}{None}\PY{p}{:}
                         \PY{n}{a}\PY{o}{.}\PY{n}{speed} \PY{o}{=} \PY{n}{speed}
                     \PY{k}{if} \PY{n}{temp} \PY{o+ow}{is} \PY{o+ow}{not} \PY{k+kc}{None}\PY{p}{:}
                         \PY{n}{a}\PY{o}{.}\PY{n}{temp} \PY{o}{=} \PY{n}{temp}
                     \PY{n}{a}\PY{o}{.}\PY{n}{startSpeed} \PY{o}{=} \PY{n}{a}\PY{o}{.}\PY{n}{speed}
                     \PY{n}{a}\PY{o}{.}\PY{n}{startTemp} \PY{o}{=} \PY{n}{a}\PY{o}{.}\PY{n}{temp}
                     \PY{n}{a}\PY{o}{.}\PY{n}{myDims} \PY{o}{=} \PY{n}{dimensions} \PY{c+c1}{\PYZsh{}default: all dimensions owned by every agent}
                     \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{a}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{nAgents} \PY{o}{=} \PY{n}{nAgents}
                 \PY{n}{aiScores} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{dAI} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{n}{aiScores}\PY{p}{)}\PY{o}{\PYZhy{}} \PY{n}{np}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{n}{aiScores}\PY{p}{)}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{nMeetings} \PY{o}{=} \PY{l+m+mi}{0}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{nTeamMeetings} \PY{o}{=} \PY{l+m+mi}{0}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{subTeamMeetings} \PY{o}{=} \PY{l+m+mi}{0}
                 
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{scoreHistory} \PY{o}{=} \PY{p}{[}\PY{p}{]}
                 
                 \PY{c+c1}{\PYZsh{}if there are subteams owning certain dimensions, each subteams dimensions are listed in a matrix}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{specializations} \PY{o}{=} \PY{n}{specializations}
                 
         \PY{c+c1}{\PYZsh{}         \PYZsh{}we should give them same position in the dimensions they don\PYZsq{}t control}
         \PY{c+c1}{\PYZsh{}         a0 = self.agents[0]}
         \PY{c+c1}{\PYZsh{}         for i in range(len(a0.myDims)):}
         \PY{c+c1}{\PYZsh{}             if not a0.myDims[i]:  \PYZsh{}this isn\PYZsq{}t our dimension to control}
         \PY{c+c1}{\PYZsh{}                 for a in self.agents: }
         \PY{c+c1}{\PYZsh{}                     a.r[i] = a0.r[i] }
         
             \PY{k}{def} \PY{n+nf}{getSharedPosition}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}this is in the normalized space}
                 \PY{n}{positions} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{rNorm} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{]}\PY{p}{)}
                 \PY{k}{return} \PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{positions}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{n}{i}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{positions}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{]}
             
             \PY{k}{def} \PY{n+nf}{getSubTeamPosition}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{team}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}this is in the normalized space}
                 \PY{n}{positions} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{rNorm} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents} \PY{k}{if} \PY{n}{a}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{team}\PY{p}{]}\PY{p}{)}
                 \PY{k}{return} \PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{positions}\PY{p}{[}\PY{p}{:}\PY{p}{,}\PY{n}{i}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{positions}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{]}
             
             \PY{k}{def} \PY{n+nf}{getBestScore}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{k}{return} \PY{n}{np}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{]}\PY{p}{)}
             
             \PY{k}{def} \PY{n+nf}{getBestSolution}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n}{allSolns} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{getBestSolution}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
                 \PY{n}{allScores} \PY{o}{=} \PY{p}{[}\PY{n}{s}\PY{o}{.}\PY{n}{score} \PY{k}{for} \PY{n}{s} \PY{o+ow}{in} \PY{n}{allSolns}\PY{p}{]}
                 \PY{k}{return} \PY{n}{allSolns}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argmin}\PY{p}{(}\PY{n}{allScores}\PY{p}{)}\PY{p}{]}
             
             \PY{k}{def} \PY{n+nf}{getBestTeamSolution}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{team}\PY{o}{=}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}returns a Solution object }
                 \PY{n}{bestIndividualSolns} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{getBestSolution}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents} \PY{k}{if} \PY{n}{a}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{team} \PY{p}{]}
                 \PY{n}{bestScoreLocation} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{argmin}\PY{p}{(}\PY{p}{[}\PY{n}{s}\PY{o}{.}\PY{n}{score} \PY{k}{for} \PY{n}{s} \PY{o+ow}{in} \PY{n}{bestIndividualSolns}\PY{p}{]}\PY{p}{)}
                 \PY{k}{return} \PY{n}{bestIndividualSolns}\PY{p}{[}\PY{n}{bestScoreLocation}\PY{p}{]}
             
             \PY{k}{def} \PY{n+nf}{haveMeetings}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{talkers}\PY{p}{)}\PY{p}{:}
                 \PY{n}{nMeetings} \PY{o}{=} \PY{l+m+mi}{0}
                 \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{talkers}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{:}
                     \PY{c+c1}{\PYZsh{}if you don\PYZsq{}t have a partner, you don\PYZsq{}t talk to anyone?}
                     \PY{c+c1}{\PYZsh{}this needs to be adjusted}
                     \PY{n}{a1} \PY{o}{=} \PY{n}{talkers}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                     \PY{n}{a2} \PY{o}{=} \PY{n}{talkers}\PY{p}{[}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{]}
                     \PY{n}{didShare} \PY{o}{=} \PY{n}{tryToShare}\PY{p}{(}\PY{n}{a1}\PY{p}{,}\PY{n}{a2}\PY{p}{)}
                     \PY{k}{if} \PY{n}{didShare}\PY{p}{:} 
         \PY{c+c1}{\PYZsh{}                 print(str(a1.id) + \PYZsq{} and \PYZsq{}+str(a2.id)+\PYZsq{} shared!\PYZsq{})}
                         \PY{n}{nMeetings} \PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{nMeetings} \PY{o}{+}\PY{o}{=} \PY{n}{nMeetings}
                 \PY{k}{return} \PY{n}{nMeetings}
             
             \PY{k}{def} \PY{n+nf}{haveTeamMeeting}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{c+c1}{\PYZsh{}they all go to the best position of the group}
                 \PY{n}{bestSolution} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{getBestSolution}\PY{p}{(}\PY{p}{)}
                 \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{:}
                     \PY{n}{agentBest} \PY{o}{=} \PY{n}{a}\PY{o}{.}\PY{n}{getBestSolution}\PY{p}{(}\PY{p}{)}
                     \PY{k}{if} \PY{n}{agentBest}\PY{o}{.}\PY{n}{score} \PY{o}{\PYZlt{}} \PY{n}{bestSolution}\PY{o}{.}\PY{n}{score}\PY{p}{:}
                         \PY{n}{bestSolution} \PY{o}{=} \PY{n}{agentBest}
                 \PY{c+c1}{\PYZsh{}now move all agents to this position}
                 \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{:}
                     \PY{n}{a}\PY{o}{.}\PY{n}{moveTo}\PY{p}{(}\PY{n}{bestSolution}\PY{o}{.}\PY{n}{r}\PY{p}{)}
                     
                 \PY{k}{return} \PY{n}{bestSolution}
             
             \PY{k}{def} \PY{n+nf}{haveSubTeamMeeting}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{team}\PY{p}{,}\PY{n}{gap}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{:}
                 \PY{c+c1}{\PYZsh{}they all go to the best position of their specialized team}
                 \PY{n}{teamAgents} \PY{o}{=} \PY{p}{[}\PY{n}{a} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents} \PY{k}{if} \PY{n}{a}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{team}\PY{p}{]}
                 \PY{k}{if} \PY{n}{gap}\PY{p}{:} \PY{c+c1}{\PYZsh{}the meeting might fail if the cognitive style gap is large}
                     \PY{c+c1}{\PYZsh{}take the KAI differences of the team into account}
                     \PY{n}{kaiScores} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{teamAgents}\PY{p}{]}
                     \PY{n}{deltaAi} \PY{o}{=} \PY{n+nb}{max}\PY{p}{(}\PY{n}{kaiScores}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n+nb}{min}\PY{p}{(}\PY{n}{kaiScores}\PY{p}{)} \PY{c+c1}{\PYZsh{}hard to communicate above 20, easy below 10}
                     \PY{n}{successful} \PY{o}{=}  \PY{n}{tryComm}\PY{p}{(}\PY{n}{deltaAi}\PY{p}{)}
                     \PY{k}{if} \PY{o+ow}{not} \PY{n}{successful}\PY{p}{:} \PY{c+c1}{\PYZsh{}in share(), agents might adopt a better solution depending on their temperature}
                         \PY{k}{return} \PY{k+kc}{None}  \PY{c+c1}{\PYZsh{}our cognitive style gap caused the meeting to fail (only if complexSharing=True)}
                 \PY{c+c1}{\PYZsh{}ok, phew, we have a successful meeting despite any cognitive gap:}
                 \PY{n}{bestSolution} \PY{o}{=} \PY{n}{teamAgents}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{getBestSolution}\PY{p}{(}\PY{p}{)}
                 \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{teamAgents}\PY{p}{:}
                     \PY{n}{agentBest} \PY{o}{=} \PY{n}{a}\PY{o}{.}\PY{n}{getBestSolution}\PY{p}{(}\PY{p}{)}
                     \PY{k}{if} \PY{n}{agentBest}\PY{o}{.}\PY{n}{score} \PY{o}{\PYZlt{}} \PY{n}{bestSolution}\PY{o}{.}\PY{n}{score}\PY{p}{:}
                         \PY{n}{bestSolution} \PY{o}{=} \PY{n}{agentBest}
                 \PY{c+c1}{\PYZsh{}now move all agents to this position}
                 \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{teamAgents}\PY{p}{:}
                     \PY{n}{a}\PY{o}{.}\PY{n}{moveTo}\PY{p}{(}\PY{n}{bestSolution}\PY{o}{.}\PY{n}{r}\PY{p}{)}
                     
                 \PY{k}{return} \PY{n}{bestSolution}
             
             \PY{k}{def} \PY{n+nf}{haveInterTeamMeeting}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}when you have teams of teams}
                 \PY{n}{consensusPosition} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{nDims}\PY{p}{)}
                 \PY{c+c1}{\PYZsh{}get the best solution from each specialized subteam, and extract their specialized dimensions }
                 \PY{k}{for} \PY{n}{team} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{specializations}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                     \PY{n}{bestTeamSoln} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{getBestTeamSolution}\PY{p}{(}\PY{n}{team}\PY{p}{)}
                     \PY{n}{specializedInput} \PY{o}{=} \PY{n}{bestTeamSoln}\PY{o}{.}\PY{n}{r} \PY{o}{*} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{specializations}\PY{p}{[}\PY{n}{team}\PY{p}{]}
                     \PY{n}{consensusPosition} \PY{o}{+}\PY{o}{=} \PY{n}{specializedInput}
                 \PY{n}{consensusPositionP} \PY{o}{=} \PY{n}{constrain}\PY{p}{(}\PY{n}{asParameters}\PY{p}{(}\PY{n}{consensusPosition}\PY{p}{)}\PY{p}{)}
                 \PY{n}{consensusPosition} \PY{o}{=} \PY{n}{asVector}\PY{p}{(}\PY{n}{consensusPositionP}\PY{p}{)}
                 \PY{n}{consensusScore} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{fr}\PY{p}{(}\PY{n}{consensusPositionP}\PY{p}{)}
                 \PY{c+c1}{\PYZsh{}now move all agents to this position}
                 \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{:}
                     \PY{n}{a}\PY{o}{.}\PY{n}{moveTo}\PY{p}{(}\PY{n}{consensusPosition}\PY{p}{)}
                 
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{nTeamMeetings} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                 \PY{k}{return} \PY{p}{[}\PY{n}{consensusScore}\PY{p}{,} \PY{n}{consensusPosition}\PY{p}{]}
             
             
             \PY{k}{def} \PY{n+nf}{step}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,}\PY{n}{pComm}\PY{p}{,}\PY{n}{showViz}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{soBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{groupConformityBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{:}
                 \PY{c+c1}{\PYZsh{}what happens during a turn for the team? }
                 \PY{c+c1}{\PYZsh{}each agents can problem solve or interact (for now, inside team)}
                 \PY{n}{talkers} \PY{o}{=} \PY{p}{[}\PY{p}{]}
                 \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{:}
                     \PY{k}{if} \PY{n}{a}\PY{o}{.}\PY{n}{wantsToTalk}\PY{p}{(}\PY{n}{pComm}\PY{p}{)}\PY{p}{:}
                         \PY{n}{talkers}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{a}\PY{p}{)}
                     \PY{k}{else}\PY{p}{:} \PY{c+c1}{\PYZsh{}CHANGE: \PYZsh{}CHRIS I\PYZsq{}m going to make getSharedPosition look only at your subteam members}
                         \PY{n}{teamPosition} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{getSubTeamPosition}\PY{p}{(}\PY{n}{a}\PY{o}{.}\PY{n}{team}\PY{p}{)} \PY{k}{if} \PY{n}{groupConformityBias} \PY{k}{else} \PY{k+kc}{None} \PY{c+c1}{\PYZsh{}position is on unit cube}
                         \PY{n}{didMove} \PY{o}{=} \PY{n}{a}\PY{o}{.}\PY{n}{move}\PY{p}{(}\PY{n}{soBias}\PY{o}{=}\PY{n}{soBias}\PY{p}{,}\PY{n}{groupConformityBias} \PY{o}{=} \PY{n}{groupConformityBias}\PY{p}{,} \PY{n}{teamPosition}\PY{o}{=}\PY{n}{teamPosition}\PY{p}{)}
                 \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{talkers}\PY{p}{)}\PY{o}{\PYZpc{}}\PY{k}{2}\PYZgt{}0: \PYZsh{}odd number, have last one explore instead of share
                     \PY{n}{a} \PY{o}{=} \PY{n}{talkers}\PY{o}{.}\PY{n}{pop}\PY{p}{(}\PY{p}{)}
                     \PY{n}{didMove} \PY{o}{=} \PY{n}{a}\PY{o}{.}\PY{n}{move}\PY{p}{(}\PY{n}{soBias}\PY{o}{=}\PY{n}{soBias}\PY{p}{,}\PY{n}{groupConformityBias} \PY{o}{=} \PY{n}{groupConformityBias}\PY{p}{,} \PY{n}{teamPosition}\PY{o}{=}\PY{n}{teamPosition}\PY{p}{)}
                 \PY{n}{nMeetings} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{haveMeetings}\PY{p}{(}\PY{n}{talkers}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}         print(\PYZdq{}number of successful meetings: \PYZdq{}+str(nMeetings))}
                 
         \PY{c+c1}{\PYZsh{}         if showViz:}
         \PY{c+c1}{\PYZsh{}             self.plotPositions()}
                 
                 \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{updateTempSpeed}\PY{p}{(}\PY{p}{)}
                     
                 \PY{k}{return} \PY{n}{nMeetings}
             
             \PY{k}{def} \PY{n+nf}{updateTempSpeed}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{:}
                     \PY{n}{a}\PY{o}{.}\PY{n}{temp} \PY{o}{*}\PY{o}{=} \PY{n}{a}\PY{o}{.}\PY{n}{decay}
                     \PY{n}{a}\PY{o}{.}\PY{n}{speed} \PY{o}{*}\PY{o}{=} \PY{n}{a}\PY{o}{.}\PY{n}{decay}
                     
                 
             \PY{k}{def} \PY{n+nf}{plotPositions}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                 \PY{n}{xs} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{r}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
                 \PY{n}{ys} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{r}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
                 \PY{n}{cs} \PY{o}{=} \PY{p}{[}\PY{n}{aiColor}\PY{p}{(}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI}\PY{p}{)} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{xs}\PY{p}{,}\PY{n}{ys}\PY{p}{,} \PY{n}{c}\PY{o}{=}\PY{n}{cs}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}         teamPosition = self.getSharedPosition()}
         \PY{c+c1}{\PYZsh{}         plt.scatter(teamPosition[0],teamPosition[1],c=\PYZsq{}orange\PYZsq{})}
                 
                         
\end{Verbatim}


    \subsection{Tune Comm Bonus}\label{tune-comm-bonus}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}90}]:} \PY{n}{deltaAis} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} pSuccess = []}
         \PY{c+c1}{\PYZsh{} for deltaAi in deltaAis: \PYZsh{}hard to communicate above 20, easy below 10}
         \PY{c+c1}{\PYZsh{}     successful = []}
         \PY{c+c1}{\PYZsh{}     for i in range(1000):}
         \PY{c+c1}{\PYZsh{}         successful.append(tryComm(deltaAi))}
         \PY{c+c1}{\PYZsh{}     pSuccess.append(np.mean(successful))}
         \PY{n}{theoreticalP} \PY{o}{=} \PY{p}{[}\PY{n+nb}{min}\PY{p}{(}\PY{l+m+mi}{1} \PY{o}{\PYZhy{}} \PY{p}{(}\PY{n}{d}\PY{o}{\PYZhy{}}\PY{l+m+mi}{10}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{170}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)} \PY{k}{for} \PY{n}{d} \PY{o+ow}{in} \PY{n}{deltaAis}\PY{p}{]}
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{deltaAis}\PY{p}{,}\PY{n}{theoreticalP}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} plt.plot(deltaAis,pSuccess)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{difference in KAI}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{probability that communication succeeds}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./figs/successfullP.pdf}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_73_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}91}]:} \PY{c+c1}{\PYZsh{} nAgents = 22}
         \PY{c+c1}{\PYZsh{} steps = 1}
         \PY{c+c1}{\PYZsh{} teamDims, agentTeams = saeTeams(nAgents)}
         \PY{c+c1}{\PYZsh{} team = teamWorkSpecialized(nAgents,constructor,teamDims,agentTeams,showViz=showViz,speed=None,pComm=pComm,steps=steps,groupConformityBias=True,soBias=True,aiScore=aiScore,aiRange=aiRange)}
         
         \PY{c+c1}{\PYZsh{} print(team.agents[0].score)}
         \PY{c+c1}{\PYZsh{} print(team.agents[11].score)}
         \PY{c+c1}{\PYZsh{} print(team.getBestScore())}
         \PY{c+c1}{\PYZsh{} team.haveSubTeamMeeting(0)}
         \PY{c+c1}{\PYZsh{} print(team.agents[0].score)}
         \PY{c+c1}{\PYZsh{} print(team.agents[11].score)}
         \PY{c+c1}{\PYZsh{} print(team.getBestScore())}
\end{Verbatim}


    \section{Individual Exploration}\label{individual-exploration}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}92}]:} \PY{c+c1}{\PYZsh{} def work(AgentConstructor,steps=100,ai=None,temp=None, speed=None, showViz=False, soBias=False, groupConformityBias = False, color = \PYZsq{}red\PYZsq{},startPosition = None,teamPosition=None):    }
         \PY{c+c1}{\PYZsh{}     a = AgentConstructor()}
         \PY{c+c1}{\PYZsh{}     if ai is not None:}
         \PY{c+c1}{\PYZsh{}         a.kai = findAiScore(ai)}
         \PY{c+c1}{\PYZsh{}         self.speed = bounds(AVG\PYZus{}SPEED + normalizedAI(self.kai.KAI) * SD\PYZus{}SPEED, MIN\PYZus{}SPEED ,np.inf)}
         \PY{c+c1}{\PYZsh{}         self.temp = bounds(AVG\PYZus{}TEMP + normalizedE(self.kai.E) * SD\PYZus{}TEMP, 0 ,np.inf)}
         \PY{c+c1}{\PYZsh{}     if startPosition is not None:}
         \PY{c+c1}{\PYZsh{}         a.startAt(startPosition)}
         \PY{c+c1}{\PYZsh{}     if temp is not None:}
         \PY{c+c1}{\PYZsh{}         a.temp = temp}
         \PY{c+c1}{\PYZsh{}     if speed is not None:}
         \PY{c+c1}{\PYZsh{}         a.speed = speed}
             
         \PY{c+c1}{\PYZsh{}     a.decay = calculateAgentDecay(a, steps)}
         
         \PY{c+c1}{\PYZsh{}     scores = []}
         \PY{c+c1}{\PYZsh{}     shareSuccess = []          }
         
         \PY{c+c1}{\PYZsh{}     for i in range(steps):}
         \PY{c+c1}{\PYZsh{}         didMove = a.move(soBias=soBias,groupConformityBias = groupConformityBias,teamPosition = teamPosition)}
         \PY{c+c1}{\PYZsh{}         if didMove:}
         \PY{c+c1}{\PYZsh{}             scores.append(copy.deepcopy(a.score))}
         \PY{c+c1}{\PYZsh{}             if(showViz and a.nmoves\PYZgt{}0):}
         \PY{c+c1}{\PYZsh{} \PYZsh{}                     plt.scatter(a.rNorm[0],a.rNorm[1],c=color)}
         \PY{c+c1}{\PYZsh{}                 plt.scatter(a.rNorm[0],a.score,c=color)}
         \PY{c+c1}{\PYZsh{}         a.speed *= a.decay}
         \PY{c+c1}{\PYZsh{}         a.temp *= a.decay}
         
         \PY{c+c1}{\PYZsh{}     return a}
\end{Verbatim}


    \section{Team Work}\label{team-work}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}144}]:} \PY{c+c1}{\PYZsh{} meetingTimes = 20}
          \PY{k}{def} \PY{n+nf}{teamWork}\PY{p}{(}\PY{n}{teamSize}\PY{p}{,}\PY{n}{agentConstructor}\PY{p}{,} \PY{n}{pComm}\PY{p}{,} \PY{n}{steps}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{,} \PY{n}{soBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{groupConformityBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{speed}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{temp}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{showViz}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{aiScore}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{aiRange}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{startPositions}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
              \PY{n}{meetingTotals} \PY{o}{=} \PY{p}{[}\PY{p}{]}
              \PY{n}{squad} \PY{o}{=} \PY{n}{Team}\PY{p}{(}\PY{n}{teamSize}\PY{p}{,}\PY{n}{agentConstructor}\PY{p}{,}\PY{n}{temp}\PY{o}{=}\PY{n}{temp}\PY{p}{,}\PY{n}{speed}\PY{o}{=}\PY{n}{speed}\PY{p}{,}\PY{n}{aiScore}\PY{o}{=}\PY{n}{aiScore}\PY{p}{,}\PY{n}{aiRange}\PY{o}{=}\PY{n}{aiRange}\PY{p}{,}\PY{n}{startPositions}\PY{o}{=}\PY{n}{startPositions}\PY{p}{)}
              \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{squad}\PY{o}{.}\PY{n}{agents}\PY{p}{:}
                  \PY{n}{a}\PY{o}{.}\PY{n}{decay} \PY{o}{=} \PY{n}{calculateAgentDecay}\PY{p}{(}\PY{n}{a}\PY{p}{,}\PY{n}{steps}\PY{p}{)}
              
              \PY{n}{meetingTotal} \PY{o}{=} \PY{l+m+mi}{0}
              \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}
              \PY{k}{while} \PY{n}{i} \PY{o}{\PYZlt{}} \PY{n}{steps}\PY{p}{:}
                  \PY{n}{meetingTotal} \PY{o}{+}\PY{o}{=} \PY{n}{squad}\PY{o}{.}\PY{n}{step}\PY{p}{(}\PY{n}{pComm}\PY{p}{,}\PY{n}{showViz}\PY{p}{,}\PY{n}{soBias}\PY{p}{,}\PY{n}{groupConformityBias}\PY{p}{)} 
          \PY{c+c1}{\PYZsh{}         if showViz: }
          \PY{c+c1}{\PYZsh{}             rGroup = squad.getSharedPosition()}
          \PY{c+c1}{\PYZsh{}             plt.scatter(rGroup[0],rGroup[1],marker=\PYZsq{}o\PYZsq{},s=100,c=\PYZsq{}black\PYZsq{})}
                  
                  \PY{k}{if} \PY{p}{(}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{\PYZpc{}}\PY{k}{meetingTimes} == 0: 
                      \PY{n}{squad}\PY{o}{.}\PY{n}{haveTeamMeeting}\PY{p}{(}\PY{p}{)}
                      \PY{n}{squad}\PY{o}{.}\PY{n}{nTeamMeetings} \PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
                      \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{n}{TEAM\PYZus{}MEETING\PYZus{}COST}
                      \PY{k}{if}\PY{p}{(}\PY{n}{showViz}\PY{p}{)}\PY{p}{:} 
                          \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
                  \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
              \PY{k}{if} \PY{n}{showViz}\PY{p}{:} \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
              \PY{n}{meetingTotals}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{meetingTotal}\PY{p}{)}
              
              \PY{k}{return} \PY{n}{squad}
          
          \PY{c+c1}{\PYZsh{} meetingTimes = 20}
          \PY{k}{def} \PY{n+nf}{teamWorkSpecialized}\PY{p}{(}\PY{n}{teamSize}\PY{p}{,}\PY{n}{agentConstructor}\PY{p}{,}\PY{n}{teamSpecializations}\PY{p}{,}\PY{n}{agentTeams}\PY{p}{,} \PY{n}{pComm}\PY{p}{,} \PY{n}{steps}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{,} \PY{n}{soBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{groupConformityBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{speed}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{temp}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{showViz}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{aiScore}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{aiRange}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{startPositions}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
              \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{seed}\PY{p}{(}\PY{p}{)}
              \PY{n}{meetingTotals} \PY{o}{=} \PY{p}{[}\PY{p}{]}
              \PY{n}{squad} \PY{o}{=} \PY{n}{Team}\PY{p}{(}\PY{n}{teamSize}\PY{p}{,}\PY{n}{agentConstructor}\PY{p}{,}\PY{n}{temp}\PY{o}{=}\PY{n}{temp}\PY{p}{,}\PY{n}{speed}\PY{o}{=}\PY{n}{speed}\PY{p}{,}\PY{n}{aiScore}\PY{o}{=}\PY{n}{aiScore}\PY{p}{,}\PY{n}{aiRange}\PY{o}{=}\PY{n}{aiRange}\PY{p}{,}\PY{n}{startPositions}\PY{o}{=}\PY{n}{startPositions}\PY{p}{,}\PY{n}{specializations} \PY{o}{=} \PY{n}{teamSpecializations}\PY{p}{)}
              \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{squad}\PY{o}{.}\PY{n}{agents}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                  \PY{n}{a} \PY{o}{=} \PY{n}{squad}\PY{o}{.}\PY{n}{agents}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                  \PY{n}{aTeam} \PY{o}{=} \PY{n}{agentTeams}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                  \PY{n}{a}\PY{o}{.}\PY{n}{team} \PY{o}{=} \PY{n}{aTeam}
                  \PY{n}{a}\PY{o}{.}\PY{n}{myDims} \PY{o}{=} \PY{n}{teamSpecializations}\PY{p}{[}\PY{n}{aTeam}\PY{p}{]}
                  \PY{n}{a}\PY{o}{.}\PY{n}{decay} \PY{o}{=} \PY{n}{calculateAgentDecay}\PY{p}{(}\PY{n}{a}\PY{p}{,}\PY{n}{steps}\PY{p}{)}
              
              \PY{n}{meetingTotal} \PY{o}{=} \PY{l+m+mi}{0}
              \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0} \PY{c+c1}{\PYZsh{}not for loop bc we need to increment custom ammounts inside loop}
              \PY{k}{while} \PY{n}{i} \PY{o}{\PYZlt{}} \PY{n}{steps}\PY{p}{:}
          \PY{c+c1}{\PYZsh{}                 pCi = pComm \PYZsh{}*(i/steps) \PYZsh{}we can make them wait until later to communicate}
                  \PY{n}{meetingTotal} \PY{o}{+}\PY{o}{=} \PY{n}{squad}\PY{o}{.}\PY{n}{step}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{n}{showViz}\PY{p}{,}\PY{n}{soBias}\PY{p}{,}\PY{n}{groupConformityBias}\PY{p}{)}  \PY{c+c1}{\PYZsh{}putting 0 for pComm here!}
                  \PY{n}{score} \PY{o}{=} \PY{n}{squad}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)}
                  \PY{n}{squad}\PY{o}{.}\PY{n}{scoreHistory}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{score}\PY{p}{)}
                  \PY{k}{if} \PY{n}{showViz}\PY{p}{:} 
                      \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{i}\PY{p}{,}\PY{n}{score}\PY{p}{,}\PY{n}{marker}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{o}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{s}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{,}\PY{n}{c}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{black}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                  
                  \PY{k}{if} \PY{p}{(}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{\PYZpc{}}\PY{k}{meetingTimes} == 0: 
                      \PY{n}{squad}\PY{o}{.}\PY{n}{haveInterTeamMeeting}\PY{p}{(}\PY{p}{)}
                      \PY{n}{squad}\PY{o}{.}\PY{n}{nTeamMeetings} \PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
                      \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{n}{TEAM\PYZus{}MEETING\PYZus{}COST}
          \PY{c+c1}{\PYZsh{}             if showViz: }
          \PY{c+c1}{\PYZsh{}                 plt.show()}
          
                  \PY{c+c1}{\PYZsh{}use pComm for subTeam meetings instead of pair meetings}
                  \PY{k}{for} \PY{n}{team} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{squad}\PY{o}{.}\PY{n}{specializations}\PY{p}{)}\PY{p}{)}\PY{p}{:} 
                      \PY{k}{if} \PY{n}{pComm} \PY{o}{\PYZgt{}} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{p}{)}\PY{p}{:} \PY{c+c1}{\PYZsh{}on any step there is some chance of having a meeting}
                          \PY{n}{squad}\PY{o}{.}\PY{n}{haveSubTeamMeeting}\PY{p}{(}\PY{n}{team}\PY{p}{,}\PY{n}{gap}\PY{o}{=}\PY{n}{complexSharing}\PY{p}{)}
                          \PY{n}{squad}\PY{o}{.}\PY{n}{subTeamMeetings} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                  \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
              \PY{k}{if} \PY{n}{showViz}\PY{p}{:} \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
              \PY{n}{meetingTotals}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{meetingTotal}\PY{p}{)}
              
              \PY{k}{return} \PY{n}{squad}
          
          \PY{k}{def} \PY{n+nf}{teamWorkSharing}\PY{p}{(}\PY{n}{teamSize}\PY{p}{,}\PY{n}{agentConstructor}\PY{p}{,}\PY{n}{teamSpecializations}\PY{p}{,}\PY{n}{agentTeams}\PY{p}{,} \PY{n}{pComm}\PY{p}{,} \PY{n}{steps}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{,} \PY{n}{soBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{groupConformityBias}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{speed}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{temp}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{showViz}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,}\PY{n}{aiScore}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{aiRange}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{startPositions}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{curatedTeams}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{:}
              \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{seed}\PY{p}{(}\PY{p}{)}
              \PY{n}{squad} \PY{o}{=} \PY{n}{Team}\PY{p}{(}\PY{n}{teamSize}\PY{p}{,}\PY{n}{agentConstructor}\PY{p}{,}\PY{n}{temp}\PY{o}{=}\PY{n}{temp}\PY{p}{,}\PY{n}{speed}\PY{o}{=}\PY{n}{speed}\PY{p}{,}\PY{n}{aiScore}\PY{o}{=}\PY{n}{aiScore}\PY{p}{,}\PY{n}{aiRange}\PY{o}{=}\PY{n}{aiRange}\PY{p}{,}\PY{n}{startPositions}\PY{o}{=}\PY{n}{startPositions}\PY{p}{,}\PY{n}{specializations} \PY{o}{=} \PY{n}{teamSpecializations}\PY{p}{)}
              
              \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{squad}\PY{o}{.}\PY{n}{agents}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                  \PY{n}{a} \PY{o}{=} \PY{n}{squad}\PY{o}{.}\PY{n}{agents}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                  \PY{n}{aTeam} \PY{o}{=} \PY{n}{agentTeams}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                  \PY{n}{a}\PY{o}{.}\PY{n}{team} \PY{o}{=} \PY{n}{aTeam}
                  \PY{n}{a}\PY{o}{.}\PY{n}{myDims} \PY{o}{=} \PY{n}{teamSpecializations}\PY{p}{[}\PY{n}{aTeam}\PY{p}{]}
                  \PY{n}{a}\PY{o}{.}\PY{n}{decay} \PY{o}{=} \PY{n}{calculateAgentDecay}\PY{p}{(}\PY{n}{a}\PY{p}{,}\PY{n}{steps}\PY{p}{)}
              \PY{k}{if} \PY{n}{curatedTeams}\PY{p}{:}
                  \PY{k}{for} \PY{n}{team} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{teamSpecializations}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                      \PY{n}{teamAgents}\PY{o}{=}\PY{p}{[}\PY{n}{a} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{squad}\PY{o}{.}\PY{n}{agents} \PY{k}{if} \PY{n}{a}\PY{o}{.}\PY{n}{team} \PY{o}{==} \PY{n}{team}\PY{p}{]}
                      \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{teamAgents}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                          \PY{n}{myKai} \PY{o}{=} \PY{n}{aiScore} \PY{o}{\PYZhy{}} \PY{n}{aiRange}\PY{o}{/}\PY{l+m+mf}{2.0} \PY{o}{+} \PY{n}{aiRange}\PY{o}{*}\PY{p}{(}\PY{n+nb}{float}\PY{p}{(}\PY{n}{i}\PY{p}{)}\PY{o}{/}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{teamAgents}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)} 
                          \PY{n}{a}\PY{o}{=} \PY{n}{teamAgents}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                          \PY{n}{a}\PY{o}{.}\PY{n}{kai} \PY{o}{=} \PY{n}{findAiScore}\PY{p}{(}\PY{n}{myKai}\PY{p}{)}
                                     
              \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0} \PY{c+c1}{\PYZsh{}not for loop bc we need to increment custom ammounts inside loop}
              \PY{k}{while} \PY{n}{i} \PY{o}{\PYZlt{}} \PY{n}{steps}\PY{p}{:}
          \PY{c+c1}{\PYZsh{}                 pCi = pComm \PYZsh{}*(i/steps) \PYZsh{}we can make them wait until later to communicate}
                  \PY{n}{squad}\PY{o}{.}\PY{n}{nMeetings} \PY{o}{+}\PY{o}{=} \PY{n}{squad}\PY{o}{.}\PY{n}{step}\PY{p}{(}\PY{n}{pComm}\PY{p}{,}\PY{n}{showViz}\PY{p}{,}\PY{n}{soBias}\PY{p}{,}\PY{n}{groupConformityBias}\PY{p}{)} 
                  \PY{n}{score} \PY{o}{=} \PY{n}{squad}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)}
                  \PY{n}{squad}\PY{o}{.}\PY{n}{scoreHistory}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{score}\PY{p}{)}
                  \PY{k}{if} \PY{n}{showViz}\PY{p}{:} 
                      \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{i}\PY{p}{,}\PY{n}{score}\PY{p}{,}\PY{n}{marker}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{o}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{s}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{,}\PY{n}{c}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{black}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                  
                  \PY{k}{if} \PY{p}{(}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{\PYZpc{}}\PY{k}{meetingTimes} == 0: 
                      \PY{n}{squad}\PY{o}{.}\PY{n}{haveInterTeamMeeting}\PY{p}{(}\PY{p}{)}
                      \PY{n}{squad}\PY{o}{.}\PY{n}{nTeamMeetings} \PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
                      \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{n}{TEAM\PYZus{}MEETING\PYZus{}COST}
          \PY{c+c1}{\PYZsh{}             if showViz: }
          \PY{c+c1}{\PYZsh{}                 plt.show()}
                  \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
              \PY{k}{if} \PY{n}{showViz}\PY{p}{:} \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
              
              \PY{k}{return} \PY{n}{squad}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}175}]:} \PY{c+c1}{\PYZsh{}define the team specializations and assign agents to teams}
          \PY{k}{def} \PY{n+nf}{specializedTeams}\PY{p}{(}\PY{n}{nAgents}\PY{p}{,}\PY{n}{nDims}\PY{p}{,}\PY{n}{nTeams}\PY{p}{)}\PY{p}{:}
              \PY{n}{teamDimensions} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{p}{[}\PY{l+m+mi}{1} \PY{k}{if} \PY{n}{t}\PY{o}{\PYZpc{}}\PY{k}{nTeams} == dim\PYZpc{}nTeams else 0 for dim in range(nDims)] for t in range(nTeams)])
              \PY{n}{agentTeams} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{a}\PY{o}{\PYZpc{}}\PY{k}{nTeams} for a in range(nAgents)])
              \PY{k}{return} \PY{n}{teamDimensions}\PY{p}{,} \PY{n}{agentTeams}
          
          \PY{n}{teams} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{brk}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{c}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{e}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ft}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fw}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ia}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{fsp}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rsp}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rt}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rw}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{sw}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
          \PY{n}{teamsDict} \PY{o}{=} \PY{p}{\PYZob{}} \PY{n}{i}\PY{p}{:}\PY{n}{teams}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}\PY{p}{\PYZcb{}}
          \PY{n}{paramTeams} \PY{o}{=} \PY{n}{paramsDF}\PY{o}{.}\PY{n}{team}
          \PY{n}{nTeams} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{teams}\PY{p}{)}
          \PY{n}{teamDimensions\PYZus{}CONST} \PY{o}{=} \PY{p}{[}\PY{p}{[} \PY{l+m+mi}{1} \PY{k}{if} \PY{n}{paramTeam} \PY{o}{==} \PY{n}{thisTeam} \PY{k}{else} \PY{l+m+mi}{0} \PY{k}{for} \PY{n}{paramTeam} \PY{o+ow}{in} \PY{n}{paramTeams}\PY{p}{]} \PY{k}{for} \PY{n}{thisTeam} \PY{o+ow}{in} \PY{n}{teams}\PY{p}{]}
              
          \PY{k}{def} \PY{n+nf}{saeTeams}\PY{p}{(}\PY{n}{nAgents}\PY{p}{)}\PY{p}{:}
              \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{nAgents}\PY{p}{)}\PY{p}{:}
                  \PY{n}{agentTeams} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{a}\PY{o}{\PYZpc{}}\PY{k}{nTeams} for a in range(nAgents)])
              \PY{k}{return} \PY{n}{agentTeams}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}95}]:} \PY{k}{def} \PY{n+nf}{showScoreHistory}\PY{p}{(}\PY{n}{agent}\PY{p}{)}\PY{p}{:}
             \PY{n}{mem} \PY{o}{=} \PY{n}{agent}\PY{o}{.}\PY{n}{memory}
             \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{mem}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                 \PY{n}{m} \PY{o}{=} \PY{n}{mem}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{i}\PY{p}{,}\PY{n}{m}\PY{o}{.}\PY{n}{score}\PY{p}{,}\PY{n}{c}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         \PY{k}{def} \PY{n+nf}{showPath}\PY{p}{(}\PY{n}{agents}\PY{p}{)}\PY{p}{:}
             \PY{k}{for} \PY{n}{agent} \PY{o+ow}{in} \PY{n}{agents}\PY{p}{:}
                 \PY{n}{mem} \PY{o}{=} \PY{n}{agent}\PY{o}{.}\PY{n}{memory}
                 \PY{n}{dims} \PY{o}{=} \PY{p}{[}\PY{n}{i} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{agent}\PY{o}{.}\PY{n}{myDims}\PY{p}{)}\PY{p}{)} \PY{k}{if} \PY{n}{agent}\PY{o}{.}\PY{n}{myDims}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{\PYZgt{}}\PY{l+m+mi}{0}\PY{p}{]}
                 \PY{n}{x} \PY{o}{=} \PY{p}{[}\PY{p}{]}
                 \PY{n}{y} \PY{o}{=} \PY{p}{[}\PY{p}{]}
                 \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{mem}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                     \PY{n}{m} \PY{o}{=} \PY{n}{mem}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                     \PY{n}{x}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{m}\PY{o}{.}\PY{n}{r}\PY{p}{[}\PY{n}{dims}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}\PY{p}{)}
                     \PY{n}{y}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{m}\PY{o}{.}\PY{n}{r}\PY{p}{[}\PY{n}{dims}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{]}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{n}{c}\PY{o}{=}\PY{n}{aiColor}\PY{p}{(}\PY{n}{agent}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI}\PY{p}{)}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{name}\PY{p}{[}\PY{n}{dims}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{n}{paramsDF}\PY{o}{.}\PY{n}{name}\PY{p}{[}\PY{n}{dims}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{]}\PY{p}{)}
                 \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{agent}\PY{o}{.}\PY{n}{r}\PY{p}{[}\PY{n}{dims}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}\PY{p}{,}\PY{n}{agent}\PY{o}{.}\PY{n}{r}\PY{p}{[}\PY{n}{dims}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{]}\PY{p}{,}\PY{n}{marker}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{s}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{,}\PY{n}{c}\PY{o}{=}\PY{n}{aiColor}\PY{p}{(}\PY{n}{agent}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI}\PY{p}{)}\PY{p}{)}
             \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
         \PY{c+c1}{\PYZsh{} a0 = team.agents[9]}
         \PY{c+c1}{\PYZsh{} showScoreHistory(a0)}
         \PY{c+c1}{\PYZsh{} a0.myDims}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}171}]:} \PY{c+c1}{\PYZsh{}set standard Parameters}
          \PY{k}{def} \PY{n+nf}{resetDefaultParameters}\PY{p}{(}\PY{p}{)}\PY{p}{:}
              \PY{n}{steps} \PY{o}{=} \PY{l+m+mi}{500} \PY{c+c1}{\PYZsh{}0 \PYZsh{}100}
              \PY{n}{nAgents} \PY{o}{=} \PY{l+m+mi}{33}
              \PY{n}{constructor} \PY{o}{=} \PY{n}{carDesigner}
              \PY{n}{teamDims} \PY{o}{=} \PY{p}{[}\PY{p}{[} \PY{l+m+mi}{1} \PY{k}{if} \PY{n}{paramTeam} \PY{o}{==} \PY{n}{thisTeam} \PY{k}{else} \PY{l+m+mi}{0} \PY{k}{for} \PY{n}{paramTeam} \PY{o+ow}{in} \PY{n}{paramTeams}\PY{p}{]} \PY{k}{for} \PY{n}{thisTeam} \PY{o+ow}{in} \PY{n}{teams}\PY{p}{]}
              \PY{n}{agentTeams} \PY{o}{=} \PY{n}{saeTeams}\PY{p}{(}\PY{l+m+mi}{33}\PY{p}{)}\PY{c+c1}{\PYZsh{}[[ 1 if paramTeam == thisTeam else 0 for paramTeam in paramTeams] for thisTeam in teams]}
          
              \PY{n}{RG\PYZus{}STRENGTH} \PY{o}{=} \PY{l+m+mi}{10}
              \PY{n}{SO\PYZus{}STRENGTH} \PY{o}{=} \PY{l+m+mi}{10}
              \PY{n}{commBonus} \PY{o}{=} \PY{l+m+mi}{10}
              \PY{n}{commRange} \PY{o}{=} \PY{l+m+mi}{180}
          
              \PY{n}{AVG\PYZus{}SPEED} \PY{o}{=} \PY{l+m+mf}{0.7E\PYZhy{}2}
              \PY{n}{SD\PYZus{}SPEED} \PY{o}{=} \PY{l+m+mf}{0.7E\PYZhy{}3}
              \PY{n}{MIN\PYZus{}SPEED} \PY{o}{=} \PY{l+m+mf}{1.0E\PYZhy{}4}
              \PY{n}{AVG\PYZus{}TEMP} \PY{o}{=} \PY{l+m+mi}{1}
              \PY{n}{SD\PYZus{}TEMP} \PY{o}{=} \PY{l+m+mf}{0.8}
          
              \PY{n}{pComm} \PY{o}{=} \PY{l+m+mf}{0.2}
              \PY{n}{meetingTimes} \PY{o}{=} \PY{n}{steps} \PY{c+c1}{\PYZsh{}have one meeting at the end}
              \PY{n}{TEAM\PYZus{}MEETING\PYZus{}COST} \PY{o}{=} \PY{l+m+mi}{1}
          
              \PY{n}{VERBOSE} \PY{o}{=} \PY{k+kc}{False}
              \PY{n}{showViz} \PY{o}{=} \PY{k+kc}{False}
              \PY{n}{pairSharingOn} \PY{o}{=} \PY{k+kc}{True}
              \PY{n}{complexSharing} \PY{o}{=} \PY{k+kc}{True}
              \PY{n}{nDims} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{paramsDF}\PY{p}{)}
          
              \PY{n}{aiScoresMeans} \PY{o}{=} \PY{p}{[}\PY{k+kc}{None}\PY{p}{]}\PY{c+c1}{\PYZsh{}np.linspace(80,120,3)}
              \PY{n}{aiRanges} \PY{o}{=} \PY{p}{[}\PY{k+kc}{None}\PY{p}{]} \PY{c+c1}{\PYZsh{} np.linspace(0,30,2)}
\end{Verbatim}


    \section{visualize the solution?}\label{visualize-the-solution}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}181}]:} \PY{c+c1}{\PYZsh{} team0 = teamWorkSharing(nAgents,constructor,teamDims,agentTeams,showViz=showViz,speed=None,pComm=pComm,steps=steps,groupConformityBias=True,soBias=True,aiScore=aiScore,aiRange=aiRange)}
          \PY{n}{s0} \PY{o}{=} \PY{n}{team0}\PY{o}{.}\PY{n}{getBestSolution}\PY{p}{(}\PY{p}{)}
          \PY{n}{carDesign} \PY{o}{=} \PY{n}{asParameters}\PY{p}{(}\PY{n}{s0}\PY{o}{.}\PY{n}{r}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
divide by zero (dn)

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
/anaconda3/lib/python3.6/site-packages/ipykernel\_launcher.py:31: RuntimeWarning: invalid value encountered in true\_divide

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        TypeError                                 Traceback (most recent call last)

        <ipython-input-181-45609b9e64fe> in <module>()
    ----> 1 team0 = teamWorkSharing(nAgents,constructor,teamDims,agentTeams,showViz=showViz,speed=None,pComm=pComm,steps=steps,groupConformityBias=True,soBias=True,aiScore=aiScore,aiRange=aiRange)
          2 s0 = team0.getBestSolution()
          3 carDesign = asParameters(s0.r)


        <ipython-input-144-54eb3105a7c1> in teamWorkSharing(teamSize, agentConstructor, teamSpecializations, agentTeams, pComm, steps, soBias, groupConformityBias, speed, temp, showViz, aiScore, aiRange, startPositions, curatedTeams)
         87     while i < steps:
         88 \#                 pCi = pComm \#*(i/steps) \#we can make them wait until later to communicate
    ---> 89         squad.nMeetings += squad.step(pComm,showViz,soBias,groupConformityBias)
         90         score = squad.getBestScore()
         91         squad.scoreHistory.append(score)


        <ipython-input-89-97d78a2f6313> in step(self, pComm, showViz, soBias, groupConformityBias)
        142             else: \#CHANGE: \#CHRIS I'm going to make getSharedPosition look only at your subteam members
        143                 teamPosition = self.getSubTeamPosition(a.team) if groupConformityBias else None \#position is on unit cube
    --> 144                 didMove = a.move(soBias=soBias,groupConformityBias = groupConformityBias, teamPosition=teamPosition)
        145         if len(talkers)\%2>0: \#odd number, have last one explore instead of share
        146             a = talkers.pop()


        <ipython-input-87-c8e6a043d1df> in move(self, soBias, groupConformityBias, teamPosition)
         32 \#         print('considering moving '+str(d) + ' from '+str(self.r))
         33         candidateSolution = asParameters((self.rNorm + d)*scalingVector)
    ---> 34         candidateSolution = constrain(candidateSolution,self.myDims)
         35 
         36         acceptsNewSolution = self.evaluate(candidateSolution,soBias,groupConformityBias,teamPosition=teamPosition)


        <ipython-input-35-f18db74a4428> in constrain(p, dimsToConstrain)
          1 def constrain(p,dimsToConstrain=np.ones(len(paramsDF))):
          2 \#     p\_attribute = getAttr(p)
    ----> 3     paramIndices = [i for i in range(len(dimsToConstrain)) if dimsToConstrain[i] ==1]
          4     for i in paramIndices: \#range(len(paramsDF)): \# we need to do the equations bounds last
          5 \#         if not dimsToConstrain[i]: \#we don't need to check this dimension, it didn't change


        TypeError: object of type 'numpy.int64' has no len()

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}98}]:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{cabin len, m: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{carDesign}\PY{o}{.}\PY{n}{lc}\PY{p}{)}\PY{p}{)}
         \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{front wing angle, deg: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{carDesign}\PY{o}{.}\PY{n}{afw}\PY{o}{*}\PY{l+m+mi}{180}\PY{o}{/}\PY{n}{np}\PY{o}{.}\PY{n}{pi}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        NameError                                 Traceback (most recent call last)

        <ipython-input-98-997ebdf3b7b9> in <module>()
    ----> 1 print("cabin len, m: " +str(carDesign.lc))
          2 print("front wing angle, deg: " +str(carDesign.afw*180/np.pi))


        NameError: name 'carDesign' is not defined

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}99}]:} \PY{n}{p} \PY{o}{=} \PY{n}{startParams}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}100}]:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{random start point:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{cabin len, m: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{lc}\PY{p}{)}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{front wing angle, deg: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{p}\PY{o}{.}\PY{n}{afw}\PY{o}{*}\PY{l+m+mi}{180}\PY{o}{/}\PY{n}{np}\PY{o}{.}\PY{n}{pi}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
random start point:
cabin len, m: 1.525
front wing angle, deg: 22.96603615023486

    \end{Verbatim}

    \subsection{Run SAE team}\label{run-sae-team}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}101}]:} \PY{n}{resetDefaultParameters}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}102}]:} \PY{c+c1}{\PYZsh{} for k in range(reps):}
          \PY{c+c1}{\PYZsh{} \PYZsh{}     if k\PYZpc{}10 == 0:}
          \PY{c+c1}{\PYZsh{} \PYZsh{}         startPositions = np.random.uniform(\PYZhy{}1*startRange,startRange,[teamSize,nDims])}
          \PY{c+c1}{\PYZsh{}     for i in range(len(aiRanges)):}
          \PY{c+c1}{\PYZsh{}         aiRange = aiRanges[i]}
          \PY{c+c1}{\PYZsh{}         for j in range(len(aiScoresMeans)):}
          \PY{c+c1}{\PYZsh{}             aiScore = aiScoresMeans[j]}
          \PY{c+c1}{\PYZsh{}             team = teamWorkSpecialized(nAgents,constructor,teamDims,agentTeams,showViz=showViz,speed=None,pComm=pComm,steps=steps,groupConformityBias=True,soBias=True,aiScore=aiScore,aiRange=aiRange)}
          \PY{c+c1}{\PYZsh{}             score = team.getBestScore()}
          \PY{c+c1}{\PYZsh{}             scores.append(score)}
          \PY{c+c1}{\PYZsh{}             aiScores = [a.kai.KAI for a in team.agents]}
          \PY{c+c1}{\PYZsh{}             aiTeamMeans.append(np.mean(aiScores))}
          \PY{c+c1}{\PYZsh{}             aiTeamRange.append(np.max(aiScores) \PYZhy{} np.min(aiScores))}
          \PY{c+c1}{\PYZsh{}             nMeetings.append(team.nMeetings)}
          \PY{c+c1}{\PYZsh{}             teamMeetings.append(team.nTeamMeetings)}
          \PY{c+c1}{\PYZsh{}             scoreMatrix[i,j] += score}
          \PY{c+c1}{\PYZsh{}             plt.clf()}
          \PY{c+c1}{\PYZsh{}             plt.plot(range(len(team.scoreHistory)),team.scoreHistory)}
          \PY{c+c1}{\PYZsh{}             plt.ylim([\PYZhy{}3,0])}
          \PY{c+c1}{\PYZsh{}             plt.xlim([0,100])}
          \PY{c+c1}{\PYZsh{}             plt.savefig(\PYZdq{}./figs/teamScores\PYZus{}mu:\PYZdq{}+str(aiScore)+\PYZdq{}\PYZus{}sd:\PYZdq{}+str(aiRange)+\PYZdq{}\PYZus{}\PYZdq{}+str(timer.time())+\PYZdq{}.pdf\PYZdq{})}
          \PY{c+c1}{\PYZsh{} \PYZsh{}             print(team.nMeetings)}
          \PY{c+c1}{\PYZsh{} scoreMatrix = np.array(scoreMatrix) / reps \PYZsh{}the average score}
          \PY{c+c1}{\PYZsh{} print(\PYZdq{}time to complete: \PYZdq{}+str(timer.time() \PYZhy{} t))}
          \PY{c+c1}{\PYZsh{} print(\PYZdq{}ai ranges: \PYZdq{}+str(aiRanges))}
          \PY{c+c1}{\PYZsh{} print(\PYZdq{}ai means: \PYZdq{}+str(aiScoresMeans))}
          \PY{c+c1}{\PYZsh{} print(\PYZdq{}reps:\PYZdq{} +str(reps))}
          \PY{c+c1}{\PYZsh{} np.savetxt(\PYZdq{}./results/scoreMatrix\PYZus{}+\PYZdq{}+str(timer.time())+\PYZdq{}.csv\PYZdq{}, scoreMatrix, delimiter=\PYZdq{},\PYZdq{})}
\end{Verbatim}


    \subsection{Use MultiProcessing for parallel
computing}\label{use-multiprocessing-for-parallel-computing}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}176}]:} \PY{n}{curatedTeams} \PY{o}{=} \PY{k+kc}{False}
          \PY{k}{def} \PY{n+nf}{teamWorkProcess}\PY{p}{(}\PY{n}{processID}\PY{p}{)}\PY{p}{:}
              \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{seed}\PY{p}{(}\PY{p}{)}
              \PY{n}{team} \PY{o}{=} \PY{n}{teamWorkSharing}\PY{p}{(}\PY{n}{nAgents}\PY{p}{,}\PY{n}{constructor}\PY{p}{,}\PY{n}{teamDimensions\PYZus{}CONST}\PY{p}{,}\PY{n}{agentTeams}\PY{p}{,}\PY{n}{showViz}\PY{o}{=}\PY{n}{showViz}\PY{p}{,}\PY{n}{speed}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{pComm}\PY{o}{=}\PY{n}{pComm}\PY{p}{,}\PY{n}{steps}\PY{o}{=}\PY{n}{steps}\PY{p}{,}\PY{n}{groupConformityBias}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}\PY{n}{soBias}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}\PY{n}{aiScore}\PY{o}{=}\PY{n}{aiScore}\PY{p}{,}\PY{n}{aiRange}\PY{o}{=}\PY{n}{aiRange}\PY{p}{,}\PY{n}{curatedTeams}\PY{o}{=}\PY{n}{curatedTeams}\PY{p}{)}
              \PY{k}{return} \PY{n}{team}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}104}]:} \PY{c+c1}{\PYZsh{} !jupyter nbconvert \PYZhy{}\PYZhy{}to script Chicago.ipynb}
\end{Verbatim}


    \section{Problem Solving Styles and paramter
tuning}\label{problem-solving-styles-and-paramter-tuning}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}196}]:} \PY{c+c1}{\PYZsh{}first: how much is their style affecting their behavior?}
          \PY{n}{resetDefaultParameters}\PY{p}{(}\PY{p}{)}
          \PY{n}{t0} \PY{o}{=} \PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}
          \PY{n}{allTeamObjects} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          
          \PY{n}{resetDefaultParameters}\PY{p}{(}\PY{p}{)}
          \PY{n}{reps} \PY{o}{=} \PY{l+m+mi}{1}
          \PY{n}{nAgents} \PY{o}{=} \PY{l+m+mi}{33}
          \PY{n}{agentTeams} \PY{o}{=} \PY{n}{saeTeams}\PY{p}{(}\PY{n}{nAgents}\PY{p}{)}
          
          \PY{n}{steps} \PY{o}{=} \PY{l+m+mi}{50}
          \PY{n}{aiScoresMeans} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{100}\PY{p}{]}
          \PY{n}{aiRanges} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{90}\PY{p}{]}
          \PY{n}{pComms} \PY{o}{=} \PY{p}{[}\PY{l+m+mf}{0.2}\PY{p}{]}
          \PY{n}{meetingTimes} \PY{o}{=} \PY{l+m+mi}{10} \PY{c+c1}{\PYZsh{}team meating every how many steps?}
          \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{reps}\PY{p}{)}\PY{p}{:}
              \PY{k}{for} \PY{n}{pComm} \PY{o+ow}{in} \PY{n}{pComms}\PY{p}{:}
                  \PY{k}{for} \PY{n}{aiScore} \PY{o+ow}{in} \PY{n}{aiScoresMeans}\PY{p}{:}
                      \PY{k}{for} \PY{n}{aiRange} \PY{o+ow}{in} \PY{n}{aiRanges}\PY{p}{:}
                          \PY{n}{team} \PY{o}{=} \PY{n}{teamWorkSharing}\PY{p}{(}\PY{n}{nAgents}\PY{p}{,}\PY{n}{constructor}\PY{p}{,}\PY{n}{teamDimensions\PYZus{}CONST}\PY{p}{,}\PY{n}{agentTeams}\PY{p}{,}\PY{n}{showViz}\PY{o}{=}\PY{n}{showViz}\PY{p}{,}\PY{n}{speed}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,}\PY{n}{pComm}\PY{o}{=}\PY{n}{pComm}\PY{p}{,}\PY{n}{steps}\PY{o}{=}\PY{n}{steps}\PY{p}{,}\PY{n}{groupConformityBias}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}\PY{n}{soBias}\PY{o}{=}\PY{k+kc}{True}\PY{p}{,}\PY{n}{aiScore}\PY{o}{=}\PY{n}{aiScore}\PY{p}{,}\PY{n}{aiRange}\PY{o}{=}\PY{n}{aiRange}\PY{p}{)}
                          \PY{n}{allTeamObjects}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{team}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{time to complete: }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n}{t0}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
time to complete: 9.17118215560913

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}197}]:} \PY{n}{team0} \PY{o}{=} \PY{n}{allTeamObjects}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
          \PY{n}{team0}\PY{o}{.}\PY{n}{nTeamMeetings}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}197}]:} 10
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}191}]:} \PY{n}{team} \PY{o}{=} \PY{n}{allTeamObjects}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
          \PY{n}{t} \PY{o}{=} \PY{l+m+mi}{9}
          \PY{n}{a0} \PY{o}{=} \PY{n}{team}\PY{o}{.}\PY{n}{agents}\PY{p}{[}\PY{n}{t}\PY{p}{]}
          \PY{n}{a1} \PY{o}{=} \PY{n}{team}\PY{o}{.}\PY{n}{agents}\PY{p}{[}\PY{n}{t}\PY{o}{+}\PY{l+m+mi}{11}\PY{p}{]}
          \PY{n}{a2} \PY{o}{=} \PY{n}{team}\PY{o}{.}\PY{n}{agents}\PY{p}{[}\PY{n}{t}\PY{o}{+}\PY{l+m+mi}{22}\PY{p}{]}
          
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{mixed team}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{showPath}\PY{p}{(}\PY{p}{[}\PY{n}{a0}\PY{p}{,}\PY{n}{a1}\PY{p}{,}\PY{n}{a2}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
mixed team

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_96_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{t0} \PY{o}{=} \PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}
        \PY{n}{resetDefaultParameters}\PY{p}{(}\PY{p}{)}
        
        \PY{n}{pComm} \PY{o}{=} \PY{l+m+mf}{0.2}
        \PY{n}{pComms} \PY{o}{=} \PY{p}{[}\PY{l+m+mf}{0.2}\PY{p}{]}\PY{c+c1}{\PYZsh{} np.linspace(0,.3,20)}
        
        \PY{n}{VERBOSE} \PY{o}{=} \PY{k+kc}{False}
        \PY{n}{showViz} \PY{o}{=} \PY{k+kc}{False}
        
        \PY{n}{reps} \PY{o}{=} \PY{l+m+mi}{4} \PY{c+c1}{\PYZsh{} 10 \PYZsh{}\PYZdl{}40 \PYZsh{}5}
        
        \PY{n}{aiScoresMeans} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{100}\PY{p}{]}\PY{c+c1}{\PYZsh{}np.linspace(80,120,3)}
        \PY{n}{aiRanges} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{c+c1}{\PYZsh{} np.linspace(0,30,2)}
        
        \PY{n}{meetingTimes} \PY{o}{=} \PY{n}{steps} \PY{c+c1}{\PYZsh{}have one meeting at the end}
        \PY{n}{TEAM\PYZus{}MEETING\PYZus{}COST} \PY{o}{=} \PY{l+m+mi}{1}
        
        
        \PY{n}{scoreMatrix} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{p}{[}\PY{n+nb}{len}\PY{p}{(}\PY{n}{aiRanges}\PY{p}{)}\PY{p}{,}\PY{n+nb}{len}\PY{p}{(}\PY{n}{aiScoresMeans}\PY{p}{)}\PY{p}{]}\PY{p}{)}
        
        \PY{n}{exitFlag} \PY{o}{=} \PY{l+m+mi}{0}
        
        \PY{n}{allTeamObjects} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        
        \PY{k}{for} \PY{n}{pComm} \PY{o+ow}{in} \PY{n}{pComms}\PY{p}{:}   
            \PY{k}{if} \PY{n+nv+vm}{\PYZus{}\PYZus{}name\PYZus{}\PYZus{}} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}\PYZus{}main\PYZus{}\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                \PY{n}{pool} \PY{o}{=} \PY{n}{multiprocessing}\PY{o}{.}\PY{n}{Pool}\PY{p}{(}\PY{n}{processes} \PY{o}{=} \PY{l+m+mi}{4}\PY{p}{)}
                \PY{n}{allTeams} \PY{o}{=} \PY{n}{pool}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{teamWorkProcess}\PY{p}{,} \PY{n+nb}{range}\PY{p}{(}\PY{n}{reps}\PY{p}{)}\PY{p}{)}\PY{c+c1}{\PYZsh{}[pool.apply\PYZus{}async(teamWorkProcess, (i,)) for i in range(reps)]}
                \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{moving on}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                \PY{k}{for} \PY{n}{team} \PY{o+ow}{in} \PY{n}{allTeams}\PY{p}{:}
                    \PY{n}{allTeamObjects}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{team}\PY{p}{)}
        \PY{c+c1}{\PYZsh{} allTeams = [t for tl in allTeamObjects for t in tl]}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{time to complete: }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n}{t0}\PY{p}{)}\PY{p}{)}
        \PY{n}{allTeams} \PY{o}{=} \PY{n}{allTeamObjects}
        \PY{n}{chaching}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}179}]:} \PY{n}{t0} \PY{o}{=} \PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}
          \PY{n}{resetDefaultParameters}\PY{p}{(}\PY{p}{)}
          \PY{n}{curatedTeams} \PY{o}{=} \PY{k+kc}{True}
          
          \PY{n}{pComm} \PY{o}{=} \PY{l+m+mf}{0.2}
          \PY{n}{pComms} \PY{o}{=} \PY{p}{[}\PY{l+m+mf}{0.2}\PY{p}{]}\PY{c+c1}{\PYZsh{} np.linspace(0,.3,20)}
          
          \PY{n}{steps} \PY{o}{=} \PY{l+m+mi}{50}
          \PY{n}{reps} \PY{o}{=} \PY{l+m+mi}{4} \PY{c+c1}{\PYZsh{} 10 \PYZsh{}\PYZdl{}40 \PYZsh{}5}
          
          \PY{n}{aiScoresMeans} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{100}\PY{p}{]}\PY{c+c1}{\PYZsh{}np.linspace(80,120,3)}
          \PY{n}{aiRanges} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{c+c1}{\PYZsh{} np.linspace(0,30,2)}
          
          \PY{n}{meetingTimes} \PY{o}{=} \PY{n}{steps} \PY{c+c1}{\PYZsh{}have one meeting at the end}
          
          \PY{n}{allTeamObjects} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{k}{for} \PY{n}{pComm} \PY{o+ow}{in} \PY{n}{pComms}\PY{p}{:}   
              \PY{k}{if} \PY{n+nv+vm}{\PYZus{}\PYZus{}name\PYZus{}\PYZus{}} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}\PYZus{}main\PYZus{}\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                  \PY{n}{pool} \PY{o}{=} \PY{n}{multiprocessing}\PY{o}{.}\PY{n}{Pool}\PY{p}{(}\PY{n}{processes} \PY{o}{=} \PY{l+m+mi}{4}\PY{p}{)}
                  \PY{n}{allTeams} \PY{o}{=} \PY{n}{pool}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{teamWorkProcess}\PY{p}{,} \PY{n+nb}{range}\PY{p}{(}\PY{n}{reps}\PY{p}{)}\PY{p}{)}
                  \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{moving on}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                  \PY{k}{for} \PY{n}{team} \PY{o+ow}{in} \PY{n}{allTeams}\PY{p}{:}
                      \PY{n}{allTeamObjects}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{team}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} allTeams = [t for tl in allTeamObjects for t in tl]}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{time to complete: }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n}{t0}\PY{p}{)}\PY{p}{)}
          \PY{n}{allTeams} \PY{o}{=} \PY{n}{allTeamObjects}
          \PY{n}{chaching}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        RemoteTraceback                           Traceback (most recent call last)

        RemoteTraceback: 
    """
    Traceback (most recent call last):
      File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 119, in worker
        result = (True, func(*args, **kwds))
      File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 44, in mapstar
        return list(map(*args))
      File "<ipython-input-176-fe14314c6318>", line 4, in teamWorkProcess
        team = teamWorkSharing(nAgents,constructor,teamDimensions\_CONST,agentTeams,showViz=showViz,speed=None,pComm=pComm,steps=steps,groupConformityBias=True,soBias=True,aiScore=aiScore,aiRange=aiRange,curatedTeams=curatedTeams)
      File "<ipython-input-144-54eb3105a7c1>", line 82, in teamWorkSharing
        myKai = aiScore - aiRange/2.0 + aiRange*(float(i)/(len(teamAgents)-1))
    TypeError: unsupported operand type(s) for /: 'NoneType' and 'float'
    """

        
    The above exception was the direct cause of the following exception:


        TypeError                                 Traceback (most recent call last)

        <ipython-input-179-9fdbf164033c> in <module>()
         18     if \_\_name\_\_ == '\_\_main\_\_':
         19         pool = multiprocessing.Pool(processes = 4)
    ---> 20         allTeams = pool.map(teamWorkProcess, range(reps))
         21         print('moving on')
         22         for team in allTeams:


        /anaconda3/lib/python3.6/multiprocessing/pool.py in map(self, func, iterable, chunksize)
        264         in a list that is returned.
        265         '''
    --> 266         return self.\_map\_async(func, iterable, mapstar, chunksize).get()
        267 
        268     def starmap(self, func, iterable, chunksize=None):


        /anaconda3/lib/python3.6/multiprocessing/pool.py in get(self, timeout)
        642             return self.\_value
        643         else:
    --> 644             raise self.\_value
        645 
        646     def \_set(self, i, obj):


        TypeError: unsupported operand type(s) for /: 'NoneType' and 'float'

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{allScores} \PY{o}{=} \PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{allTeamObjects}\PY{p}{]}
        \PY{n}{nShares} \PY{o}{=} \PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{nMeetings}\PY{o}{/}\PY{n}{nAgents} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{allTeamObjects}\PY{p}{]}
        \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{nShares}\PY{p}{,}\PY{n}{allScores}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}150}]:} \PY{n}{allScores} \PY{o}{=} \PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{allTeamObjects}\PY{p}{]}
          \PY{n}{scoresForPComm} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{int}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{allScores}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{4}\PY{p}{)}\PY{p}{)}\PY{p}{:}
              \PY{n}{theseScores} \PY{o}{=} \PY{n}{allScores}\PY{p}{[}\PY{l+m+mi}{0}\PY{o}{+}\PY{n}{i}\PY{o}{*}\PY{l+m+mi}{4}\PY{p}{:}\PY{l+m+mi}{4}\PY{o}{+}\PY{n}{i}\PY{o}{*}\PY{l+m+mi}{4}\PY{p}{]}
              \PY{n}{scoresForPComm}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{theseScores}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{pComms}\PY{p}{,}\PY{n}{scoresForPComm}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{avg score vs pComm}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./figs/avgScore\PYZus{}Vs\PYZus{}pComm.pdf}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        ValueError                                Traceback (most recent call last)

        <ipython-input-150-68f874ca81d1> in <module>()
          5     theseScores = allScores[0+i*4:4+i*4]
          6     scoresForPComm.append(np.mean(theseScores))
    ----> 7 plt.scatter(pComms,scoresForPComm)
          8 plt.title("avg score vs pComm")
          9 plt.savefig("./figs/avgScore\_Vs\_pComm.pdf")


        /anaconda3/lib/python3.6/site-packages/matplotlib/pyplot.py in scatter(x, y, s, c, marker, cmap, norm, vmin, vmax, alpha, linewidths, verts, edgecolors, hold, data, **kwargs)
       3468                          vmin=vmin, vmax=vmax, alpha=alpha,
       3469                          linewidths=linewidths, verts=verts,
    -> 3470                          edgecolors=edgecolors, data=data, **kwargs)
       3471     finally:
       3472         ax.\_hold = washold


        /anaconda3/lib/python3.6/site-packages/matplotlib/\_\_init\_\_.py in inner(ax, *args, **kwargs)
       1853                         "the Matplotlib list!)" \% (label\_namer, func.\_\_name\_\_),
       1854                         RuntimeWarning, stacklevel=2)
    -> 1855             return func(ax, *args, **kwargs)
       1856 
       1857         inner.\_\_doc\_\_ = \_add\_data\_doc(inner.\_\_doc\_\_,


        /anaconda3/lib/python3.6/site-packages/matplotlib/axes/\_axes.py in scatter(self, x, y, s, c, marker, cmap, norm, vmin, vmax, alpha, linewidths, verts, edgecolors, **kwargs)
       4241         y = np.ma.ravel(y)
       4242         if x.size != y.size:
    -> 4243             raise ValueError("x and y must be the same size")
       4244 
       4245         if s is None:


        ValueError: x and y must be the same size

    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_100_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}270}]:} \PY{n}{scoresForPComm}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}270}]:} [-2.039567859600141,
           -2.3723489379415725,
           -2.5074387728312346,
           -2.5356173009237106,
           -2.6708729308720294,
           -2.6598657473999867,
           -2.3124368793668864]
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}233}]:} \PY{c+c1}{\PYZsh{} bigTeamSet= bigTeamSet[0:20]}
          \PY{c+c1}{\PYZsh{} for t in allTeamObjects:}
          \PY{c+c1}{\PYZsh{}     bigTeamSet.append(t)}
          \PY{c+c1}{\PYZsh{} len(bigTeamSet)}
          \PY{c+c1}{\PYZsh{} bigTeamSet = [i for l in bigTeamSet for i in l]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}233}]:} 28
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}236}]:} \PY{n}{x} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{nMeetings} \PY{o}{/} \PY{l+m+mi}{33} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{bigTeamSet}\PY{p}{]}\PY{p}{)}
          \PY{n}{yr} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{bigTeamSet}\PY{p}{]}\PY{p}{)}
          \PY{c+c1}{\PYZsh{} xcat = [round(i*2,\PYZhy{}1)/2 for i in x]}
          \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{yr}\PY{p}{)}
          \PY{n}{p} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{yr}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
          \PY{n}{z} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{poly1d}\PY{p}{(}\PY{n}{p}\PY{p}{)}
          \PY{n}{x1} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{n+nb}{max}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x1}\PY{p}{,}\PY{n}{z}\PY{p}{(}\PY{n}{x1}\PY{p}{)}\PY{p}{,}\PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{red}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Performance vs Number of pair\PYZhy{}meetings}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{avg n pair\PYZhy{}shares per agent}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{overall best score}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{t} \PY{o}{=} \PY{n+nb}{str}\PY{p}{(}\PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}\PY{p}{)}
          \PY{n}{np}\PY{o}{.}\PY{n}{savetxt}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./savedParams/}\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n}{t}\PY{o}{+}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{.txt}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{p}{[}\PY{n}{makeParamString}\PY{p}{(}\PY{p}{)}\PY{p}{]}\PY{p}{,} \PY{n}{fmt}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{./figs/pairwiseSharing\PYZus{}noReset\PYZus{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n}{t}\PY{o}{+}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{.pdf}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_103_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}393}]:} \PY{c+c1}{\PYZsh{}bootstrapping for mean and sd of minimum point}
          \PY{n}{bestNshares} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          
          \PY{n}{allInd} \PY{o}{=} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{bigTeamSet}\PY{p}{)}\PY{p}{)}
          \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{1000}\PY{p}{)}\PY{p}{:}
              \PY{n}{ind} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{choice}\PY{p}{(}\PY{n}{allInd}\PY{p}{,}\PY{l+m+mi}{14}\PY{p}{)}
              \PY{n}{teams} \PY{o}{=} \PY{p}{[}\PY{n}{bigTeamSet}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n}{ind}\PY{p}{]}
              \PY{n}{x} \PY{o}{=} \PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{nMeetings}\PY{o}{/}\PY{l+m+mi}{33} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{teams}\PY{p}{]}
              \PY{n}{y} \PY{o}{=} \PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{teams}\PY{p}{]}
              \PY{n}{x1} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{n+nb}{min}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{,}\PY{n+nb}{max}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{300}\PY{p}{)}
              \PY{n}{p} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
              \PY{n}{z} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{poly1d}\PY{p}{(}\PY{n}{p}\PY{p}{)}
              \PY{n}{predicted} \PY{o}{=} \PY{n}{z}\PY{p}{(}\PY{n}{x1}\PY{p}{)}
              \PY{n}{bestNshares}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{x1}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{argmin}\PY{p}{(}\PY{n}{predicted}\PY{p}{)}\PY{p}{]}\PY{p}{)}
              
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{best n shares per agent:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{mean:}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{bestNshares}\PY{p}{)}\PY{p}{)}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{std: }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{bestNshares}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
best n shares per agent:
mean:43.4431558731124
std: 9.50356733199722

    \end{Verbatim}

    \subsection{Organic Team Composition}\label{organic-team-composition}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}116}]:} \PY{n}{t0} \PY{o}{=} \PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}
          \PY{n}{resetDefaultParameters}\PY{p}{(}\PY{p}{)}
          \PY{n}{reps} \PY{o}{=} \PY{l+m+mi}{16} \PY{c+c1}{\PYZsh{} 10 \PYZsh{}\PYZdl{}40 \PYZsh{}5}
          
          \PY{n}{aiScoresMeans} \PY{o}{=} \PY{p}{[}\PY{k+kc}{None}\PY{p}{]}\PY{c+c1}{\PYZsh{}np.linspace(80,120,3)}
          \PY{n}{aiRanges} \PY{o}{=} \PY{p}{[}\PY{k+kc}{None}\PY{p}{]} \PY{c+c1}{\PYZsh{} np.linspace(0,30,2)}
          
          \PY{n}{meetingTimes} \PY{o}{=} \PY{n}{steps} \PY{c+c1}{\PYZsh{}have one meeting at the end}
          
          \PY{n}{allTeamObjects} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          
          \PY{k}{for} \PY{n}{aiScore} \PY{o+ow}{in} \PY{n}{aiScoresMeans}\PY{p}{:}
              \PY{k}{for} \PY{n}{aiRange} \PY{o+ow}{in} \PY{n}{aiRanges}\PY{p}{:}
                  \PY{k}{if} \PY{n+nv+vm}{\PYZus{}\PYZus{}name\PYZus{}\PYZus{}} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}\PYZus{}main\PYZus{}\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                      \PY{n}{pool} \PY{o}{=} \PY{n}{multiprocessing}\PY{o}{.}\PY{n}{Pool}\PY{p}{(}\PY{n}{processes} \PY{o}{=} \PY{l+m+mi}{4}\PY{p}{)}
                      \PY{n}{allTeams} \PY{o}{=} \PY{n}{pool}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{teamWorkProcess}\PY{p}{,} \PY{n+nb}{range}\PY{p}{(}\PY{n}{reps}\PY{p}{)}\PY{p}{)}\PY{c+c1}{\PYZsh{}[pool.apply\PYZus{}async(teamWorkProcess, (i,)) for i in range(reps)]}
                      \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{moving on}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                      \PY{k}{for} \PY{n}{team} \PY{o+ow}{in} \PY{n}{allTeams}\PY{p}{:}
                          \PY{n}{allTeamObjects}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{team}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{time to complete: }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n}{t0}\PY{p}{)}\PY{p}{)}
          \PY{n}{allTeams} \PY{o}{=} \PY{n}{allTeamObjects}
          \PY{n}{chaching}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Process ForkPoolWorker-10:
Process ForkPoolWorker-11:
Process ForkPoolWorker-9:
Process ForkPoolWorker-12:
Traceback (most recent call last):
Traceback (most recent call last):
Traceback (most recent call last):
Traceback (most recent call last):
  File "/anaconda3/lib/python3.6/multiprocessing/process.py", line 258, in \_bootstrap
    self.run()
  File "/anaconda3/lib/python3.6/multiprocessing/process.py", line 258, in \_bootstrap
    self.run()
  File "/anaconda3/lib/python3.6/multiprocessing/process.py", line 258, in \_bootstrap
    self.run()

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        KeyboardInterrupt                         Traceback (most recent call last)

        <ipython-input-116-c753e2caad78> in <module>()
         14         if \_\_name\_\_ == '\_\_main\_\_':
         15             pool = multiprocessing.Pool(processes = 4)
    ---> 16             allTeams = pool.map(teamWorkProcess, range(reps))\#[pool.apply\_async(teamWorkProcess, (i,)) for i in range(reps)]
         17             print('moving on')
         18             for team in allTeams:


        /anaconda3/lib/python3.6/multiprocessing/pool.py in map(self, func, iterable, chunksize)
        264         in a list that is returned.
        265         '''
    --> 266         return self.\_map\_async(func, iterable, mapstar, chunksize).get()
        267 
        268     def starmap(self, func, iterable, chunksize=None):


        /anaconda3/lib/python3.6/multiprocessing/pool.py in get(self, timeout)
        636 
        637     def get(self, timeout=None):
    --> 638         self.wait(timeout)
        639         if not self.ready():
        640             raise TimeoutError


        /anaconda3/lib/python3.6/multiprocessing/pool.py in wait(self, timeout)
        633 
        634     def wait(self, timeout=None):
    --> 635         self.\_event.wait(timeout)
        636 
        637     def get(self, timeout=None):


        /anaconda3/lib/python3.6/threading.py in wait(self, timeout)
        549             signaled = self.\_flag
        550             if not signaled:
    --> 551                 signaled = self.\_cond.wait(timeout)
        552             return signaled
        553 


        /anaconda3/lib/python3.6/threading.py in wait(self, timeout)
        293         try:    \# restore state no matter what (e.g., KeyboardInterrupt)
        294             if timeout is None:
    --> 295                 waiter.acquire()
        296                 gotit = True
        297             else:


        KeyboardInterrupt: 

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
  File "/anaconda3/lib/python3.6/multiprocessing/process.py", line 258, in \_bootstrap
    self.run()
  File "/anaconda3/lib/python3.6/multiprocessing/process.py", line 93, in run
    self.\_target(*self.\_args, **self.\_kwargs)
  File "/anaconda3/lib/python3.6/multiprocessing/process.py", line 93, in run
    self.\_target(*self.\_args, **self.\_kwargs)
  File "/anaconda3/lib/python3.6/multiprocessing/process.py", line 93, in run
    self.\_target(*self.\_args, **self.\_kwargs)
  File "/anaconda3/lib/python3.6/multiprocessing/process.py", line 93, in run
    self.\_target(*self.\_args, **self.\_kwargs)
  File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 119, in worker
    result = (True, func(*args, **kwds))
  File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 119, in worker
    result = (True, func(*args, **kwds))
  File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 119, in worker
    result = (True, func(*args, **kwds))
  File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 119, in worker
    result = (True, func(*args, **kwds))
  File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 44, in mapstar
    return list(map(*args))
  File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 44, in mapstar
    return list(map(*args))
  File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 44, in mapstar
    return list(map(*args))
  File "/anaconda3/lib/python3.6/multiprocessing/pool.py", line 44, in mapstar
    return list(map(*args))
  File "<ipython-input-103-8407a5242295>", line 3, in teamWorkProcess
    team = teamWorkSharing(nAgents,constructor,teamDimensions\_CONST,agentTeams,showViz=showViz,speed=None,pComm=pComm,steps=steps,groupConformityBias=True,soBias=True,aiScore=aiScore,aiRange=aiRange)
  File "<ipython-input-103-8407a5242295>", line 3, in teamWorkProcess
    team = teamWorkSharing(nAgents,constructor,teamDimensions\_CONST,agentTeams,showViz=showViz,speed=None,pComm=pComm,steps=steps,groupConformityBias=True,soBias=True,aiScore=aiScore,aiRange=aiRange)
  File "<ipython-input-103-8407a5242295>", line 3, in teamWorkProcess
    team = teamWorkSharing(nAgents,constructor,teamDimensions\_CONST,agentTeams,showViz=showViz,speed=None,pComm=pComm,steps=steps,groupConformityBias=True,soBias=True,aiScore=aiScore,aiRange=aiRange)
  File "<ipython-input-93-dc99972b5787>", line 81, in teamWorkSharing
    squad.nMeetings += squad.step(pComm,showViz,soBias,groupConformityBias)
  File "<ipython-input-103-8407a5242295>", line 3, in teamWorkProcess
    team = teamWorkSharing(nAgents,constructor,teamDimensions\_CONST,agentTeams,showViz=showViz,speed=None,pComm=pComm,steps=steps,groupConformityBias=True,soBias=True,aiScore=aiScore,aiRange=aiRange)
  File "<ipython-input-93-dc99972b5787>", line 81, in teamWorkSharing
    squad.nMeetings += squad.step(pComm,showViz,soBias,groupConformityBias)
  File "<ipython-input-93-dc99972b5787>", line 81, in teamWorkSharing
    squad.nMeetings += squad.step(pComm,showViz,soBias,groupConformityBias)
  File "<ipython-input-93-dc99972b5787>", line 81, in teamWorkSharing
    squad.nMeetings += squad.step(pComm,showViz,soBias,groupConformityBias)
  File "<ipython-input-89-97d78a2f6313>", line 144, in step
    didMove = a.move(soBias=soBias,groupConformityBias = groupConformityBias, teamPosition=teamPosition)
  File "<ipython-input-89-97d78a2f6313>", line 144, in step
    didMove = a.move(soBias=soBias,groupConformityBias = groupConformityBias, teamPosition=teamPosition)
  File "<ipython-input-89-97d78a2f6313>", line 144, in step
    didMove = a.move(soBias=soBias,groupConformityBias = groupConformityBias, teamPosition=teamPosition)
  File "<ipython-input-89-97d78a2f6313>", line 144, in step
    didMove = a.move(soBias=soBias,groupConformityBias = groupConformityBias, teamPosition=teamPosition)
  File "<ipython-input-87-c8e6a043d1df>", line 34, in move
    candidateSolution = constrain(candidateSolution,self.myDims)
  File "<ipython-input-87-c8e6a043d1df>", line 34, in move
    candidateSolution = constrain(candidateSolution,self.myDims)
  File "<ipython-input-87-c8e6a043d1df>", line 36, in move
    acceptsNewSolution = self.evaluate(candidateSolution,soBias,groupConformityBias,teamPosition=teamPosition)
  File "<ipython-input-35-f18db74a4428>", line 20, in constrain
    for i, otherParam in paramsDF[paramsDF.team == variable].iterrows():\#dimension is driven by this one
  File "<ipython-input-87-c8e6a043d1df>", line 33, in move
    candidateSolution = asParameters((self.rNorm + d)*scalingVector)
  File "<ipython-input-35-f18db74a4428>", line 7, in constrain
    param = paramsDF.loc[i]
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py", line 2679, in \_\_getitem\_\_
    return self.\_getitem\_array(key)
  File "<ipython-input-16-44b66c927d5f>", line 7, in asParameters
    setattr(p,pNames[i],pList[i])
  File "<ipython-input-87-c8e6a043d1df>", line 116, in evaluate
    gcB = self.groupConformityBias(teamPosition,self.rNorm,candidateSolutionNorm)
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py", line 2721, in \_getitem\_array
    return self.\_take(indexer, axis=0)
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/indexing.py", line 1478, in \_\_getitem\_\_
    return self.\_getitem\_axis(maybe\_callable, axis=axis)
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/series.py", line 766, in \_\_getitem\_\_
    result = self.index.get\_value(self, key)
  File "<ipython-input-87-c8e6a043d1df>", line 98, in groupConformityBias
    rgNorm = normalizedRG(self.kai.RG) \#normalized score for Rule/Group Conformity
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/generic.py", line 2791, in \_take
    if not result.\_get\_axis(axis).equals(self.\_get\_axis(axis)):
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/indexing.py", line 1912, in \_getitem\_axis
    return self.\_get\_label(key, axis=axis)
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/indexes/base.py", line 3103, in get\_value
    tz=getattr(series.dtype, 'tz', None))
  File "<ipython-input-79-89c2adce5a5d>", line 4, in normalizedRG
    return (rg - kaiDF\_DATASET.mean().RG)/kaiDF\_DATASET.std().RG
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/indexing.py", line 140, in \_get\_label
    return self.obj.\_xs(label, axis=axis)
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/indexes/base.py", line 2434, in equals
    if self.is\_(other):
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/generic.py", line 9589, in stat\_func
    numeric\_only=numeric\_only)
KeyboardInterrupt
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/generic.py", line 2997, in xs
    new\_values = self.\_data.fast\_xs(loc)
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py", line 6851, in \_reduce
    result = f(values)
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/indexes/base.py", line 618, in is\_
    return self.\_id is getattr(
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/internals.py", line 4074, in fast\_xs
    dtype = \_interleaved\_dtype(self.blocks)
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/frame.py", line 6840, in f
    return op(x, axis=axis, skipna=skipna, **kwds)
KeyboardInterrupt
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/internals.py", line 5048, in \_interleaved\_dtype
    dtype = find\_common\_type([b.dtype for b in blocks])
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/nanops.py", line 77, in \_f
    return f(*args, **kwargs)
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/nanops.py", line 125, in f
    if \_has\_infs(result):
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/internals.py", line 5048, in <listcomp>
    dtype = find\_common\_type([b.dtype for b in blocks])
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/internals.py", line 354, in dtype
    return self.values.dtype
  File "/anaconda3/lib/python3.6/site-packages/pandas/core/nanops.py", line 169, in \_has\_infs
    return lib.has\_infs\_f8(result.ravel())
KeyboardInterrupt
KeyboardInterrupt

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{tMeans} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{n}{tSds} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{n}{tScores} \PY{o}{=} \PY{p}{[}\PY{p}{]} 
        \PY{n}{tRanges} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{n}{tMeetings} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{allTeamObjects}\PY{p}{:}
            \PY{n}{kais} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{t}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
            \PY{n}{tMeans}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{kais}\PY{p}{)}\PY{p}{)}
            \PY{n}{tRanges}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{n}{kais}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n}{np}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{n}{kais}\PY{p}{)}\PY{p}{)}
            \PY{n}{tSds}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{kais}\PY{p}{)}\PY{p}{)}
            \PY{n}{tScores}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)}\PY{p}{)}
            \PY{n}{tMeetings}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{t}\PY{o}{.}\PY{n}{nMeetings}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{tMeans}\PY{p}{,}\PY{n}{tScores}\PY{p}{)}
        \PY{n}{p}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{tMeans}\PY{p}{,}\PY{n}{tScores}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scores vs means}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{p}\PY{p}{)}
        \PY{n}{f} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{poly1d}\PY{p}{(}\PY{n}{p}\PY{p}{)}
        \PY{n}{x} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{n+nb}{min}\PY{p}{(}\PY{n}{tMeans}\PY{p}{)}\PY{p}{,}\PY{n+nb}{max}\PY{p}{(}\PY{n}{tMeans}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{f}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{tSds}\PY{p}{,}\PY{n}{tScores}\PY{p}{)}
        \PY{n}{p}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{tSds}\PY{p}{,}\PY{n}{tScores}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scores vs stdevs}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{p}\PY{p}{)}
        \PY{n}{f} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{poly1d}\PY{p}{(}\PY{n}{p}\PY{p}{)}
        \PY{n}{x} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{n+nb}{min}\PY{p}{(}\PY{n}{tSds}\PY{p}{)}\PY{p}{,}\PY{n+nb}{max}\PY{p}{(}\PY{n}{tSds}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{f}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \subsection{Specific Make-up Teams}\label{specific-make-up-teams}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}348}]:} \PY{n}{t0} \PY{o}{=} \PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}
          \PY{n}{resetDefaultParameters}\PY{p}{(}\PY{p}{)}
          
          \PY{n}{reps} \PY{o}{=} \PY{l+m+mi}{4}
          \PY{n}{aiScoresMeans} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{100}\PY{p}{]}\PY{c+c1}{\PYZsh{}np.linspace(80,120,3)}
          \PY{n}{aiRanges} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{,}\PY{l+m+mi}{8}\PY{p}{)}
          
          \PY{n}{allTeamObjects} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{k}{for} \PY{n}{aiScore} \PY{o+ow}{in} \PY{n}{aiScoresMeans}\PY{p}{:}
              \PY{k}{for} \PY{n}{aiRange} \PY{o+ow}{in} \PY{n}{aiRanges}\PY{p}{:}
                  \PY{k}{if} \PY{n+nv+vm}{\PYZus{}\PYZus{}name\PYZus{}\PYZus{}} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}\PYZus{}main\PYZus{}\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                      \PY{n}{pool} \PY{o}{=} \PY{n}{multiprocessing}\PY{o}{.}\PY{n}{Pool}\PY{p}{(}\PY{n}{processes} \PY{o}{=} \PY{l+m+mi}{4}\PY{p}{)}
                      \PY{n}{allTeams} \PY{o}{=} \PY{n}{pool}\PY{o}{.}\PY{n}{map}\PY{p}{(}\PY{n}{teamWorkProcess}\PY{p}{,} \PY{n+nb}{range}\PY{p}{(}\PY{n}{reps}\PY{p}{)}\PY{p}{)}\PY{c+c1}{\PYZsh{}[pool.apply\PYZus{}async(teamWorkProcess, (i,)) for i in range(reps)]}
                      \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{moving on}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                      \PY{k}{for} \PY{n}{team} \PY{o+ow}{in} \PY{n}{allTeams}\PY{p}{:}
                          \PY{n}{allTeamObjects}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{team}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{time to complete: }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{timer}\PY{o}{.}\PY{n}{time}\PY{p}{(}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n}{t0}\PY{p}{)}\PY{p}{)}
          \PY{n}{chaching}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
moving on
moving on
moving on
moving on
moving on
moving on
moving on
moving on
time to complete: 907.2802548408508

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}349}]:} \PY{k}{def} \PY{n+nf}{getBestScoreAtTime}\PY{p}{(}\PY{n}{team}\PY{p}{,}\PY{n}{t}\PY{p}{)}\PY{p}{:}
              \PY{c+c1}{\PYZsh{} t is fraction of time in simulation. this is approximate}
              \PY{n}{scores} \PY{o}{=} \PY{p}{[}\PY{p}{]}
              \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{team}\PY{o}{.}\PY{n}{agents}\PY{p}{:}
                  \PY{n}{ml} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{a}\PY{o}{.}\PY{n}{memory}\PY{p}{)}
                  \PY{n}{memorySubset} \PY{o}{=} \PY{n}{a}\PY{o}{.}\PY{n}{memory}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{:}\PY{n+nb}{int}\PY{p}{(}\PY{n}{ml}\PY{o}{*}\PY{n}{t}\PY{p}{)}\PY{p}{]}
                  \PY{n}{scores}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{[}\PY{n}{m}\PY{o}{.}\PY{n}{score} \PY{k}{for} \PY{n}{m} \PY{o+ow}{in} \PY{n}{memorySubset}\PY{p}{]}\PY{p}{)}\PY{p}{)}
              \PY{k}{return} \PY{n+nb}{min}\PY{p}{(}\PY{n}{scores}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}350}]:} \PY{c+c1}{\PYZsh{} allTeamObjects1 = allTeamObjects}
          \PY{c+c1}{\PYZsh{} for t in allTeamObjects:}
          \PY{c+c1}{\PYZsh{}     allTeamObjects1.append(t)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}394}]:} \PY{n}{tMeans} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{tSds} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{tScores} \PY{o}{=} \PY{p}{[}\PY{p}{]} 
          \PY{n}{tRanges} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{tMeetings} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{bestScoresAtFraction} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{so} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{rg} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{e} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{allTeamObjects}\PY{p}{:}
              \PY{k}{if} \PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)}\PY{o}{\PYZgt{}}\PY{o}{\PYZhy{}}\PY{l+m+mi}{2}\PY{p}{:} \PY{k}{continue}
              \PY{n}{kais} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{KAI} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{t}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
              \PY{n}{tMeans}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{kais}\PY{p}{)}\PY{p}{)}
              \PY{n}{tRanges}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{n}{kais}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{n}{np}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{n}{kais}\PY{p}{)}\PY{p}{)}
              
              \PY{n}{tSds}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{kais}\PY{p}{)}\PY{p}{)}
              \PY{n}{tScores}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)}\PY{p}{)}
              \PY{n}{tMeetings}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{t}\PY{o}{.}\PY{n}{nMeetings}\PY{p}{)}
              \PY{n}{bestScoresAtFraction}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{getBestScoreAtTime}\PY{p}{(}\PY{n}{t}\PY{p}{,}\PY{o}{.}\PY{l+m+mi}{25}\PY{p}{)}\PY{p}{)}
              
              \PY{n}{sos} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{SO} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{t}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
              \PY{n}{so}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{sos}\PY{p}{)}\PY{p}{)}
              
              \PY{n}{es} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{E} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{t}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
              \PY{n}{e}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{es}\PY{p}{)}\PY{p}{)}
              
              \PY{n}{rgs} \PY{o}{=} \PY{p}{[}\PY{n}{a}\PY{o}{.}\PY{n}{kai}\PY{o}{.}\PY{n}{RG} \PY{k}{for} \PY{n}{a} \PY{o+ow}{in} \PY{n}{t}\PY{o}{.}\PY{n}{agents}\PY{p}{]}
              \PY{n}{rg}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{rgs}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}405}]:} \PY{c+c1}{\PYZsh{} any trends for subscores? not really}
          \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{rg}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{40}\PY{p}{,}\PY{n}{tScores}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{e}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{20}\PY{p}{,}\PY{n}{tScores}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{so}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{45}\PY{p}{,}\PY{n}{tScores}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}405}]:} <matplotlib.collections.PathCollection at 0x1a366e6358>
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_115_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}357}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{tMeans}\PY{p}{,}\PY{n}{tScores}\PY{p}{)}
          \PY{n}{p}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{tMeans}\PY{p}{,}\PY{n}{tScores}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scores vs means}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{p}\PY{p}{)}
          \PY{n}{f} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{poly1d}\PY{p}{(}\PY{n}{p}\PY{p}{)}
          \PY{n}{x} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{n+nb}{min}\PY{p}{(}\PY{n}{tMeans}\PY{p}{)}\PY{p}{,}\PY{n+nb}{max}\PY{p}{(}\PY{n}{tMeans}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{f}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
scores vs means
[-0.12731133 10.13473877]

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}357}]:} [<matplotlib.lines.Line2D at 0x1a36805f98>]
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_116_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}358}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{tRanges}\PY{p}{,}\PY{n}{tScores}\PY{p}{)}
          \PY{n}{p}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{tRanges}\PY{p}{,}\PY{n}{tScores}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scores vs stdevs}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{p}\PY{p}{)}
          \PY{n}{f} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{poly1d}\PY{p}{(}\PY{n}{p}\PY{p}{)}
          \PY{n}{x} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{n+nb}{min}\PY{p}{(}\PY{n}{tRanges}\PY{p}{)}\PY{p}{,}\PY{n+nb}{max}\PY{p}{(}\PY{n}{tRanges}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{f}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
scores vs stdevs
[ 1.50189989e-03 -2.60862366e+00]

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}358}]:} [<matplotlib.lines.Line2D at 0x1a367c9eb8>]
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_117_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}360}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{scatter}\PY{p}{(}\PY{n}{tRanges}\PY{p}{,}\PY{n}{bestScoresAtFraction}\PY{p}{)}
          \PY{n}{p}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{polyfit}\PY{p}{(}\PY{n}{tRanges}\PY{p}{,}\PY{n}{bestScoresAtFraction}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{scores vs stdevs}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n+nb}{print}\PY{p}{(}\PY{n}{p}\PY{p}{)}
          \PY{n}{f} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{poly1d}\PY{p}{(}\PY{n}{p}\PY{p}{)}
          \PY{n}{x} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{n+nb}{min}\PY{p}{(}\PY{n}{tRanges}\PY{p}{)}\PY{p}{,}\PY{n+nb}{max}\PY{p}{(}\PY{n}{tRanges}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{100}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{f}\PY{p}{(}\PY{n}{x}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{score}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{range of KAI on team}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
scores vs stdevs
[ 0.00758675 -2.37335727]

    \end{Verbatim}

\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}360}]:} Text(0.5,0,'range of KAI on team')
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_118_2.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{diverseTeams}\PY{o}{=} \PY{p}{[} \PY{n}{t} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{allTeamObjects} \PY{k}{if} \PY{n}{t}\PY{o}{.}\PY{n}{dAI} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{uniformTeams} \PY{o}{=} \PY{p}{[} \PY{n}{t} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{allTeamObjects} \PY{k}{if} \PY{n}{t}\PY{o}{.}\PY{n}{dAI} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{colors} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{red}\PY{l+s+s1}{\PYZsq{}} \PY{k}{if} \PY{n}{t}\PY{o}{.}\PY{n}{dAI} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0} \PY{k}{else} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{blue}\PY{l+s+s1}{\PYZsq{}} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{allTeamObjects} \PY{p}{]}
        \PY{n}{isDiverse} \PY{o}{=} \PY{p}{[}\PY{k+kc}{True} \PY{k}{if} \PY{n}{t}\PY{o}{.}\PY{n}{dAI} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0} \PY{k}{else} \PY{k+kc}{False} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{allTeamObjects} \PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{avgDiverseScore} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{diverseTeams}\PY{p}{]}\PY{p}{)}
        \PY{n}{avgUniformScore} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{uniformTeams}\PY{p}{]}\PY{p}{)}
        \PY{n}{std1} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{diverseTeams}\PY{p}{]}\PY{p}{)}
        \PY{n}{std2} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{uniformTeams}\PY{p}{]}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{diverse score avg:}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{avgDiverseScore}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{uniform score avg: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{avgUniformScore}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{stds:}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{std1}\PY{p}{)} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ and }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{std2}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{diverseScores} \PY{o}{=} \PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{diverseTeams}\PY{p}{]}
        \PY{n}{avgDiverseScore} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{diverseScores}\PY{p}{)}
        \PY{n}{uniformScores} \PY{o}{=} \PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{uniformTeams}\PY{p}{]}
        \PY{n}{avgUniformScore} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{mean}\PY{p}{(}\PY{n}{uniformScores}\PY{p}{)}
        \PY{n}{std1} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{diverseTeams}\PY{p}{]}\PY{p}{)}
        \PY{n}{std2} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{p}{[}\PY{n}{t}\PY{o}{.}\PY{n}{getBestScore}\PY{p}{(}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{uniformTeams}\PY{p}{]}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{diverse score avg:}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{avgDiverseScore}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{uniform score avg: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{avgUniformScore}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{stds:}\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{std1}\PY{p}{)} \PY{o}{+} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ and }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{std2}\PY{p}{)}\PY{p}{)}
        \PY{n}{stat}\PY{p}{,} \PY{n}{p} \PY{o}{=} \PY{n}{scipy}\PY{o}{.}\PY{n}{stats}\PY{o}{.}\PY{n}{ttest\PYZus{}ind}\PY{p}{(}\PY{n}{diverseScores}\PY{p}{,}\PY{n}{uniformScores}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{significance: p= }\PY{l+s+s2}{\PYZdq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{p}\PY{p}{)}\PY{p}{)}
\end{Verbatim}



    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
